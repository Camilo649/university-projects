var CS_CONF={"isSMB":false,"projectId":3150,"status":1,"hostnames":["nvidia.com","rainfocus.com","docs.nvidia.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":20,"validationRate":10,"lastTrackingDraw":1749076063,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":1,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"","anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]},"customErrors":{"consoleMessageLogLevels":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aeu1.contentsquare.net","malkaRecordingDomain":"k-aeu1.contentsquare.net","staticResourceManagerDomain":"srm.ba.contentsquare.net","voc":{"siteId":null,"enabled":0}};

var CS_INTEGRATIONS_CONF = {"adobe-target":{},"foresee":{},"usertesting":{},"hotjar":{}};
/* integration-adobe-target 3.8.0 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Adobe Target","dvarPrefix":"AB_AT_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-adobe-target-contentsquare","version":"3.8.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var c=t(0);const u=function(e){let n,t,i,r;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let c="-contentsquare";r=new RegExp(c+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(c="-cap",r=new RegExp(c+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),s=u.parameterName,l=u.snippetBuildName,f=u.snippetVersion;o((function(){const e=c.displayName,n=c.dvarPrefix;var t,u;t=e,u=f,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+u);const p=i(s,"customObjectName"),d=p?p.trim():"ttMETA";function g(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),a(l,`Dynamic variable with ${e} and value ${t} sent`)}const m=[];function w(e){if(e&&function(e){return Array.isArray(e)}(e))for(const n of e){let e,t;n.CampaignName&&n.RecipeName?(e=n.CampaignName,t=n.RecipeName):n.campaign&&n.experience?(e=n.campaign,t=n.experience):n["activity.name"]&&n["experience.name"]&&(e=n["activity.name"],t=n["experience.name"]),m.length&&m.includes(e+"~~~~"+t)&&(e="",t=""),e&&t&&(m.push(e+"~~~~"+t),g(e,t))}}document.addEventListener("at-request-succeeded",(function(e){o((function(){e&&e.detail&&e.detail.responseTokens&&w(e.detail.responseTokens)}),l)})),function(e,n,t){t=t||window;const o=e.split(".");if(1==o.length)r(e,n,t);else{let e=t,i=0;const a=function(){e=i>0?e[o[i-1]]:window,i++,i>=o.length?r(o[i-1],n,e):r(o[i-1],a,e)};a()}}(d,(function(){setTimeout((function(){o((function(){w(window[d])}),l)}),500)}))}),l)}]);/* integration-foresee 3.2.0 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Verint (ForeSee)","dvarPrefix":"FB_FS_","apvPrefix":"cs_foresee","replayKey":"fs"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-foresee-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function o(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function u(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var c=t(0);const a=function(e){let n,t,o,r;if(i((function(){const i=e.name;n=e.version;const u=i.replace("@contentsquare/integration-","");t=u+"-"+n;let c="-contentsquare";r=new RegExp(c+"$").test(u),o=u.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(c="-cap",r=new RegExp(c+"$").test(u),o=u.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:o,snippetVersion:n}}(t(1)),d=a.parameterName,s=a.snippetBuildName,f=a.snippetVersion;i((function(){const e=c.displayName,n=c.dvarPrefix,t=c.apvPrefix,a=c.replayKey;var p,l;p=e,l=f,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(p+" - v"+l);const b=o(d,"settings"),w=(S=b,Array.isArray(S)?b:[]);var S;const g=w.includes("sendArtificialPageviews"),y=w.includes("setReplayLinkToCurrentPV");let m=!1;function _(e,t,i,o){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),m&&"etr"===i&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),o&&g&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+o),u(s,`Dynamic variable with ${e} and value ${t} sent`)}!function(e,n,t){t=t||window;const i=e.split(".");if(1==i.length)r(e,n,t);else{let e=t,o=0;const u=function(){e=o>0?e[i[o-1]]:window,o++,o>=i.length?r(i[o-1],n,e):r(i[o-1],u,e)};u()}}("FSR",(function(){setTimeout((function(){i((function(){"function"==typeof window.fsReady&&fsReady((function(){i((function(){(function(e,n,t,i){return new Promise((function(o,r){function u(){window._uxa.push(["replay:link:generate",{withTimestamp:t},c])}function c(i){if(i&&i.replayLink&&i.isRecording){let r="https://"+i.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(r);e.set("pvid",1);const n=e.toString();r=decodeURIComponent(n)}o(r)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),i?u():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&u()}]))}))})(a,y).then((function(e){i((function(){m=!0,e&&FSR.CPPS&&"function"==typeof FSR.CPPS.set&&FSR.CPPS.set("ContentsquareReplay",e)}),s)})),FSR.onInviteShown&&"function"==typeof FSR.onInviteShown.subscribe&&FSR.onInviteShown.subscribe((function(e){i((function(){e&&(e.uid?_("Feedback Invite Displayed","Survey ID : "+e.uid,0,t+"=feedback_invite_displayed"):_("Feedback Invite Displayed","true",0,t+"=feedback_invite_displayed"))}),s)}),!0,!0),FSR.onInviteAccepted&&"function"==typeof FSR.onInviteAccepted.subscribe&&FSR.onInviteAccepted.subscribe((function(e){i((function(){e&&(e.uid?_("Feedback Invite Submitted","Survey ID : "+e.uid,"etr",t+"=feedback_invite_submitted"):_("Feedback Invite Submitted","true","etr",t+"=feedback_invite_submitted"))}),s)}),!0,!0),FSR.onFeedbackShown&&"function"===FSR.onFeedbackShown.subscribe&&FSR.onFeedbackShown.subscribe((function(e){i((function(){_("Feedback Displayed","true",0,t+"=feedback_displayed")}),s)}),!0,!0),FSR.onFeedbackSubmitted&&"function"===FSR.onFeedbackSubmitted.subscribe&&FSR.onFeedbackSubmitted.subscribe((function(e){i((function(){e&&(e.mid?_("Feedback Submitted","Survey ID : "+e.mid,"etr",t+"=feedback_submitted"):_("Feedback Submitted","true","etr",t+"=feedback_submitted"),e.rating&&_("Feedback Rating",parseInt(e.rating)))}),s)}),!0,!0)}),s)}))}),s)}),500)}))}),s)}]);/* integration-usertesting 3.2.0 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"UserTesting","dvarPrefix":"UGC_UT_","apvPrefix":"cs_usertesting","replayKey":"ut"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-usertesting-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function r(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}function o(e,n){n||(n="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&=]"+e+n+"([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}t.r(n);function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var u=t(0);const c=function(e){let n,t,r,o;if(i((function(){const i=e.name;n=e.version;const a=i.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";o=new RegExp(u+"$").test(a),r=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(u="-cap",o=new RegExp(u+"$").test(a),r=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:r,snippetVersion:n}}(t(1)),s=c.parameterName,p=c.snippetBuildName,d=c.snippetVersion;i((function(){const e=u.displayName,n=u.dvarPrefix,t=(u.apvPrefix,u.replayKey);var c,l;c=e,l=d,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(c+" - v"+l);const f=r(s,"settings"),w=(g=f,Array.isArray(g)?f:[]);var g;const _=w.includes("sendArtificialPageviews"),m=w.includes("setReplayLinkToCurrentPV");let x=!1;const y=document.location.search;if(y.indexOf("utm_source=UserTesting")>-1&&y.indexOf("utm_campaign=")>-1&&y.indexOf("utm_content=")>-1){const e=o("utm_campaign"),r=o("utm_content");r&&function(e,n,t,i){return new Promise((function(r,o){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(i){if(i&&i.replayLink&&i.isRecording){let o="https://"+i.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(o);e.set("pvid",1);const n=e.toString();o=decodeURIComponent(n)}r(o)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),i?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))}))}(t,m).then((function(e){i((function(){if(x=!0,e){!function(e,n){const t=new XMLHttpRequest;t.open("POST",e),t.setRequestHeader("Content-Type","application/json"),t.send(n)}("https://cloudhub-prod.usertesting.com/usertesting/api/v1/partner-analytics",JSON.stringify({usertesting_eid:r,external_link:e,partner_name:"Contentsquare"}))}}),p)})),e&&(O="etr",S="cs_usertesting=study_id_"+e,function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(b=n+(b="Study ID"),v=e),x&&"etr"===O&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(b),S&&_&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+S),a(p,`Dynamic variable with ${b} and value ${v} sent`))}var b,v,O,S}),p)}]);/* integration-hotjar 3.2.2 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Hotjar","dvarPrefix":"FB_HJ_","apvPrefix":"cs_hotjar","replayKey":"hj"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-hotjar-contentsquare","version":"3.2.2","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function o(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);let r,u=1e3,a=10;function s(e,n,t,i,c,d){var l;n&&t&&(r||(r=o(e,"timingSettings"),"object"==typeof(l=r)&&null!==l&&Object.keys(l).length&&(u=r.doOnlyWhenInterval,a=r.doOnlyWhenTimes)),void 0===(c=c)&&(c=u),void 0===(d=d)&&(d=a),--d<0?"function"==typeof i&&i():t()?n():setTimeout((function(){s(e,n,t,i,c,d)}),c))}function c(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var d=t(0);const l=function(e){let n,t,o,r;if(i((function(){const i=e.name;n=e.version;const u=i.replace("@contentsquare/integration-","");t=u+"-"+n;let a="-contentsquare";r=new RegExp(a+"$").test(u),o=u.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(a="-cap",r=new RegExp(a+"$").test(u),o=u.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:o,snippetVersion:n}}(t(1)),p=l.parameterName,f=l.snippetBuildName,y=l.snippetVersion;i((function(){const e=d.displayName,n=d.dvarPrefix,t=d.apvPrefix,r=d.replayKey;var u,a;u=e,a=y,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+a);const l=o(p,"settings"),w=(v=l,Array.isArray(v)?l:[]);var v;const g=w.includes("sendArtificialPageviews"),m=w.includes("setReplayLinkToCurrentPV");let _=!1;function S(e,t,i,o){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),_&&"etr"===i&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),o&&g&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+o),c(f,`Dynamic variable with ${e} and value ${t} sent`)}const h=[];window.addEventListener("hotjar-survey-event",(function(e){i((function(){if(e&&e.detail&&e.detail.event){const n=e.detail,i=n.event,o=n.surveyId;if(i&&o)if("surveyInvitationDisplayed"===i)h.includes(i+"-"+o)||(h.push(i+"-"+o),S("Survey Invitation Displayed","Survey ID : "+o,0,t+"=survey_invitation_displayed"));else if("surveyDisplayed"===i)h.includes(i+"-"+o)||(h.push(i+"-"+o),S("Survey Displayed","Survey ID : "+o,0,t+"=survey_displayed"));else if("surveySubmitted"===i){h.includes(i+"-"+o)||(h.push(i+"-"+o),S("Survey Response Submitted","Survey ID : "+o,"etr",t+"=survey_response_submitted"));const e=n.question;if(e){const t=e.type,i=e.text,r=n.questionIndex,u=n.response;let a=u[0]&&u[0].answer;"multiple-close-ended"!=t&&i&&void 0!==a&&(isNaN(a)||(a=parseInt(a)),S(o+" : "+i,a),S(o+" : Question "+(r+1),a))}const r=n.insightsUrl;r&&(h.includes(r+"-"+o)||(h.push(r+"-"+o),S("Survey Response URL",r)))}else"surveyCompleted"===i&&(h.includes(i+"-"+o)||(h.push(i+"-"+o),S("Survey Completed","Survey ID : "+o,0,t+"=survey_completed")))}}),f)})),s(p,(function(){setTimeout(()=>{i((function(){(function(e,n,t,i){return new Promise((function(o,r){function u(){window._uxa.push(["replay:link:generate",{withTimestamp:t},a])}function a(i){if(i&&i.replayLink&&i.isRecording){let r="https://"+i.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(r);e.set("pvid",1);const n=e.toString();r=decodeURIComponent(n)}o(r)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),i?u():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&u()}]))}))})(r,m).then((function(e){i((function(){_=!0,e&&"function"==typeof hj&&hj("identify",null,{contentsquare_replay_link:e})}),f)}))}),f)},500)}),(function(){return"function"==typeof window.hj}))}),f)}]);;
(()=>{var ue={};ue.d=(s,n)=>{for(var t in n)ue.o(n,t)&&!ue.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:n[t]})};ue.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();ue.o=(s,n)=>Object.prototype.hasOwnProperty.call(s,n);ue.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var wr={};ue.r(wr);ue.d(wr,{getRequestParameters:()=>gy});function ts(s,n){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(n)]),t||(t=s[n]),t}var yi=typeof window=="undefined";function nd(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ue.g!="undefined"?ue.g:typeof process!="undefined"?process:Function("return this")()}var Ct=nd();var $a="cs-native-frame",He={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};window.csSetTimeout=ts(window,"setTimeout");window.csQueueMicrotask=ts(window,"queueMicrotask");window.csClearTimeout=ts(window,"clearTimeout");window.csSetInterval=ts(window,"setInterval");window.csClearInterval=ts(window,"clearInterval");window.csFileReader=ts(window,"FileReader");(()=>{var s;let n=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++n}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function rd(){let s=document.createElement("iframe");s.id=$a,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),!!Element.prototype.attachShadow){let e=n.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return n.innerHTML=s.outerHTML,n.firstElementChild.contentWindow}function od(s,n){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,n));)e=Object.getPrototypeOf(e);return t}function ad(s,n,t){let e=od(s,n);if(!e)return function(){return this[n]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function za(s){var n,t;Object.keys(He.constructors).forEach(e=>{window[He.constructors[e]]=s[e]instanceof Function&&s[e].prototype==null?s[e].bind(window):s[e]}),hd(s),("Prototype"in window||ld())&&(window.csMutationObserver=(t=(n=ts(window,"MutationObserver"))!==null&&n!==void 0?n:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),_s("csNode",He.nodeProperties,s.Node.prototype,"get"),_s("csElement",He.elementProperties,s.Element.prototype,"get"),_s("csElement",He.elementPropertiesValues,s.Element.prototype,"value",!1),_s("csHTMLImageElement",He.imageProperties,s.HTMLImageElement.prototype,"set"),_s("csEvent",He.eventProperties,s.Event.prototype,"get"),_s("csNavigator",He.navigatorProperties,s.navigator,"value")}function _s(s,n,t,e,i=!0){n.forEach(r=>{let o=typeof r!="string"&&"binding"in r,c=o?r.propertyName:r;(i||c in t)&&(window[`${s+c}`]=ad(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(r.binding)))})}function qa(s,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=n}function cd(){try{let s=rd();return s?(window.CSPureWindow=s,za(window.CSPureWindow),!0):!1}catch(s){return qa("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!cd())try{za(Ct)}catch(s){qa("Critical",`failed to copy references from window: ${s.message}`)}function ld(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function hd(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function Kn(s){return Ga(csString.prototype.toLowerCase.call(s.localName))}function ud(s){let n=s.getAttribute("id");return n&&Ga(n)}function Ga(s){return csString.prototype.replace.call(s,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function le(s){return J(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function be(s){return s===parseInt(s,10)}function z(s){return J(s)&&(typeof s=="string"||s instanceof csString)}function Qn(s){return typeof s=="boolean"}function Yt(s){return typeof s=="object"}function J(s){return typeof s!="undefined"}function Ot(s){return J(s)&&s!==null}function dd(s,n,t){return be(s)&&s>=n&&s<=t}function pd(s){for(let n in s)return!1;return!0}function Xt(s){return typeof s=="function"}function Ei(s){return s instanceof Element}function Je(s){return s instanceof Error}function fd(s){let n=s.length;for(let t=0;t<n;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}function ct(s){return s.nodeType===1}function Wi(s){return s.nodeType===3}function gd(s){return s.nodeType===8}function Wa(s){return ct(s)&&s.localName==="link"}function md(s){return ct(s)&&s.localName==="source"}function Ya(s){return ct(s)&&s.localName==="a"}function Xa(s){return Wa(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function yd(s){return ct(s)&&s.localName==="img"}function _r(s){return ct(s)&&s.localName==="style"}function en(s){return ct(s)&&s.localName==="input"}function br(s){return ct(s)&&s.localName==="textarea"}function sn(s){return ct(s)&&s.localName==="script"}function Ed(s){return ct(s)&&s.localName==="button"}function js(s){return ct(s)&&"ownerSVGElement"in s}function Ar(s){return ct(s)&&s.localName==="select"}function vd(s){return ct(s)&&s.localName==="details"}function Sd(s){return ct(s)&&s.localName==="summary"}function wd(s){return js(s)&&s.localName==="image"}function _d(s){return js(s)&&s.localName==="use"}function bd(s){return js(s)&&s.localName==="feImage"}function Ad(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function Td(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Yi(s){return s.nodeType===9}function Ns(s){return Ad(s)&&"host"in s&&"mode"in s}function Ka(s){return ct(s)&&!!csElementshadowRoot.apply(s)&&Ns(csElementshadowRoot.apply(s))}var Rd=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Cd(s){return ct(s)&&Ot(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Rd,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var vi="detached";function Qa(s){let n=s,t=[n];for(;csNodeparentNode.apply(n)!==null;)n=csNodeparentNode.apply(n),csArray.prototype.push.call(t,n);return Xi(n)&&csArray.prototype.push.call(t,vi),{ancestors:t,selectionRoot:n}}function Id(s){let n=s,t=[n],e=null;for(;csNodeparentNode.apply(n)!==null;)e===null&&Ya(n)&&(e=n),csArray.prototype.push.call(t,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return Xi(n)&&csArray.prototype.push.call(t,vi),{firstAnchorParent:e,ancestors:t,selectionRoot:n}}function Xi(s){return pe.isValidElement(s)}var ls=(()=>{var s,n;return(n=(s=Ct.Element)===null||s===void 0?void 0:s.prototype)!==null&&n!==void 0?n:{}})(),Kt=ls.matches||ls.matchesSelector||ls.mozMatchesSelector||ls.msMatchesSelector||ls.oMatchesSelector||ls.webkitMatchesSelector,No=ls.closest,Ja=9;function Pd(s,n){return n?csArray.prototype.some.call(n,t=>Kt.call(s,t)):!1}function Od(s,n,t){if(s===vi||s.nodeType===Ja)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(n.localName)),r=Kn(n),o=0,c=n.previousElementSibling;for(;c;)(Kn(c)===r||i&&(e!=null&&e.test(c.localName)))&&!Pd(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Nd(s,n,t){if(s===vi||s.nodeType===Ja)return 0;let e=0,i=n.previousElementSibling;for(;i;)Kt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Md=[/\d{4}/,/^ember\d+$/],kd="@",Tr="data-cs-override-id",Dd="data-cs-dynamic-id";function Za(s,n,t,e){let i=e.dynamicIdRegex||null,r=e.dynamicElementNameRegex,o=Kn(s);if(r&&r.test(s.localName)&&(o=csString.prototype.replace.call(o,r,`$1${kd}`)),Ud(s,t)){let E=Rr(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Tr}="${E}"]`}}let c=zd(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=xd(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=ud(s);if(jd(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let p=Ld(s,e);if(p){let E=Nd(n,s,p);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${p}](${E})`}}let u=Od(n,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${u})`}}function xd(s,n,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Kt.call(s,e)&&$d(e,n))return e}}function Ld(s,n){if(n.reliableSelectors){for(let t of n.reliableSelectors)if(Kt.call(s,t))return t}}function Ud(s,n){let t=Rr(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Cr(Tr,t,n)}function Vd(s){return Rr(s)!==null}function Rr(s){return s.getAttribute(Tr)}function jd(s,n,t,e){return n&&!Vd(s)&&!Hd(s,n,e)&&Fd(n,t)}function Hd(s,n,t){return s.hasAttribute(Dd)||Bd(n,t)}function Bd(s,n){let t=!1;return s&&n&&(t=n.test(s)),s&&(csArray.prototype.some.call(Md,e=>e.test(s))||t)}function Fd(s,n){return s&&Cr("id",s,n)}function Cr(s,n,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${n}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function $d(s,n){try{return window.csquerySelectorAll[n.nodeType].call(n,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function zd(s,n,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Cr(e,i,n))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Jn=11;function Ki(s,n,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Mo(e,t);let i=e,r=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Za(i,r,n,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Mo(h,t)}${o}`}let l=Ki(s,n,t);return`${l?`${l}>`:""}${o}`}function Mo(s,n){if(s===vi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=Qa(s.host);return`${Ki(t,e,n)}|shadow-root|`}return s.nodeType===Jn?"|fragment|":""}var tc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),qd=(()=>{class s extends tc{constructor(){super(...arguments),this.ro=!1,this.oo=!1,this.Za=!1}jm(t,e){return this.ro&&!(e===null&&Xi(t))&&t.nodeType!==Jn&&!t.host}Hm(t){return!t.localName}serializeElement(t,e,i){var r;if((r=this.path)!==null&&r!==void 0||(this.path=""),this.jm(t,e))return;let o=!1;e===null&&Xi(t)&&(o=!0,this.done=!0);let c=this.oo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Za=!0,this.ro=!1,this.oo=!1),!l&&e===null&&t.nodeType===Jn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.Hm(t))return;let h=e!=null?e:"detached",{elementSelector:p,hasUniqueIdentifier:u}=Za(t,h,i,this.options);u&&(this.oo=!0,this.ro=!this.options.fullPath);let E=`${o?`|detached|${c}`:""}${this.ro&&!u?"":p}`,S=!u&&this.oo&&!this.options.fullPath?"":this.path&&!this.Za?">":"";this.Za=!1,this.path=`${E}${S}${this.path}`}}return s})();function zt(s,n=Dt.SHOW_ALL){let t=n|Dt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=ko(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let r=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(r){let h=r;return r=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=ko(c);if(n&Dt.SHOW_DOCUMENT_FRAGMENT&&l&&(r=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Cn[c.nodeType]&n)!==0)return c}return null},visitAll(o){Cn[s.nodeType]&n&&o(s);let c=this.nextNode();for(;c;){if((Cn[c.nodeType]&n)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function ko(s){return s&&Ka(s)?s.shadowRoot:null}var Rn=(()=>{var s;return(s=Ct.Node)!==null&&s!==void 0?s:{}})(),Dt=(()=>{var s;return(s=Ct.NodeFilter)!==null&&s!==void 0?s:{}})(),Cn={2:Dt.SHOW_ATTRIBUTE,4:Dt.SHOW_CDATA_SECTION,8:Dt.SHOW_COMMENT,11:Dt.SHOW_DOCUMENT_FRAGMENT,9:Dt.SHOW_DOCUMENT,10:Dt.SHOW_DOCUMENT_TYPE,1:Dt.SHOW_ELEMENT,[Rn.ENTITY_NODE]:Dt.SHOW_ENTITY,[Rn.ENTITY_REFERENCE_NODE]:Dt.SHOW_ENTITY_REFERENCE,[Rn.NOTATION_NODE]:Dt.SHOW_NOTATION,7:Dt.SHOW_PROCESSING_INSTRUCTION,3:Dt.SHOW_TEXT},ut={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Gd(s){ut=s}var D=s=>(n,t,e)=>{let i=(t==null?void 0:t.toString())||"",r=s||`${n.constructor&&n.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return Ze(r,o.bind(this))(...c)}}};function Ze(s,n){return function(...t){try{let e=n.apply(this,t);return J(window.Promise)&&e instanceof window.Promise?e.then(i=>i,i=>ut.error(Je(i)?i:new Error(i),s)):e}catch(e){try{ut.error(Je(e)?e:new Error(e),s)}catch{}}}}var Hs=(()=>{class s{constructor(){this.ao=0}get length(){return this.ao}get isEmpty(){return!this.Is}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.ao++,this.jn?this.jn=this.jn[1]=[t,void 0]:this.jn=this.Is=[t,void 0]}pop(){if(!this.Is)return null;this.ao--;let t=this.Is[0];return this.Is=this.Is[1],this.Is||(this.jn=void 0),t}forEach(t){let e=this.Is;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.ao=0,this.Is=this.jn=void 0}}return s})(),ec=50,sc=.1;function Wd(){var s;if(!(!((s=window.performance)===null||s===void 0)&&s.mark))return!1;let n="isPerformanceMeasureSupported",t=`${n}_a`;return performance.mark(t),performance.measure(n,t)!==void 0}var Qi=!1,Fi=new Hs;function Yd(s=50,n=.1){Qi=ut.isPerfLoggingActive()&&Wd(),Qi&&(ec=s,sc=n)}var Zn=[],In=[];function ic(s){csArray.prototype.push.call(Zn,s),performance.mark(`${s}-start`)}function nc(s){let n=performance.measure(s,`${s}-start`);if(!n)return;let t=n.duration;t>=sc&&csArray.prototype.push.call(In,{mName:s,mDuration:+t.toFixed(2)}),csArray.prototype.pop.call(Zn),Zn.length===0&&(t>ec&&Fi.push(In),In=[])}function fs(s,n){return function(...t){if(!Qi)return s.apply(this,t);ic(n);let e=s.apply(this,t);return nc(n),e}}var Lt=function(s){return function(n,t,e){let i=e.value;e.value=function(){if(!Qi)return e.value=i,i.apply(this,arguments);ic(s);let r=i.apply(this,arguments);return nc(s),r}}};var us=(()=>{let s;return function(n){function t(){return!!Element.prototype.attachShadow}n.isSupported=t;function e(r){return r&&Ka(r)?r.shadowRoot:null}n.getShadowRoot=e;function i(r){return zt(r,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}n.getAllShadowHosts=fs(i,"getAllShadowHosts")}(s||(s={})),s})(),vt=(()=>{let s;return function(n){function t(){let u=[i()];return document.documentElement&&csArray.prototype.push.call(u,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(u,document.body.scrollHeight,document.body.offsetHeight),Math.max(...u)}n.documentHeight=t;function e(){return document.documentElement.scrollWidth}n.documentWidth=e;function i(){return window.innerHeight}n.windowHeight=i;function r(){return window.innerWidth}n.windowWidth=r;function o(){let u=window.csScreen.width;return be(u)&&u>0?u:window.screen.width}n.screenWidth=o;function c(){let u=window.csScreen.height;return be(u)&&u>0?u:window.screen.height}n.screenHeight=c;function l(){return window.pageXOffset}n.windowOffsetX=l;function h(){return window.pageYOffset}n.windowOffsetY=h;function p(){return{dw:`${e()}`,dh:`${t()}`,ww:`${r()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}n.getRequestParameters=p}(s||(s={})),s})();function Ms(s){var n;let t=(n=s.length)!==null&&n!==void 0?n:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function de(s,n){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=n(s[i]);return e}function Xd(s,n,t){let e=[],i=0;for(let r=0;r<s.length;r+=1){let o=n(s[r]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function rc(s,n){let t=[];return Xd(s,n,e=>csArray.prototype.push.call(t,e)),t}function X(s,n){if(Kd(s)){let t=s.length;for(let e=0;e<t;e++)n(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)n(e.value,t++),e=s.next()}}function Kd(s){return s.length>=0}function we(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return s[e]}function tr(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return!0;return!1}function Qd(s,n){let t=s.length;for(let e=0;e<t;e++)if(!n(s[e],e))return!1;return!0}function Ir(s,n){let t=s.length,e=[];for(let i=0;i<t;i+=1){let r=s[i];n(r)&&csArray.prototype.push.call(e,r)}return e}function Jd(s,n,t){let e=s.length+n.length+((t==null?void 0:t.length)||0),i=new csArray(e),r=0;for(let o=0;o<s.length;o++)i[r++]=s[o];for(let o=0;o<n.length;o++)i[r++]=n[o];if(!t)return i;for(let o=0;o<t.length;o++)i[r++]=t[o];return i}function Do(s,n){for(let t=0;t<s.length;t++)csArray.prototype.push.call(n,s[t])}function Bs(s){let n=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,n?[i,e]:e)),t}var Pn=(()=>{var s;return(s=Ct.Node)!==null&&s!==void 0?s:Object})(),yt=(()=>{let s;return function(n){let t="isConnected"in Pn.prototype?v=>v.isConnected:v=>!v.ownerDocument||!(v.ownerDocument.compareDocumentPosition(v)&v.DOCUMENT_POSITION_DISCONNECTED);function e(v,N){for(let L=v;L;L=csNodenextSibling.apply(L))N(v)}n.forEachChild=e;function i(v){return t(v)}n.isConnected=i;function r(v,N){let L=[];for(let F of l(v,N))csArray.prototype.push.call(L,F);return L}n.getAncestors=r;let o=(v,N)=>{var L;return(L=csNodeparentNode.apply(v))!==null&&L!==void 0?L:N&&Ns(v)?v.host:null};function c(v,N,L=!1){let F=v;for(;F;){if(N(F))return F;let tt=o(F,L);if(tt&&tt!==F)F=tt;else break}return null}n.findAncestor=c;function*l(v,N=!1){let L=v;for(;L;){yield L;let F=o(L,N);if(F&&F!==L)L=F;else break}}n.walkUp=l;function h(v,N){if(v===N||N.contains(v))return!0;let L=n.getParentElement(v);return L&&L!==v?h(L,N):!1}n.isDescendantOf=h;function p(v){var N;return v.parentElement?v.parentElement:n.getRootNode(v)?(N=n.getRootNode(v))===null||N===void 0?void 0:N.host:null}n.getParentElement=p;function u(v,N=document){let L=Ms(window.csquerySelectorAll[N.nodeType].call(N,v)),F=us.getAllShadowHosts(N);for(let tt of F){let ft=us.getShadowRoot(tt);if(!ft)continue;let Nt=Ms(window.csquerySelectorAll[ft.nodeType].call(ft,v));csArray.prototype.push.call(L,...Nt)}return L}n.findAllElements=u,n.getRootNode=(()=>{if("getRootNode"in Pn.prototype)return(L,F)=>L.getRootNode(F);function v(L){let F=N(L);return Ns(F)?v(F.host):F}function N(L){return csNodeparentNode.apply(L)!=null?N(csNodeparentNode.apply(L)):L}return(L,F)=>typeof F=="object"&&!!F.composed?v(L):N(L)})();function E(v){return v==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(v)}function y(v){let N=v.getBoundingClientRect();return N.right+vt.windowOffsetX()<0||N.bottom+vt.windowOffsetY()<0}function S(v){var N,L;if(((N=v.checkVisibility)===null||N===void 0?void 0:N.call(v,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!v.offsetParent){if(!v.getBoundingClientRect)return ut.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${v instanceof Pn} Ctor: ${(L=v==null?void 0:v.constructor)===null||L===void 0?void 0:L.name}`),!1;let ft=v.getBoundingClientRect();if(ft.width==0&&ft.height==0)return!0}let F=window.getComputedStyle(v);return F?F.display==="none"||F.visibility==="hidden"||F.visibility==="collapse"||F.opacity==="0"||F.filter==="opacity(0)"||F.width==="0px"&&F.height==="0px"||E(F.color):!0}n.isHiddenByCSS=S;function A(v){if(S(v))return!0;let L=p(v);return L!=null&&A(L)}n.areAncestorsHiddenByCSS=A;function C(v){let N=null,L=v;do if(S(L))N=L;else break;while(L=p(L));return N}n.getTopAncestorHiddenByCSS=C;function R(v){let N=_(v);return N!==null&&!v.contains(N)&&!N.contains(v)}function _(v){let N=v.getBoundingClientRect(),L=N.left+.5*N.width,F=N.top+.5*N.height;return b(document,L,F)}n.getTopElement=_;function j(v){if(!v.getBoundingClientRect)return null;let N=v.getBoundingClientRect(),L=N.x+N.width/2,F=N.y+N.height/2;return n.getTopElementFromPoint(document,L,F)}n.getElementOnTop=j;function b(v,N,L){let F=v.elementFromPoint(N,L);if(!F)return null;let tt=us.getShadowRoot(F);return tt&&tt!=n.getRootNode(document.body)&&tt!==v?b(tt,N,L):F}n.getTopElementFromPoint=b;function x(v){return!y(v)&&!S(v)&&!R(v)}n.isVisibleInDocument=x;function B(v){return S(v)?!1:G(v)}n.isVisibleInViewportInForeground=B;function G(v){let N=_(v);return N===null?!1:v===N?!0:pt(v)?v.textContent!==""&&N.contains(v):v.contains(N)}n.isInViewPort=G;function et(v,N,L){let F=v.getAttributeNS(N,L);return F===""?v.hasAttributeNS(N,L)?F:null:F}n.getAttributeNS=et;function dt(v){return!!(v.hasAttribute("tabIndex")||v.getAttribute("contentEditable")==="true"||Ya(v)&&v.hasAttribute("href")||(Ar(v)||br(v)||en(v)||Ed(v))&&!v.hasAttribute("disabled")||vd(v)||Sd(v))}n.isElementFocusable=dt;function pt(v){return v.localName==="span"||v.localName==="a"||v.localName==="b"||v.localName==="i"||v.localName==="button"||v.localName==="input"||v.localName==="label"||v.localName==="cite"||v.localName==="small"||v.localName==="strong"||v.localName==="code"||v.localName==="abbr"||v.localName==="em"||v.localName==="dfn"||v.localName==="time"||v.localName==="output"||v.localName==="object"||v.localName==="sub"}n.isInlineElement=pt}(s||(s={})),s})(),Zd=(()=>{class s{constructor(t){this.Bm=t}run(t){let e=[...this.Bm],i=yt.getAncestors(t,!1),r=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.Fm(e,o,c,r),this.$m(e),e.length===0)break;i.length===0&&o.host&&(i=yt.getAncestors(o.host,!1),r=i[i.length-1])}}Fm(t,e,i,r){for(let o of t)o.serializeElement(e,i,r)}$m(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),tp=(()=>{class s extends tc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.zm(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}zm(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.qm(t.id),t.classList&&(e+=this.Gm(csArray.from(t.classList))),t.attributes&&(e+=this.Wm(t)),e}qm(t){return t?`#${t};`:""}Gm(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Ym(t,e){var i,r;return((r=(i=this.options).isAttributeSensitive)===null||r===void 0?void 0:r.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||js(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||en(t)&&e==="value"}Xm(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}Km(t){let e={};for(let i of csArray.from(t.attributes))this.Ym(t,i.name)||(e[i.name]=i.value);return e}Wm(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let r=Object.entries(this.Km(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(r,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.Xm(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(r.length>0?";":"")}}return s})(),pe=(()=>{let s;return function(n){n.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}n.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let p=o(c);if(p===document)return{path:"",hierarchy:""};if(!t(p))return{path:n.INVALID_ELEMENT,hierarchy:n.INVALID_ELEMENT};let u=new qd(h),E=new tp(l);return new Zd([u,E]).run(p),{path:u.getPath(),hierarchy:E.getPath()}}n.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return n.INVALID_ELEMENT;let{ancestors:p,selectionRoot:u}=Qa(h);return Ki(p,u,l)}n.getElementPath=i;function r(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:n.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:p,ancestors:u,selectionRoot:E}=Id(h);return{path:Ki(u,E,l),firstAnchorParent:p}}n.getElementPathAndFirstAnchorParent=r;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||pe;var ep=Number.MAX_SAFE_INTEGER||9007199254740991;function xo(){}function Ae(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function sp(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var Pr=34164e6,Te={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=ep){return Math.floor(Math.random()*s)}},On=csSymbol("cachedJson");function ip(s){if(s[On])return s[On];if(csArray.isArray(s)){if(s.length===0)return"[]";let n="["+ks(s[0]);for(let t=1;t<s.length;t++)n+=","+ks(s[t]);return n+="]"}return s[On]=csJSON.stringify(s)}var ks=typeof window.Symbol!="undefined"?ip:csJSON.stringify;var nt=(()=>{let s;return function(n){n.debug="debug",n.warn="warn",n.implementation="implementation",n.error="error",n.critical="critical"}(s||(s={})),s})(),oc=["t.contentsquare.net","clicktale"],np=s=>{var n;if(typeof s.filename=="string"&&csArray.prototype.some.call(oc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(n=s.error)===null||n===void 0?void 0:n.stack,V.critical(t)}};window.addEventListener("error",np);var V=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(oc,t)}static setStrategy(t){s.Ui=t}static computeIsActive(t){s.xe=Te.boolean(t),s.xe?s.tc=Te.boolean(10):s.tc=!1}static isLoggingActive(){return s.xe}static getStrategy(){return s.Ui}static debug(t,e=""){s.xe&&this.Ui.send(t,e,nt.debug)}static warn(t,e=!0,i=""){var r;s.xe&&e&&this.Ui.send(t,i,nt.warn),(r=window.UXAnalytics.Console)===null||r===void 0||r.warn(t)}static implementation(t,e=""){s.xe&&this.Ui.send(t,e,nt.implementation)}static error(t,e=""){var i;s.xe&&this.Ui.send(t,e,nt.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){this.Ui.send(t,e,nt.critical)}static tryToExecute(t,e){return function(...i){try{let r=e.apply(this,i);return J(window.Promise)&&r instanceof window.Promise?r.then(o=>o,o=>s.error(Je(o)?o:new Error(o),t)):r}catch(r){try{s.error(Je(r)?r:new Error(r),t)}catch{}}}}static isPerfLoggingActive(){return s.tc}}return s.xe=!1,s.tc=!1,s})();var rp=/^\d+\.\d+(?:\.\d+)?$/,op=s=>{if(!rp.test(s))return;let[n,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:n,minor:t,patch:!e||Number.isNaN(e)?0:e}},ap=(s,n)=>s.major!==n.major?s.major-n.major:s.minor!==n.minor?s.minor-n.minor:s.patch-n.patch,cp=(s,n)=>ap(s,n)>=0,lp=1,hp="f553e78fb58e051e51fe8074c4c6e73e",er=(()=>{let s;return function(n){n[n.Disabled=0]="Disabled",n[n.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",n[n.Enabled=2]="Enabled"}(s||(s={})),s})(),up=(()=>{class s{constructor(t){var e,i,r,o,c,l,h;this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||Pr,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors={enabled:(i=t.apiErrorsEnabled)!==null&&i!==void 0?i:0,...t.apiErrors},this.customErrors={enabled:(r=t.customErrorsEnabled)!==null&&r!==void 0?r:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.sc(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.sc(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.sc(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((o=t.uxaDomain)===null||o===void 0?void 0:o.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(c=t.anonymizeDigits)!==null&&c!==void 0?c:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(l=t.recordTargetingRules)!==null&&l!==void 0?l:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(h=t.collectTargetText)!==null&&h!==void 0?h:er.Disabled}getTrackerUri(){return`${this.ls()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.ls()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${hp}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.ls()}://${this.malkaRecordingDomain}`}getLegacyQuotaUri(){return`${this.ls()}://${this.malkaQuotaServiceDomain}`}getLoggerUri(){return`${this.ls()}://${this.loggerDomain}`}getMetricsUri(){return`${this.ls()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.ls()}://${this.staticResourceManagerDomain}`}getQuotaUri(){return`${this.ls()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB&&!!this.dynamicConfDomain}getPaProxyDomainUri(){return`${this.ls()}://${this.paProxyDomainUri}`}ls(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===lp}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[r,o]=i;this.Qm(r,o)}})}Qm(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="malkaQuotaServiceDomain"&&(this.malkaQuotaServiceDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e)}sc(t){return t?this.Jm(t):null}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}Jm(t){try{let e=/^\/(.*)\/([gim]*)$/.exec(t);if(e){let[,i,r]=e;return new csRegExp(`^${i}$`,r)}return new csRegExp(`^${t}$`)}catch{return null}}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.ju()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.ju())return!0;let t=op(this.getHeapVersion()||"");if(t&&t.major===4&&cp(t,{major:4,minor:23,patch:5}))return!0}return!1}ju(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,r,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((r=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||r===void 0?void 0:r.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==er.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}}return s})(),dp=(()=>{class s{constructor(t,e){this.co=t,this.Hu=e}init(){this.Bu=this.co!==this.co.top,this.Fu=this.Hu.isWebView&&this.co===this.co.top,this.Hu.iframesTracking&&this.Bu||this.Fu?this.$u=!1:this.$u=!0}isInIframeContext(){return this.Bu}isTopWindowTracker(){return this.$u}isInWebViewContext(){return this.Fu}}return s})(),gi=(()=>{let s;return function(n){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}n.toQuery=t}(s||(s={})),s})(),ac=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Ds=(()=>{class s extends ac{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.ic(t);let e=gi.toQuery(t);this.Zm(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Zm(t){let e=new window.Image(1,1);e.onload=xo,e.onerror=xo,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}ic(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),pp=(()=>{class s{constructor(t,e){this.Ps=t,this.ty=e}init(){this.hs=new Ds(this.Ps.getLoggerUri()),this.hs.setRequestParametersProviders(this,this.ty)}send(t){this.lo=t,this.hs.send()}getRequestParameters(){return{a:this.lo.app,l:this.lo.level,m:this.lo.message,s:this.lo.stacktrace}}}return s})();function ht(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}var sr=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t}_get(){return this._values}_reset(){this._values={}}aggregate(){if(!s.globalService)return;let t=this._get(),e=Object.keys(t);e.length&&(s.globalService.push(csArray.prototype.map.call(e,i=>({name:this.name,parameter:i,value:t[i]}))),this._reset())}}return s.globalService=null,ht([D("Metric.aggregate")],s.prototype,"aggregate",null),s})(),Vt=(()=>{class s extends sr{constructor(t,e=100){super(t),this.ey=e,this.Ie=null,this._values={}}count(t,e=1){this._values[t]=(this._values[t]||0)+e,this._debounce()}_debounce(){sr.globalService&&(this.Ie&&window.csClearTimeout(this.Ie),this.Ie=window.csSetTimeout(()=>{this.aggregate(),this.Ie=null},this.ey))}}return s})();var rt={counters:{commandsFromIntegrations:new Vt("commands-from-integrations"),commandsFromCSTC:new Vt("commands-from-cstc"),commandsFromIframe:new Vt("commands-from-iframe"),commandApplied:new Vt("command-applied"),commandError:new Vt("command-error"),commandMisuse:new Vt("command-misuse"),CSTCSnippetUsed:new Vt("cstc-snippet-used"),redactedPII:new Vt("redacted-pii"),pageAnonymisation:new Vt("page-anonymisation"),patchedNativeFunctions:new Vt("patched-native-functions"),pureWindowState:new Vt("pure-window-state"),sensitiveElements:new Vt("sensitive-elements"),cspErrors:new Vt("csp-errors"),networkRequests:new Vt("network-requests")},setService(s){sr.setGlobalService(s)}},fp=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,gp=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,mp="CS_ANONYMIZED_EMAIL",Nn="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",yp=new csRegExp(`(ey${Nn}\\.ey${Nn}\\.${Nn})`,"g"),Ep="CS_ANONYMIZED_JWT",vp=/[0-9]{4}/,Sp=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,wp="CS_ANONYMIZED_PII",_p="\u2022",bp=/\d/g,Ap=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Tp=/(?:\d{1,3}\.){3}\d{1,3}/,Rp=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Be=(()=>{let s;return function(n){function t(p){return csString.prototype.replace.call(p,fp,mp)}n.replaceEmail=t;function e(p){return csString.prototype.replace.call(p,yp,Ep)}n.replaceJWT=e;function i(p,u){return csString.prototype.replace.call(p,Sp,u)}n.replaceCreditCardNumber=i;function r(p){return csString.prototype.replace.call(p,bp,_p)}n.replaceDigits=r;function o(p){return Tp.test(p)||Rp.test(p)}n.mayHaveIPAddress=o;function c(p){return Ap.test(p)}n.mayHaveNumberSequence=c;function l(p){return vp.test(p)}n.mayHaveCreditCardNumber=l;function h(p){return gp.test(p)}n.mayHaveEmail=h}(s||(s={})),s})(),gs=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.sy(this.nc(t));return e===!0?i=this.iy(i):e===!1&&(i=this.ny(i)),i}anonymizePII(t){return this.nc(t)}anonymizeJwt(t){return Be.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.nc(t[i])}),t}nc(t){if(Be.mayHaveEmail(t)){let e=Be.replaceEmail(t);return e!==t&&rt.counters.redactedPII.count("email"),e}return t}iy(t){return Be.replaceDigits(t)}ny(t){return Be.mayHaveNumberSequence(t)?Be.replaceDigits(t):t}sy(t){return Be.mayHaveCreditCardNumber(t)?Be.replaceCreditCardNumber(t,(e,i,r,o,c)=>{if(csString.prototype.indexOf.call(r,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(r,o),""):r;if(!this.ry(h))return e;rt.counters.redactedPII.count("cc")}else rt.counters.redactedPII.count("cc-partial");return`${i}${wp}${c}`}):t}ry(t){let e=parseInt(t[t.length-1]),i=0;for(let r=t.length-2;r>=0;r--){let o=parseInt(t[r]);r%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),cc="15.104.2";function Or(){return{v:cc}}function Nr(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function Lo(s){let n=new Uint8Array(s),t="";for(let e=0;e<n.byteLength;e+=1)t+=csString.fromCodePoint(n[e]);return t}function lc(s){let n=self.atob(s);return Nr(n)}function ir(s){let n=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(n,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Uo(s){let n=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=n?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!n&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){ut.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let r=n?lc(e[1]):Nr(e[1]);return new Blob([r],{type:csString.prototype.replace.call(e[0],"data:","")})}var hc=typeof performance!="undefined"&&!!performance.now,Vo=hc?()=>performance.now():csDate.now,Cp=(()=>{var s;return hc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),O={now(){return Math.round(Vo()+Cp)},elapsed(){return Vo()}};function jo(){return Math.floor(O.now()/1e3)}function uc(){return typeof window.Promise=="function"}function Ip(){var s;return typeof crypto!="undefined"&&Xt((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Ho(){var s,n;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((n=window.navigation)===null||n===void 0?void 0:n.removeEventListener)=="function"}function Re(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function Si(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var dc=(()=>{class s{constructor(t,e){this.h=t,this.I=e}getRequestParameters(){return{d:`${O.now()}`,p:this.I.anonymizePII(window.location.href),...this.h.getRequestParameters(),...Or()}}}return s})(),Pp="uxa",Bo=5,Op="No stacktrace",pc="snippet-",fc="implementation-snippet-",Fo=(()=>{let s;return function(n){n.IMPLEMENTATION="implementation",n.DYNAMIC="dynamic"}(s||(s={})),s})(),Mn={[nt.debug]:0,[nt.warn]:1,[nt.implementation]:1,[nt.error]:2,[nt.critical]:3},Np=(()=>{class s{constructor(t,e,i){this.us=e,this.I=new gs,this.zu=Mn[nt.warn],this.zu=Mn[t.minLogLevel||nt.warn],this.hs=i||new pp(t,new dc(t,this.I)),this.qu={[nt.debug]:[],[nt.warn]:[],[nt.implementation]:[],[nt.error]:[],[nt.critical]:[]},this.ho={implementation:{},dynamic:{}},this.hs.init()}send(t,e="",i=nt.warn){if(!this.oy(i,e))return;csArray.prototype.push.call(this.qu[i],e||"");let r={message:this.ay(t,e),stacktrace:this.cy(t),app:Pp,level:i};this.hs.send(r)}ay(t,e){let i=Je(t)?this.I.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}cy(t){return Je(t)?`${t.stack||Op} ${this.uo()}`:this.uo()}uo(){let t=this.us.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.us.getSessionService(),r=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(o)}oy(t,e){if(Mn[t]<this.zu)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,fc,0))===0)return this.Gu(e,Fo.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,pc,0))===0)return this.Gu(e,Fo.DYNAMIC);let i=this.qu[t];return!(i.length>=Bo||e&&csArray.prototype.some.call(i,r=>r===e))}Gu(t,e){return t in this.ho[e]?this.ho[e][t]>=Bo?!1:(this.ho[e][t]+=1,!0):(this.ho[e][t]=1,!0)}}return s})(),At=!yi&&document.createElement("a"),Mp=/(:443|:80)$/;function fe(s){return At?(At.href=s,At.href):""}function gc(s,n){return new csURL(s,n).href}function mc(s){let n=kr(s);return n===null?"":decodeURIComponent(n.hostname)}function Mr(s,n){return csArray.prototype.some.call(n,t=>Si(s,`.${t}`)||s===t||t==="")}function kp(s){return s[0]==="/"?s:`/${s}`}function $o(s){return csString.prototype.replace.call(s,Mp,"")}function kr(s){return!At||!Re(s,"http://")&&!Re(s,"https://")?null:(At.href=s,{hash:At.hash,host:$o(At.host),hostname:At.hostname,href:At.href,origin:At.origin?At.origin:$o(`${At.protocol}//${At.host}`),pathname:kp(At.pathname),port:At.port,protocol:At.protocol,search:At.search})}var zo="CS_IFRAME_MESSAGE",xs=(()=>{let s;return function(n){n.AfterPageView="afterPageView",n.GetSessionKey="getSessionKey"}(s||(s={})),s})(),Ft=(()=>{let s;return function(n){n.Parent="parent",n.Child="child"}(s||(s={})),s})(),I=(()=>{let s;return function(n){n.Discovery="discovery",n.Stop="stop",n.RecordingContext="recordingContext",n.SensitiveStatus="sensitiveStatus",n.RecordingEvent="recordingEvent",n.EndOfBufferedMessages="endOfBufferedMessages",n.ChildLogMessage="childLogMessage",n.AnalysisEvent="analysisEvent",n.JavascriptError="javascriptError",n.ApiError="apiError",n.Assets="assets",n.DetailedApiError="detailedApiError",n.EmerchandisingMessage="emerchandisingMessage",n.Commands="commands",n.IntegrationCallback="integrationCallback",n.StaticResource="staticResource",n.TrackingContextResultMessage="trackingContextResultMessage",n.TrackingContextRequestMessage="trackingContextRequestMessage",n.CustomError="customError"}(s||(s={})),s})(),st=(()=>{let s;return function(n){function t(l,h,p,u){let E={type:l,from:h,pid:p,signature:zo};return u!==void 0&&u>=0&&(E.id=u),E}n.buildBaseMessage=t;function e(l,h,p,u){let E=mc(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===zo&&l.data.from===h&&l.data.pid===p&&Mr(E,u)}n.isMessageValid=e;function i(l,h,p,u){u?l.postMessage(p,h,u):l.postMessage(p,h)}n.sendPostMessage=i;function r(){return new MessageChannel}n.getNewChannelMessage=r;function o(l,h){l.postMessage(h)}n.sendChannelMessage=o;function c(l){l.close()}n.closeChannelPort=c}(s||(s={})),s})(),Dp=(()=>{class s{constructor(t){this.h=t}send(t,e="",i=nt.warn){let r={message:t,errorCode:e,level:i},o=st.buildBaseMessage(I.ChildLogMessage,Ft.Child,this.h.projectId);o.content=r,st.sendPostMessage(window.parent,"*",o)}}return s})(),xp=(()=>{class s{setContext(t,e){this.R=t,this.w=e}getVisitorService(){return this.R}getSessionService(){return this.w}}return s})();function Lp(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function H(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Up(){let s=new MutationObserver(n=>{n.forEach(t=>{X(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(rt.counters.pureWindowState.count("iframe-deletion"),ut.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function qo(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Vp(){(!qo(MutationObserver)||!qo(MutationObserver.prototype.observe))&&rt.counters.patchedNativeFunctions.count("MutationObserver")}function jp(){try{window.CSPureWindow&&Up(),Vp()}catch{}}var mt=(()=>{let s;return function(n){n.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let p=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return p?decodeURIComponent(p[2]):null}n.get=t;function e(l,h,p,u,E,y){let S=encodeURIComponent(`${h}`),A=p===n.CURRENT_DOMAIN?void 0:p,C=i(u),R=C?`;expires=${C.toUTCString()}`:"",_=";path=/",j=Ot(A)?`;domain=${A}`:"",b=`${l}=${S}${R}${_}${j}`;return J(E)&&E!==We.NotSet&&(b=`${b};SameSite=${E}`),J(y)&&y===ve.Yes&&(b=`${b};Secure`),document.cookie=b,!0}n.set=e;function i(l){return le(l)?new csDate(O.now()+l):l}n.toExpireDate=i;function r(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),We.None,ve.Yes)}n.remove=r;function o(){return document.cookie.length>0}n.isCookiePresent=o;function c(l,h){let p="_cs_root-domain",u=t(p);if(u!==null&&u!=="1")return u;let E=csString.prototype.split.call(window.location.hostname,"."),y=csArray.prototype.pop.call(E);for(;E.length&&(u===null||u==="1");)y=csArray.prototype.join.call([csArray.prototype.pop.call(E),y],"."),e(p,y,y,void 0,l,h),u=t(p);return r(p,y),y}n.getRootDomain=c}(s||(s={})),s})(),Hp=(()=>{let s;return function(n){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}n.browserIsSafariV12=t}(s||(s={})),s})(),We=(()=>{let s;return function(n){n.None="None",n.Lax="Lax",n.NotSet="X"}(s||(s={})),s})(),ve=(()=>{let s;return function(n){n[n.Yes=1]="Yes",n[n.No=0]="No"}(s||(s={})),s})(),nn=(()=>{class s{constructor(t,e,i){this.h=t,this.A=e,this.oi=i,this.rc=!1,this.Wu=We.NotSet,this.oc=ve.No}getSameSiteFlag(){return this.Wu}getSecureFlag(){return this.oc}getDomain(){return this.ac}getRootDomain(){return this.Yu}init(){if(this.h.cookielessTrackingEnabled)return;let t=this.ly(),e=this.hy();this.rc=this.uy(t,e),this.rc?(this.Wu=t,this.oc=e):this.h.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.oc=ve.Yes),this.Yu=this.dy(),this.ac=this.py(this.Yu)}uy(t,e){return Hp.browserIsSafariV12()?!1:(mt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),mt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(mt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}ly(){return this.A.getUrlProtocol()==="http:"?We.Lax:this.oi.isSameSiteNoneSecureNeeded()||this.h.crossDomainTracking?We.None:We.Lax}hy(){return this.A.getUrlProtocol()==="http:"?ve.No:this.h.secureCookiesEnabled||this.h.crossDomainTracking||this.oi.isSameSiteNoneSecureNeeded()?ve.Yes:ve.No}isSameSiteSupported(){return this.rc}set(t,e,i){let r=mt.toExpireDate(i);mt.set(t,e,this.ac,r,this.getSameSiteFlag(),this.getSecureFlag())}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ac;mt.remove(t,i)}dy(){let t=this.oi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?We.None:void 0,i=t?ve.Yes:void 0;return mt.getRootDomain(e,i)}py(t){return this.h.allowSubdomains?t:mt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),bs="_cs_t",Go="1",Bp=(()=>{class s{constructor(t,e){this.ft=t,this.h=e,this.po=!1,this.fo=!1}init(){if(!this.h.cookielessTrackingEnabled&&this.ft.isTopWindowTracker()&&"cookie"in document){if(!this.ft.isInIframeContext()&&mt.isCookiePresent()){this.po=!0,this.fo=!1;return}if(mt.set(bs,Go,mt.CURRENT_DOMAIN),mt.get(bs)!==null){this.po=!0,this.fo=!1,mt.remove(bs,mt.CURRENT_DOMAIN);return}mt.set(bs,Go,mt.CURRENT_DOMAIN,void 0,We.None,ve.Yes),mt.get(bs)!==null&&(this.po=!0,this.fo=!0,mt.remove(bs,mt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.po}isSameSiteNoneSecureNeeded(){return this.fo}}return s})();function Fp(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var $p=(()=>{class s{constructor(t,e){this.h=t,this.oi=e}canTrack(){return this.h.isProjectActive()&&this.fy()&&this.Xu()&&this.gy()}canTrackInChild(){return this.h.isProjectActive()&&this.my()&&(this.Xu()||this.yy())}gy(){return this.h.cookielessTrackingEnabled?Fp():this.oi.areCookiesEnabled()}Xu(){return Mr(window.location.hostname,this.h.hostnames)}fy(){return!this.Ku()&&this.Ey()}my(){return!this.Ku()&&this.vy()}yy(){return window.location.protocol==="about:"&&window.location.hostname===""}Ku(){return"visibilityState"in document&&document.visibilityState==="prerender"}Ey(){return this.Qu()&&this.Sy()}vy(){return this.Qu()}Sy(){try{return!!window.localStorage}catch{return!1}}Qu(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),zp=(()=>{class s{constructor(t,e){this.cc=!1,this.Ju=new Map,this.Zu=new Map,this.td=new Map,this.sd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";var e;!function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));let t={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class s{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:s}=t;this.send(s,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(s,r){const a=r||{...this.queryParams},o=!("ct"in a),i="string"!=typeof s&&!this.isArrayBuffer(s);"ct"in a||(this.compressionOpts&&o?a.ct=this.compressionOpts.compressionType:a.ct=e.UNCOMPRESSED);const n=i?JSON.stringify(s):s,h=Object.keys(a).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(a[e])}\`)).join("&"),c=\`\${this.endpoint}?\${h}\`;!function(e,t){const s=e.length;for(let r=0;r<s;r++)if(t(e[r],r))return!0;return!1}(this.mandatoryParameters,(e=>null==a[e]))?this.compressionOpts&&o&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(c,a,e))):this.doSend(c,a,n):t.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${c}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,s){const r=new XMLHttpRequest,a=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");r.open("POST",e),r.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:r.responseText,status:r.status};this.onLoadCallback(e)}},r.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:a,metadata:t,events:s}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(r.timeout=this.timeout,r.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>r.abort(),Object.keys(this.headers).forEach((e=>{r.setRequestHeader(e,this.headers[e])})),r.send(s)}}class r{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class a{constructor(e){this.ramStorage={},this.byteSizeCounter=new r(e)}save({key:e,metadata:t,events:s}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:s}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const s=this.ramStorage[e];void 0!==s&&(delete s.metadata.datatype,t.push(s),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var o;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));class i{constructor(e,t,s){this.storageName=e,this.onOpenError=s,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new r(t),this.init()}async init(){await this.openCache(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}async save(e){try{if(this.cacheState===o.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(e);if(this.cacheState!==o.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:t,metadata:s,events:r}=e;if(this.byteSizeCounter.addString(t),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached())return;await this.cache.put(\`\${this.origin}/\${t}\`,new Response(r,{headers:s}))}catch{}}async recover(e){(this.cache||(await this.openCache(),this.cacheState===o.READY))&&this.doRecover(e)}async openCache(){try{this.cacheState=o.OPEN_IN_PROGRESS,this.cache=await self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=o.READY}catch{this.cacheState=o.OPEN_FAILED}}async doRecover(e){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const t=await this.cache.keys();if(0===t.length)return;const s=(await this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,s)=>{t[s]=e})),delete t["content-type"];const s=t.datatype;return delete t.datatype,"json"===s||"base64"===s?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),r=await Promise.all(s);await Promise.all(t.map((e=>this.cache.delete(e)))),e(r),this.byteSizeCounter.reset()}catch{}finally{this.recoveryInProgress--}}}class n{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new i(e,n.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new a(n.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}n.MAX_SIZE=16777216,function(){const e="CS_WORKER_SIGNATURE",t=new Map,r=new n("csPersisted");function a(a){var o;if((o=a)&&o.WORKER_SIGNATURE===e)switch(a.type){case"CreatePostRequest":{const{endpoint:o,compressionOutputType:i,useRetry:n,mandatoryParameters:h}=a,c={endpoint:o,mandatoryParameters:h,worker:!0};i&&(c.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(c.recoveryStorage=r);const d=new s(c);t.set(o,d),d.onLoad((t=>{const s={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)})),d.onError((t=>{const s={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)}))}break;case"SetQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.removeQueryParams(s)}break;case"Send":{const{endpoint:e,payload:s,queryParams:r}=a,o=t.get(e);o&&o.send(s,r)}break;case"Abort":{const{endpoint:e}=a,s=t.get(e);s&&s.abort()}break;case"SetHeader":{const{endpoint:e,headerName:s,headerValue:r}=a,o=t.get(e);o&&o.setRequestHeader(s,r)}break;case"SetTimeout":{const{endpoint:s,timeout:r}=a,o=t.get(s);o&&o.onTimeout((()=>{const t={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:e};self.postMessage(t)}),r)}break;default:throw new Error(JSON.stringify(a))}}self.addEventListener("message",(function(e){e.data.getReader?async function(e,t){const s=e.getReader();for(;;){const{done:e,value:r}=await s.read();if(e)break;t(r)}}(e.data,a):a(e.data)}))}()})();`;try{this.ds=this.wy(e||i),this.cc=!0,s.isTransferableStreamSupported()&&(this.nd=new ReadableStream({start:r=>{this.lc=r},cancel:()=>{this.lc=null}}),this.ds.postMessage(this.nd,[this.nd]))}catch(r){r.name==="SecurityError"&&rt.counters.cspErrors.count("network-worker"),this.cc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.sd,this.lc?this.lc.enqueue(t):this.ds.postMessage(t)}wy(t){let e=window.csURL||window.webkitURL,i=window.Blob,r=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);V.whiteListFilename(c);let l=new r(c);return l.onmessage=h=>{let{type:p,endpoint:u,WORKER_SIGNATURE:E}=h.data;if(E===this.sd){if(p==="onLoad"){let{response:y}=h.data,S=this.Ju.get(u);S&&S(y)}else if(p==="onError"){let{response:y}=h.data,S=this.Zu.get(u);S&&S(y)}else if(p==="onTimeout"){let y=this.td.get(u);y&&y()}}},l}registerOnLoadCallback(t,e){this.Ju.set(t,e)}registerOnErrorCallback(t,e){this.Zu.set(t,e)}registerOnTimeoutCallback(t,e){this.td.set(t,e)}isSupported(){return this.cc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),qp=(()=>{class s{constructor(t){var e;this.qt={},this.Gt=t.endpoint,this.Ee=t.networkWorker,this._y=t.compressionOutputType,this.by=t.useRetry,this.Ee.postMessage({type:"CreatePostRequest",endpoint:this.Gt,compressionOutputType:this._y,useRetry:this.by,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.Ee.postMessage({type:"SetQueryParams",endpoint:this.Gt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}getQueryParams(){return this.qt}removeQueryParams(t){this.Ee.postMessage({type:"RemoveQueryParams",endpoint:this.Gt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.qt[e]})}send(t,e){this.Ee.postMessage({type:"Send",endpoint:this.Gt,payload:t,queryParams:e})}abort(){this.Ee.postMessage({type:"Abort",endpoint:this.Gt})}onLoad(t){this.Ee.registerOnLoadCallback(this.Gt,t)}onError(t){this.Ee.registerOnErrorCallback(this.Gt,t)}setRequestHeader(t,e){this.Ee.postMessage({type:"SetHeader",endpoint:this.Gt,headerName:t,headerValue:e})}onTimeout(t,e){this.Ee.registerOnTimeoutCallback(this.Gt,t),this.Ee.postMessage({type:"SetTimeout",endpoint:this.Gt,timeout:e})}}return s})(),rn=(()=>{let s;return function(n){n.UNCOMPRESSED="0",n.GZIP="2"}(s||(s={})),s})(),yc=(()=>{class s{constructor(t){this.onError=t}}return s})(),Gp=(()=>{class s{constructor(t){var e;this.qt={},this.hc={},this.rd=i=>{for(let r of i){let{metadata:o,events:c}=r;this.send(c,o)}},this.Gt=t.endpoint,this.Hn=t.compressionOpts,this.Wt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.worker=!!t.worker,this.Wt&&this.Wt.recover(this.rd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.qt[e]}):this.qt={}}send(t,e){let i=e||{...this.qt},r=!("ct"in i),o=typeof t!="string"&&!this.Ay(t);"ct"in i||(!this.Hn||!r?i.ct=rn.UNCOMPRESSED:i.ct=this.Hn.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(p=>`${encodeURIComponent(p)}=${encodeURIComponent(i[p])}`).join("&"),h=`${this.Gt}?${l}`;if(tr(this.mandatoryParameters,p=>i[p]==null)){ut.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Hn&&r&&typeof c=="string"?this.Hn.compressor(c,this.Hn.compressionOutputType,p=>this.od(h,i,p)):this.od(h,i,c)}onLoad(t){this.Vi=t}onError(t){this.Bn=t}onTimeout(t,e){this.ai=t,this.Fn=e}abort(){this.ad&&this.ad()}setRequestHeader(t,e){this.hc[t]=e}getQueryParams(){return this.qt}Ay(t){return t&&t.byteLength!==void 0}od(t,e,i){let r=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");r.open("POST",t),r.onload=()=>{if(this.Wt&&this.Wt.recover(this.rd),this.Vi){let c={params:e,responseText:r.responseText,status:r.status};this.Vi(c)}},r.onerror=()=>{this.Wt&&this.Wt.save({key:o,metadata:e,events:i}),this.Bn&&this.Bn({params:e})},this.Fn&&this.ai&&(r.timeout=this.Fn,r.ontimeout=()=>{this.ai()}),this.ad=()=>r.abort(),Object.keys(this.hc).forEach(c=>{r.setRequestHeader(c,this.hc[c])}),r.send(i)}}return s})(),Ec=(()=>{class s{constructor(t){this.pc=t,this.Ee=new zp(this.pc)}create(t,e,i,r,o=[]){if(this.Ee.isSupported()&&e)return new qp({networkWorker:this.Ee,endpoint:t,compressionOutputType:i,useRetry:!!r,mandatoryParameters:o});{let c=i?{compressor:this.pc.compress,compressionOutputType:i,compressionType:this.pc.algorithm}:void 0;return new Gp({endpoint:t,compressionOpts:c,recoveryStorage:r})}}}return s})(),Wp=(()=>{class s{constructor(t,e,i,r,o){this.R=t,this.w=e,this.qe=i,this.wt=r,this.h=o}get(){return{exclusion:this.qe.getAppliedTrackingDraw(),visitor:this.R.getVisitor(),session:this.w.getSession(),cvars:this.wt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.qe.exclude(this.h),this.R.removeVisitor(),this.w.removeSession(),this.wt.removeCustomVariablesSession()}include(t){this.qe.removeExclusion(),this.R.setVisitor(t.visitor),t.session?this.w.setSession(t.session):this.w.removeSession(),t.cvars?this.wt.setCustomVariableSession(t.cvars):this.wt.removeCustomVariablesSession()}}return s})(),ne="_cs_id",Wo=".",Yp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Yo="x",Xp=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Yt.getItem(ne):t=this.M.get(ne),t?s.fromString(t):null}set(t){var e;let i=s.toString(t);if(this.h.cookielessTrackingEnabled)this.Yt.setItem(ne,i);else{let r=new csDate(t.expires);this.M.set(ne,i,r),(e=this.ci)===null||e===void 0||e.call(this,ne,i,r)}}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(ne):(this.M.delete(ne),(t=this.li)===null||t===void 0||t.call(this,ne))}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.h.allowSubdomains,this.h.allowSubdomains?this.M.delete(ne,nn.CURRENT_DOMAIN):this.M.delete(ne,this.M.getRootDomain()),this.set(t))}static fromString(t){let[e,i,r,o,c,l,h,p,u]=csString.prototype.split.call(t,Wo);return{id:e,creationTimestamp:Number(i),visitsCount:Number(r),hitTimestamp:Number(o),lastVisitTimestamp:Number(c),appliedTrackingDraw:Number(l),expires:Number(h),allowSubdomains:p===void 0?void 0:!!Number(p),identityPrint:u===void 0||u===Yo?null:u}}static toString(t){var e;return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires,t.allowSubdomains?1:0,(e=t.identityPrint)!==null&&e!==void 0?e:Yo],Wo)}static isValidVisitorString(t){return Yp.test(t)}}return s})(),M=(()=>{let s;return function(n){n.QUOTA_REACHED="X",n.RECORDING_RULES_TARGETING="8",n.ANALYTICS_ONLY_RULES_TARGETING="9",n.ANALYTICS_ONLY="0",n.RECORDING_GLOBAL_SAMPLING="5",n.RECORDING_TEMPORARILY="T",n.RECORDING_URL_SAMPLING="6",n.RECORDING_ETR_SAMPLING="7",n.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",n.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Rt=(()=>{let s;return function(n){n.ETR_OFF="0",n.ETR_ON="1"}(s||(s={})),s})(),Qe=(()=>{let s;return function(n){n.ETR_LEGACY="0",n.ETR_SESSION="1",n.ETR_PAGE="2"}(s||(s={})),s})(),kt=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),te="_cs_s",$i=18e5,Xo=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,ei=".",Kp=13,Di=(()=>{let s;return function(n){n[n.NOT_FOUND=0]="NOT_FOUND",n[n.EXPIRED=1]="EXPIRED",n[n.FOUND=2]="FOUND"}(s||(s={})),s})(),kn=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i,this.Xt=null,this.fc=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?s.fromString(e):null}getRawSession(t){if(t){let p=this.gc();return s.mc(p)}let{sessionString:e,status:i}=this.Ty(),r=s.mc(e);if(i!==Di.EXPIRED)return r;if(this.h.cookielessTrackingEnabled)return null;let o=this.gc();if(!o)return null;let c=csString.prototype.split.call(o,ei);if(!s.cd(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.Ry(h),r}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}set(t,e=$i){var i;let r=O.now()+e,o=this.toString(t);o+=`${ei}${r}`,this.Cy(o,r),this.h.cookielessTrackingEnabled?this.Yt.setItem(te,o):(this.M.set(te,o,e),(i=this.ci)===null||i===void 0||i.call(this,te,o,e))}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(te):(this.M.delete(te),(t=this.li)===null||t===void 0||t.call(this,te)),this.Iy()}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.h.allowSubdomains?this.M.delete(te,nn.CURRENT_DOMAIN):this.M.delete(te,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&s.isValidSessionString(t)}toString(t){return csArray.prototype.join.call([t.pageNumber,t.collectState,t.etrState,t.etrStatus],ei)}Cy(t,e){this.Xt={sessionString:t,expires:e}}Ty(){return this.Xt?this.Xt&&O.now()<=this.Xt.expires?{sessionString:this.Xt.sessionString,status:Di.FOUND}:{sessionString:this.Xt.sessionString,status:Di.EXPIRED}:{sessionString:this.gc(),status:Di.NOT_FOUND}}Iy(){this.Xt=null}Ry(t){this.Xt&&(this.Xt.expires=t,this.fc=!0)}isCacheRefreshed(){return this.fc}resetCacheRefreshed(){this.fc=!1}gc(){if(this.h.cookielessTrackingEnabled){let e=this.Yt.getItem(te);return!e||this.ld(e)?null:e}let t=this.M.get(te);return!t||this.ld(t)?null:t}ld(t){let e=csString.prototype.split.call(t,ei);if(!s.cd(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&O.now()>i}static cd(t){return t[t.length-1].length===Kp}static mc(t){var e;if(!t)return null;let i=(e=csString.prototype.match.call(t,Xo))===null||e===void 0?void 0:e[1];return i!=null?i:null}static fromRawString(t){let e=s.mc(t);return e!==null?s.fromString(e):null}static fromString(t){var e,i;let[r,o,c,l]=csString.prototype.split.call(t,ei);return{collectState:o,etrState:(e=c)!==null&&e!==void 0?e:Rt.ETR_OFF,etrStatus:(i=l)!==null&&i!==void 0?i:kt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(r,10)}}static isValidSessionString(t){return Xo.test(t)}}return s})();var ye="_cs_ex",Ko=2592e6,Qp=/^[0-9]+$/,Jp=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){return this.h.cookielessTrackingEnabled?Number(this.Yt.getItem(ye)):Number(this.M.get(ye))}set(t){var e;this.h.cookielessTrackingEnabled?this.Yt.setItem(ye,t):(this.M.set(ye,t,Ko),(e=this.ci)===null||e===void 0||e.call(this,ye,t,Ko))}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(ye):(this.M.delete(ye),(t=this.li)===null||t===void 0||t.call(this,ye))}static isValidExclusionString(t){return Qp.test(t)}}return s})(),Fe="_cs_cvars",Zp=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Yt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){return this.h.cookielessTrackingEnabled?this.Yt.getItem(Fe):this.M.get(Fe)}set(t){var e;this.h.cookielessTrackingEnabled?this.Yt.setItem(Fe,t):(this.M.set(Fe,t),(e=this.ci)===null||e===void 0||e.call(this,Fe,t))}remove(){var t;this.h.cookielessTrackingEnabled?this.Yt.removeItem(Fe):(this.M.delete(Fe),(t=this.li)===null||t===void 0||t.call(this,Fe))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var tf="spki",Qo="RSA-OAEP",ef="SHA-256",Jo="AES-CTR",sf="SHA-1",Zo=190,ds=(()=>{let s;return function(n){var t;let e=!1,i=null,r,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;n.crypto=(t=Ct.crypto)===null||t===void 0?void 0:t.subtle,n.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}n.isKeyImported=l;function h(){return i}n.getCryptoKey=h;function p(){var b,x;return((x=(b=Ct.self.crypto)===null||b===void 0?void 0:b.subtle)===null||x===void 0?void 0:x.encrypt)!=null&&Ct.self.CryptoKey!=null}n.isSupported=p;async function u(b){r=n.crypto.importKey(tf,lc(b),{name:Qo,hash:ef},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await r,r=void 0,i||ut.warn(`Fail to import public key '${b}'`)}n.importKey=u;async function E(b){if(!p()||e)return null;await r;let x=Nr(b);x.byteLength>Zo&&(x=x.slice(0,Zo));try{let B=await n.crypto.encrypt({name:Qo},i,x);return Lo(B)}catch{return null}}n.asymmetricEncrypt=E;async function y(b,x){if(!p()||e)return null;let B={counter:x.initializationVector,name:Jo,length:64},G=o.encode(b);try{let et=await n.crypto.encrypt(B,x.cryptoKey,G);return Lo(et)}catch{return null}}n.symmetricEncrypt=y;async function S(b){let x=await A(b);if(!x)throw new Error("Export secret failed");let B=await E(x);if(!B)throw new Error("Encrypt secret failed");return B}n.encryptSecret=S;async function A(b){var x;if(!p())return null;try{return(x=(await n.crypto.exportKey("jwk",b)).k)!==null&&x!==void 0?x:null}catch{return null}}async function C(){if(!p()||e)return null;try{return{cryptoKey:await n.crypto.generateKey({name:Jo,length:128},!0,["encrypt","decrypt"]),initializationVector:Ct.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}n.generateSymmetricKey=C;function R(b){c=b}n.setDigestSalt=R;async function _(b){b=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(b)),c&&(b=`${b}:${c}`);let x=o.encode(b);try{let B=await n.crypto.digest(sf,x);return ir(B)}catch{return null}}n.digest=_;function j(){return Ct.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}n.generateKeyPair=j}(s||(s={})),s})();function nf(){let s=new Error,n=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(n.length===0)return"";let t=of(n);return t===""||(n=af(n,t),n.length===0)?"":vc(n[0])}function rf(s){return csString.prototype.indexOf.call(s,"@")!==-1}function of(s){return s.length>0?vc(s[0]):""}function af(s,n){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,n)===-1)}function vc(s){let n="",t;rf(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(n=e[1]),n}var cf=s=>s;function lf(s,n,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,n,{get(){var r;if(this[i])return this[i];let o=(r=t.get)===null||r===void 0?void 0:r.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let p=c[l],u=Reflect.set(c,l,h);return e.forEach(E=>E(this,h,p,"subproperty")),u}}):this[i]=o,this[i])},set(){var r;let o=arguments,c=this[n],l=(r=t.set)===null||r===void 0?void 0:r.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){ut.error(h)}return l}})}function hf(s,n,t){let e=uf(s,n);if(!e)return null;let i=(r,o,c,l)=>t(r,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function uf(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,lf(s,n,i,e),e):(ut.warn(`Cannot intercept non configurable property '${csString(n)}' of object '${s}'`),null):(ut.warn(`Cannot intercept property '${csString(n)}' because it does not exist directly on the target object '${s}'`),null)}function df(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,n);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ut.warn(`Cannot intercept read only function '${csString(n)}' of object '${s}'`),null;let i=new Set;s[t]=i;let r=s[n];if(typeof r=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Bs(i),p=>p(c))}catch(p){ut.error(p)}let h=r.apply(this,c);try{for(let p=0;p<l.length;p++)l[p]({result:h,context:this,args:c})}catch(p){ut.error(p)}return h};ff(o,r),s[n]=o}return i}function ee({target:s,methodName:n,hook:t,hookPrepareArgs:e=cf,options:i}){let r=df(s,n);if(!r)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:nf()}:{};return p=>t({...p,...h,args:l})};return{activate:()=>{r.add(o)},deactivate:()=>{r.delete(o)}}}function pf(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Object.defineProperty(s,n,{set(){var r;let o=arguments,c=this[n],l=(r=i.set)===null||r===void 0?void 0:r.apply(this,o);try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){ut.error(h)}return l}}),e):(ut.warn(`Cannot intercept read only property '${csString(n)}' of object '${s}'`),null):e}function nr(s,n,t){let e=pf(s,n);if(!e)return null;let i=(r,o,c)=>t(r,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function ff(s,n){s.prototype=n.prototype,Object.defineProperty(s,"toString",{value:()=>n.toString()})}var Fs=(()=>{var s;class n{static My(e){this.Os.forEach(i=>{e(i,"initial")})}static $n(e){if(this.P||(this.P=new csMutationObserver(i=>{for(let r of i)r.target.isConnected&&X(r.addedNodes,this.ky),X(r.removedNodes,this.Dy)})),csArray.prototype.push.call(this.Se,e),!this.B){this.B=!0,this.P.observe(document,this.zn);for(let i of us.getAllShadowHosts(document)){let r=csElementshadowRoot.apply(i);this.Os.add(r),this.P.observe(r,this.zn)}this.wc||(this.wc=ee({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.pd(i.result)})),this.wc.activate()}this.My(e)}static qn(e){var i,r;this.Se=csArray.prototype.filter.call(this.Se,o=>o!==e),this.Se.length===0&&(this.Se=[],this.B=!1,(i=this.P)===null||i===void 0||i.disconnect(),(r=this.wc)===null||r===void 0||r.deactivate(),this.Os.clear())}constructor(e){this.S=e,this.S=Ze("DocumentShadowRootObserver:callback",(i,r)=>e(i,r))}get shadowRoots(){return Bs(s.Os)}takeRecords(){var e,i;return(i=(e=s.P)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){us.isSupported()&&s.$n(this.S)}disconnect(){us.isSupported()&&s.qn(this.S)}}return s=n,n.Se=[],n.Os=new Set,n.B=!1,n.zn={childList:!0,subtree:!0},n.pd=t=>{s.Os.has(t)||(s.P.observe(t,s.zn),s.Os.add(t),X(s.Se,e=>e(t,"added")))},n.ky=t=>{zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.pd)},n.Dy=t=>{t.isConnected||zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Os.has(e)&&(s.Os.delete(e),X(s.Se,i=>i(e,"removed")))})},ht([D()],n.prototype,"observe",null),ht([D()],n.prototype,"disconnect",null),n})(),Sc=!0;function It(s,n=Sc){s.boundElement.addEventListener(s.type,s.listener,n)}function Pt(s,n=Sc){s.boundElement.removeEventListener(s.type,s.listener,n)}function jt(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var ta=!1;function Tt(){return(s,n,t)=>{if(t){let e=t.value;t.value=function(i,r){(i==null?void 0:i.isTrusted)===!1&&ta||e.call(this,i,r)}}else{let e=s[n];if(typeof e!="function")return;s[n]=function(i,...r){(i==null?void 0:i.isTrusted)===!1&&ta||e.call(this,i,r)}}}}function on(s,n){typeof n=="number"&&(n={wait:n});let t=n.wait,e=n.mode||"leading",i,r=[],o=null,c=0,l,h=()=>{c=O.now(),o=null,l=s.apply(i,r),r=[],i=null},p=function(...u){if(i=this!==null&&this!==void 0?this:window,r=[...u],e==="trailing")return o||(o=window.csSetTimeout(h,t)),l;let E=O.now(),y=t-(E-c);return y<=0||y>t?(c=E,l=s.apply(i,r),o?(window.csClearTimeout(o),o=null):r=[]):o||(o=window.csSetTimeout(h,y)),l};return p.cancel=()=>{o&&(window.csClearTimeout(o),c=0,o=null,r=[])},p.flushPending=()=>{o&&(window.csClearTimeout(o),h())},p}var wi=s=>(n,t,e)=>{e.value=on(e.value,s)},U=(()=>{let s;return function(n){n[n.MUTATION_INSERT=1]="MUTATION_INSERT",n[n.MUTATION_REMOVE=2]="MUTATION_REMOVE",n[n.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",n[n.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",n[n.INITIAL_DOM=5]="INITIAL_DOM",n[n.SCROLL=6]="SCROLL",n[n.CLICK=8]="CLICK",n[n.RESIZE=9]="RESIZE",n[n.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",n[n.INPUT_SELECT=11]="INPUT_SELECT",n[n.INPUT_TEXT=12]="INPUT_TEXT",n[n.HASH_CHANGE=13]="HASH_CHANGE",n[n.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",n[n.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",n[n.MOUSE_OVER=16]="MOUSE_OVER",n[n.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",n[n.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",n[n.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",n[n.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",n[n.ATTACH_SHADOW=22]="ATTACH_SHADOW",n[n.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",n[n.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",n[n.PAGE_EVENT=27]="PAGE_EVENT",n[n.API_ERROR=28]="API_ERROR",n[n.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",n[n.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",n[n.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",n[n.KEY_DOWN=32]="KEY_DOWN",n[n.KEY_UP=33]="KEY_UP",n[n.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",n[n.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",n[n.USER_IDENTIFIER=38]="USER_IDENTIFIER",n[n.TOUCH_START=41]="TOUCH_START",n[n.TOUCH_MOVE=42]="TOUCH_MOVE",n[n.TOUCH_END=43]="TOUCH_END",n[n.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",n[n.POINTER_DOWN=47]="POINTER_DOWN",n[n.POINTER_MOVE=48]="POINTER_MOVE",n[n.POINTER_UP=49]="POINTER_UP",n[n.CUSTOM_ERROR=50]="CUSTOM_ERROR",n[n.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",n[n.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",n[n.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",n[n.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",n[n.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",n[n.SCREEN_RESIZE=65]="SCREEN_RESIZE",n[n.RESOURCE_HASHES=66]="RESOURCE_HASHES",n[n.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",n[n.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",n[n.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",n[n.TEXT_REF=73]="TEXT_REF",n[n.TOUCH_CANCEL=74]="TOUCH_CANCEL",n[n.MUTATION_MOVE=75]="MUTATION_MOVE",n[n.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",n[n.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",n[n.VIDEO_PLAY=78]="VIDEO_PLAY",n[n.VIDEO_PAUSE=79]="VIDEO_PAUSE",n[n.VIDEO_SEEK=80]="VIDEO_SEEK",n[n.DEBUG=999]="DEBUG"}(s||(s={})),s})();var si=(()=>{let s;return function(n){n[n.SWIPE=0]="SWIPE",n[n.PINCH_IN=1]="PINCH_IN",n[n.PINCH_OUT=2]="PINCH_OUT",n[n.LONG_PRESS=3]="LONG_PRESS",n[n.TAP=4]="TAP",n[n.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Y=(()=>{let s;return function(n){n[n.SPACE=0]="SPACE",n[n.ENTER=1]="ENTER",n[n.BACKSPACE=2]="BACKSPACE",n[n.DELETE=3]="DELETE",n[n.ARROWUP=4]="ARROWUP",n[n.ARROWDOWN=5]="ARROWDOWN",n[n.ARROWLEFT=6]="ARROWLEFT",n[n.ARROWRIGHT=7]="ARROWRIGHT",n[n.CAPSLOCK=8]="CAPSLOCK",n[n.SHIFT=9]="SHIFT",n[n.TAB=10]="TAB",n[n.ALPHANUMERICAL=11]="ALPHANUMERICAL",n[n.ESCAPE=12]="ESCAPE",n[n.END=13]="END",n[n.ALT=14]="ALT",n[n.CTRL=15]="CTRL",n[n.META=16]="META"}(s||(s={})),s})(),Cs=(()=>{let s;return function(n){n[n.COPY=0]="COPY",n[n.CUT=1]="CUT",n[n.PASTE=2]="PASTE"}(s||(s={})),s})();function gf(s){return s.nodeType===1}function St(s){let n=csEventtarget.apply(s);return n&&gf(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}function mf(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function yf(){return(s,n,t)=>{let e=t.value;return e&&(t.value=function(i){if(St(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}function Ef(s){if(!z(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var vf=!!window.chrome,ea="data-cs-scroll-container";function Sf(s){try{if(Ot(csEventtarget.apply(s)))return!0}catch{}return!1}var Is=(()=>{let s;return function(n){function t(i){return!!(Ot(i)&&Sf(i)&&Ei(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(ea)!==null)}n.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${ea}]`)}n.getScrollContainer=e}(s||(s={})),s})();function wf(){let s=csSymbol.for("propStore");return{getStore(n){return n[s]},get(n,t){let e=n[s];return e==null?void 0:e[t]},set(n,t,e){let i=n[s];i||(i={},n[s]=i),i[t]=e}}}var zi=wf(),W=(()=>{let s;return function(n){function t(l,h,p){var u;l instanceof Node?zi.set(l,h,p):((u=l.props)!==null&&u!==void 0||(l.props={}),l.props[h]=p)}n.setProperty=t;function e(l,h){var p;return l instanceof Node?zi.get(l,h):(p=l.props)===null||p===void 0?void 0:p[h]}n.getProperty=e;function i(l){return l instanceof Node?zi.getStore(l):l.props}n.getProperties=i;function r(l,h){let p=null;return o(l,(u,E,y)=>h(u)&&(p=u)&&!!y()),p}n.findDescendant=r;function o(l,h){c(l,void 0,h)}n.traverse=o;function c(l,h,p){let u=!1;if(p(l,h,()=>u=!0),u)return;let y=l.shadowRoot;y&&c(y,l,p);let S=l.children;if(S!=null&&S.length){for(let A of S)if(A&&(c(A,l,p),u))break}}}(s||(s={})),s})(),wc=1,ci=csSymbol("nodeIdentifier");function _f(s=!1){s&&(wc=1),ci=csSymbol("nodeIdentifier")}function bf(s){return W.getProperty(s,ci)}function it(s){let n=W.getProperty(s,ci);return n!=null?n:(W.setProperty(s,ci,wc++),W.getProperty(s,ci))}var Dn;function Ps(s){if(Dn||(Dn=document.createElement("div")),!(!!s&&z(s)))return ut.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Kt.call(Dn,s),!0}catch{return ut.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function rr(s,n){if(No)return No.call(s,n);let t=s;do{if(Kt.call(t,n))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var k=(()=>{let s;return function(n){let t;(function(R){R[R.NotMasked=0]="NotMasked",R[R.Parent=1]="Parent",R[R.Child=2]="Child"})(t=n.MaskedElementState||(n.MaskedElementState={})),n.maskedProp="masked",n.maskedAttributeProp="maskedAttribute";function e(R){return Yt(R)&&"Attributes"in R&&"PIISelectors"in R?R.Attributes instanceof Array&&R.PIISelectors instanceof Array:!1}n.isSelectorUserInput=e;function i(R){if(!Yt(R)||R===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in R||(R.Attributes=[]),"PIISelectors"in R||(R.PIISelectors=[]),R}n.sanitizeSelectorUserInput=i;function r(R){var _;return(_=W.getProperty(R,n.maskedProp))!==null&&_!==void 0?_:{state:t.NotMasked}}n.getMaskedElementDetails=r;function o(R){var _;return(_=W.getProperty(R,n.maskedAttributeProp))!==null&&_!==void 0?_:{attributes:[]}}n.getMaskedAttributeDetails=o;function c(R){let _=W.getProperty(R,n.maskedProp);return(_==null?void 0:_.state)===t.Parent}n.isMaskedElement=c;function l(R){let _=W.getProperty(R,n.maskedProp);return(_==null?void 0:_.state)===t.Child}n.isMaskedElementChild=l;function h(R,_){let j=W.getProperty(R,n.maskedAttributeProp);return((j==null?void 0:j.attributes)==null?void 0:csArray.prototype.indexOf.call(j==null?void 0:j.attributes,_))>-1}n.isMaskedAttribute=h;function p(R,_){W.setProperty(R,n.maskedProp,_)}n.setMaskedElementProperty=p;function u(R){W.setProperty(R,n.maskedProp,void 0)}n.unsetMaskedElementProperty=u;function E(R,_){W.setProperty(R,n.maskedAttributeProp,_)}n.setMaskedAttributeProperty=E;function y(R,_){let j=csArray.prototype.filter.call(R.PIISelectors,B=>Ps(B));_.elementSelector.length>0&&csArray.prototype.push.call(j,...csString.prototype.split.call(_.elementSelector,","));let b=C([...j]),x={elementSelector:csArray.prototype.join.call(b,","),attrSelector:_.attrSelector,attrSelectors:_.attrSelectors};return csArray.prototype.forEach.call(R.Attributes,B=>{B!=null&&B.attrName&&(B!=null&&B.selector)&&Ps(B.selector)&&!S(x.attrSelectors,B)&&csArray.prototype.push.call(x.attrSelectors,B)}),x.attrSelector=A(x.attrSelectors),x}n.getComputedSelectorSettings=y;function S(R,_){return csArray.prototype.some.call(R,j=>j.selector===_.selector&&j.attrName===_.attrName)}function A(R){let _="";return csArray.prototype.forEach.call(R,j=>{let b=csString.prototype.split.call(j.selector,",");csArray.prototype.forEach.call(b,x=>{Ps(x)&&(_&&(_+=","),_+=x)})}),_}function C(R){if(R.length<=1)return R;let _=[];for(let j of R){let b=csString.prototype.split.call(j,",");for(let x of b)csArray.prototype.indexOf.call(_,x)===-1&&csArray.prototype.push.call(_,x)}return _}}(s||(s={})),s})(),Af=33,_c=(()=>{class s{constructor(){this.eventType="user",this.gd=[],this.xy=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.Ly=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.go=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this._c=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Ef(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this._c,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ie=new Fs((e,i)=>{switch(i){case"initial":case"added":this.hi(e);break;case"removed":this.pi(e);break}})}init(){this.Uy(),this.Vy(),this.bc()}onEvent(t){csArray.prototype.push.call(this.gd,t)}Kt(t,e=!1){csArray.prototype.forEach.call(this.gd,i=>i(t,e))}start(){this.Ac(),this.hi(document),this.ie.observe()}stop(){this.pi(document),this.ie.disconnect()}Vy(){this.jy()&&csArray.prototype.push.call(this.go,...this.xy)}Uy(){this.Hy()&&csArray.prototype.push.call(this.go,...this.Ly)}hi(t){Yi(t)?csArray.prototype.forEach.call(this.go,e=>It(e)):csArray.prototype.forEach.call(this._c,e=>{let i={type:e.type,listener:e.listener,boundElement:t};It(i)})}pi(t){Yi(t)?csArray.prototype.forEach.call(this.go,e=>Pt(e)):csArray.prototype.forEach.call(this._c,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Pt(i)})}jy(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}Hy(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}Ac(){this.By()}By(){let t=Is.getScrollContainer()||document,e=it(t),i=this.md(t);if(i.top!==0||i.left!==0){let r={type:U.SCROLL,args:[e,i.left,i.top],date:O.now()};this.Kt(r,!0)}}md(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(k.isMaskedElement(t)||k.isMaskedElementChild(t))return;let e=it(t),i=this.md(t),r={type:U.SCROLL,args:[e,i.left,i.top],date:O.now()};this.Kt(r)}mouseOverListener(t){if(k.isMaskedElementChild(t.target))return;let e=it(t.target),i={type:U.MOUSE_OVER,args:[e],date:O.now()};this.Kt(i)}clickListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r={type:U.CLICK,args:[i],date:O.now()};this.Kt(r)}keyUpListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r=this.D[t.key];if(r===void 0)return;let o={type:U.KEY_UP,args:[i,r],date:O.now()};this.Kt(o)}keyDownListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r=this.D[t.key];if(r===void 0)return;let o={type:U.KEY_DOWN,args:[i,r],date:O.now()};this.Kt(o)}copyListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r={type:U.CLIPBOARD_COMMAND,args:[i,Cs.COPY],date:O.now()};this.Kt(r)}cutListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r={type:U.CLIPBOARD_COMMAND,args:[i,Cs.CUT],date:O.now()};this.Kt(r)}pasteListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r={type:U.CLIPBOARD_COMMAND,args:[i,Cs.PASTE],date:O.now()};this.Kt(r)}pointerUpListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r={type:U.POINTER_UP,args:[t.pointerId,t.pointerType,jt(t.clientX,1),jt(t.clientY,1),i,t.button],date:O.now()};this.Kt(r)}pointerMoveListener(t){let e={type:U.POINTER_MOVE,args:[t.pointerId,t.pointerType,jt(t.clientX,1),jt(t.clientY,1)],date:O.now()};this.Kt(e)}pointerDownListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=it(e),r={type:U.POINTER_DOWN,args:[t.pointerId,t.pointerType,jt(t.clientX,1),jt(t.clientY,1),i,t.button,{pageX:jt(t.pageX,1),pageY:jt(t.pageY,1)}],date:O.now()};this.Kt(r)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:U.TOUCH_START,args:[r.identifier,jt(r.clientX,1),jt(r.clientY,1)],date:O.now()};this.Kt(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:U.TOUCH_MOVE,args:[r.identifier,jt(r.clientX,1),jt(r.clientY,1)],date:O.now()};this.Kt(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:t.type==="touchend"?U.TOUCH_END:U.TOUCH_CANCEL,args:[r.identifier,jt(r.clientX,1),jt(r.clientY,1)],date:O.now()};this.Kt(o)}}bc(){this.D={},this.D[" "]=Y.SPACE,this.D.Spacebar=Y.SPACE,this.D.Backspace=Y.BACKSPACE,this.D.Enter=Y.ENTER,this.D.Delete=Y.DELETE,this.D.ArrowUp=Y.ARROWUP,this.D.ArrowDown=Y.ARROWDOWN,this.D.ArrowLeft=Y.ARROWLEFT,this.D.ArrowRight=Y.ARROWRIGHT,this.D.Up=Y.ARROWUP,this.D.Down=Y.ARROWDOWN,this.D.Left=Y.ARROWLEFT,this.D.Right=Y.ARROWRIGHT,this.D.CapsLock=Y.CAPSLOCK,this.D.Shift=Y.SHIFT,this.D.Tab=Y.TAB,this.D.Escape=Y.ESCAPE,this.D.Esc=Y.ESCAPE,this.D.End=Y.END,this.D.Alt=Y.ALT,this.D.Control=Y.CTRL,this.D.Meta=Y.META}}return H([Lt("RecordingPageEvents.start")],s.prototype,"start",null),H([D("scroll")],s.prototype,"scrollListener",null),H([D("mouseOver"),Tt(),yf()],s.prototype,"mouseOverListener",null),H([D("click"),Tt()],s.prototype,"clickListener",null),H([D("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([D("Event handler type: keydown")],s.prototype,"keyDownListener",null),H([D("Event handler type: copy")],s.prototype,"copyListener",null),H([D("Event handler type: cut")],s.prototype,"cutListener",null),H([D("Event handler type: paste")],s.prototype,"pasteListener",null),H([D("Event handler type: pointerup"),Tt()],s.prototype,"pointerUpListener",null),H([D("Event handler type: pointermove"),Tt(),wi({wait:Af})],s.prototype,"pointerMoveListener",null),H([D("Event handler type: pointerdown"),Tt()],s.prototype,"pointerDownListener",null),H([D("Event handler type: touchstart"),Tt()],s.prototype,"touchStartListener",null),H([D("Event handler type: touchmove"),Tt()],s.prototype,"touchMoveListener",null),H([D("Event handler type: touchend-cancel"),Tt()],s.prototype,"touchEndCancelListener",null),s})(),Tf=2,Dr=(()=>{class s{constructor(t){this.Fy=t,this.mo=0}addString(t){this.mo+=t.length*Tf}addArrayBuffer(t){this.mo+=t.byteLength}isThresholdReached(){return this.mo>this.Fy}reset(){this.mo=0}}return s})(),Rf=2*1e3*1024,Cf=200,If=(()=>{class s{constructor(t=[],e=Rf){this.Nt=t,this.Tc=new Dr(e)}addEvent(t){this.Tc.addString(ks(t)),csArray.prototype.push.call(this.Nt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Nt.length&&!(this.Nt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Nt,e,0,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Tc.reset(),this.Nt=[]}isFull(){return this.eventsCount()>=Cf}isThresholdReached(){return this.Tc.isThresholdReached()}getEvents(){return this.Nt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Nt,r=>{csArray.prototype.indexOf.call(t,r.type)!==-1?csArray.prototype.push.call(e,r):csArray.prototype.push.call(i,r)}),this.Nt=i,e}stringifyEvents(){return ks(this.Nt)}lC(t){t.type===U.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return H([Lt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),Pf=(()=>{class s{constructor(){this.yo=1}getCurrentIndex(){return this.yo}increment(){this.yo+=1}reset(){this.yo=1}getRequestParameters(){return{ri:`${this.yo}`}}}return s})(),xr=(()=>{class s{emit(t,e,i,r=document){let c=`${i!==void 0?`${i}`:`${s.$y}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&r.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.zy();if(i===null)return null;let{bubbles:r=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,r,o,c),i}static zy(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.$y="cs.tracking.",s})(),lt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),qi="null",Ye=null,bc=[],Of=()=>{var s;return yi||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!yi&&Of()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Ye=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{or({type:"UXA_EVENT",event:s.detail})}),Ye.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===qi)return;qi=s.data.sessionId,csArray.prototype.forEach.call(bc,n=>n()),Ye==null||Ye.postMessage({type:"CONNECTED",sessionId:qi})}}));function Nf(s){yi||(qi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(bc,s)))}function or(s){Ye==null||Ye.postMessage(s)}var an=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),as=(()=>{class s extends an{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var sa=(()=>{class s extends an{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),xn=(()=>{class s extends an{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Total: {total}ms"),this.total=0,this.count=0}get average(){return this.count?this.total/this.count:0}measure(t){let e=O.elapsed();t(),this.count++,this.total+=O.elapsed()-e}asyncMeasure(){let t=O.elapsed();return()=>{this.count++,this.total+=O.elapsed()-t}}getData(){return{total:this.total,count:this.count,average:this.average}}}return s})(),he={general:{category:"General",nbEvents:new as("Nb of Events"),pendingTasks:new as("Pending Tasks"),pendingEvents:new as("Pending Tasks"),nbOfMutationObservers:new sa("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new xn("Initial DOM"),pendingMutations:new as("Nb of Mutations scheduled"),serializedMutations:new xn("Serialized Mutations"),count:new as("Mutation Count"),elementMutationObserved:new sa("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new xn("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new as("Nb of Hidden Elements "),nbElements:new as("Nb of  Elements")}},ia=null;Nf(()=>{let s=i=>Object.keys(i),n=csArray.prototype.map.call(s(he),i=>he[i]),t=csArray.prototype.map.call(n,i=>csArray.prototype.filter.call(csArray.prototype.map.call(s(i),r=>i[r]),r=>r instanceof an));or({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(n,(i,r)=>({category:i.category,performanceCounters:csArray.prototype.map.call(t[r],o=>({name:o.name,format:o.format}))}))}),!ia&&(ia=csSetInterval(()=>{let i=rc(de(t,r=>de(r,o=>o.getData())),r=>r);or({type:"UXA_PERFORMANCE_COUNTER",event:i})},1e3))});function Ce(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function $t(s){return Re(s,"data:")}function Ac(s){return Re(s,"#")}function ar(s){return!!s&&Si(s,".css")}var na=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function Mf(s){na.lastIndex=0;let n,t=0,e=[];for(;(n=na.exec(s))!==null;){let i=n.index,r=n.index+n[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,r);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=r}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}function Lr(s){let n=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=kf(n);return e?(Si(t,",")||(e=Df(e)),[ra(t),...Lr(e)]):[ra(t)]}function kf(s){return csString.prototype.split.call(s,/\s(.+)/)}function ra(s){return csString.prototype.split.call(s,/,$/)[0]}function Df(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var xf=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Lf(s,n){return csString.prototype.replace.call(s,xf,(...e)=>{let i=e[3]||e[4],r=e[9]||e[10]||e[11],o=Vf((i||r).trim()),c=i?"@import ":"",l=n(o)||o;return`${c}url(${Uf(l)})`})}function Uf(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function li(s){let n=new Set;return Lf(s,t=>{var e,i;return n.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Bs(n)}function Vf(s){let n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,n,(t,e,i,r)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(r)return r;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var oa=new Map,Ln=!yi&&document.implementation.createHTMLDocument("");function jf(s){if(!_r(s))return null;let n=Tc(s);if(n===null||n.length===0)return null;let t="";if(fd(s.textContent))X(n,e=>t+=e.cssText);else{let e=Hf(s);if(e===n.length||e>n.length)return null;let i=new csArray(n.length-e);for(let r=e,o=0;r<n.length;r+=1,o+=1)i[o]=n[r];X(i,r=>t+=r.cssText)}return t}function Hf(s){if(!Ln)return 0;let n=oa.get(s.textContent);if(n)return n;let t=s.cloneNode(!0);t.textContent=s.textContent,Ln.head.appendChild(t);let e=Tc(t);return n=e?e.length:0,oa.set(s.textContent,n),Ln.head.removeChild(t),n}function Tc(s){try{if(s.disabled)return null;let n=s.sheet;return n?n.cssRules||n.rules:null}catch(n){if(n.name!=="SecurityError"&&n.name!=="InvalidAccessError")throw n;return null}}var ni=s=>s instanceof HTMLFormElement?"form":s.localName;var ms=(()=>{class s{constructor(t){this.csId=it(t),this.props=zi.getStore(t)}}return s})(),Rc=(()=>{class s extends ms{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Os=(()=>{class s extends ms{constructor(t){var e;super(t),this.attributes=[],this.nodeType=1,this.localName=ni(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let i=jf(t);if(i){this.children=new csArray(csNodechildNodes.apply(t).length);let r=document.createTextNode(i),o=new Rc(r);csArray.prototype.push.call(this.children,o)}js(t)&&W.setProperty(this,"SVG",!0)}static isElement(t){return t.nodeType===1}static getAttribute(t,e){return we(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Ur=(()=>{class s{constructor(t){this.type="asyncEvent",this.Rc=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Rc)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Ns=t,this.Rc=!0,this.S&&this.S(this.Ns)}complete(t){this.Rc&&t(this.Ns),this.S=t}wait(){return new Promise(t=>this.complete(t))}}return s})();function Bf(s,n){let t=!1,e=function(){if(!t)return s.apply(n,arguments)};return e.cancel=()=>t=!0,e}var cr=csQueueMicrotask||csSetTimeout,xi=new Hs,ii=new Hs,aa=1;function Wt(s,n="high"){let t=aa;xi.isEmpty&&ii.isEmpty&&Cc(()=>{if(aa!==t)return;let r=fs(()=>{for(;!ii.isEmpty;)ii.pop()();for(;!xi.isEmpty;)xi.pop()();ii.isEmpty||r()},"groupMicrotask.run");r()});let e=s.name||s.toString(),i=Ze(`groupMicrotask:${n}:${e}`,s);n==="high"?ii.push(i):xi.push(i)}function Cc(s,n=10){cr(n===0?s:()=>Cc(s,n-1))}async function Ic(s=1){for(let n=0;n<s;n++)await new Promise(t=>Wt(t))}function cn(){let s=new Set;return{add(n){s.add(n),s.size===1&&csSetTimeout(()=>{s.clear()})},has(n){return s.has(n)},del(n){s.delete(n)},clear(){s.clear()},values(){return Bs(s)},get count(){return s.size}}}function ln(s,n=!1){let t=cn();return{push(e){t.count===0&&(n?Wt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var hs=csSymbol(),Vr=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,p,u,E,y,S;this.S=t,this.Cc=null,this.Ic=null,this.Pc=null,this.Oc=null,this.qy=ln(A=>this.processUpdateRulesInATick(A)),this.Nc=null,this.Mc=null,this.kc=null,this.S=A=>Wt(()=>t(A)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Cc=ee({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:A,args:C})=>{this.processInsertRule(A,C)}})),typeof((o=(r=window.CSSStyleSheet)===null||r===void 0?void 0:r.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Ic=ee({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:A,args:C})=>{this.processDeleteRule(A,C)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Pc=ee({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:A})=>this.processUpdateRule(A)})),typeof((p=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||p===void 0?void 0:p.deleteRule)=="function"&&(this.Oc=ee({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:A})=>this.processUpdateRule(A)})),typeof((E=(u=window.CSSStyleDeclaration)===null||u===void 0?void 0:u.prototype)===null||E===void 0?void 0:E.setProperty)=="function"&&(this.Nc=ee({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:A})=>{let C=A.parentRule;C instanceof CSSStyleRule&&this.processUpdateRule(C)}})),typeof((S=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||S===void 0?void 0:S.removeProperty)=="function"&&(this.Mc=ee({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:A})=>{let C=A.parentRule;C instanceof CSSStyleRule&&this.processUpdateRule(C)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.kc=hf(window.CSSStyleRule.prototype,"style",A=>{this.processUpdateRule(A)}))}observe(){var t,e,i,r,o,c,l;(t=this.Cc)===null||t===void 0||t.activate(),(e=this.Ic)===null||e===void 0||e.activate(),(i=this.Pc)===null||i===void 0||i.activate(),(r=this.Oc)===null||r===void 0||r.activate(),(o=this.Nc)===null||o===void 0||o.activate(),(c=this.Mc)===null||c===void 0||c.activate(),(l=this.kc)===null||l===void 0||l.activate()}disconnect(){var t,e,i,r,o,c,l;(t=this.Cc)===null||t===void 0||t.deactivate(),(e=this.Ic)===null||e===void 0||e.deactivate(),(i=this.Pc)===null||i===void 0||i.deactivate(),(r=this.Oc)===null||r===void 0||r.deactivate(),(o=this.Nc)===null||o===void 0||o.deactivate(),(c=this.Mc)===null||c===void 0||c.deactivate(),(l=this.kc)===null||l===void 0||l.deactivate()}processInsertRule(t,[e,i]){if(t[hs]==null&&!t.ownerNode)return;let r={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.S(r)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.qy.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,r=csArray.prototype.indexOf.call(Ms(i.cssRules),e);if(r===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:r};this.S(o)}}processDeleteRule(t,[e]){if(t[hs]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.S(i)}}return ht([D()],s.prototype,"observe",null),ht([D()],s.prototype,"disconnect",null),ht([D()],s.prototype,"processInsertRule",null),ht([D()],s.prototype,"processUpdateRule",null),ht([D()],s.prototype,"processUpdateRulesInATick",null),ht([D()],s.prototype,"processDeleteRule",null),s})(),Ff=(()=>{class s{constructor(t){this.Gy=1,this.Eo=new Set,this.Dc=null,this.xc=null,this.Lc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Wy=e=>{let i=e.sheet;if(this.Eo.has(i)){if(e.type==="cssRuleInserted"){let r={type:"adoptedStyleSheetRuleInserted",sheetId:i[hs],rule:e.rule,index:e.index};this.S(r)}else if(e.type==="cssRuleDeleted"){let r={type:"adoptedStyleSheetRuleDeleted",sheetId:i[hs],index:e.index};this.S(r)}else if(e.type==="cssRuleUpdated"){let r={type:"adoptedStyleSheetRuleUpdated",sheetId:i[hs],rule:e.rule,index:e.index};this.S(r)}}},this.S=e=>Wt(async()=>{await Ic(2),t(e)}),this.ie=new Fs(this.Lc),"adoptedStyleSheets"in Document.prototype&&(this.Dc=nr(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.xc=nr(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.yd=new Vr(this.Wy)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ie.observe(),(t=this.Dc)===null||t===void 0||t.activate(),(e=this.xc)===null||e===void 0||e.activate(),this.yd.observe()}disconnect(){var t,e;this.Eo.clear(),this.ie.disconnect(),(t=this.Dc)===null||t===void 0||t.deactivate(),(e=this.xc)===null||e===void 0||e.deactivate(),this.yd.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Yy(e);let i=de(e,o=>o[hs]),r={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.S(r)}Yy(t){X(t,e=>{if(this.Eo.has(e))return;let i=this.Gy++;e[hs]=i,this.Eo.add(e);let r=this.Xy(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:r};this.S(o)})}Xy(t){let e=[];try{e=de(t.cssRules,i=>i.cssText)}catch{}return e}}return ht([D()],s.prototype,"observe",null),ht([D()],s.prototype,"disconnect",null),ht([D()],s.prototype,"setStyleSheets",null),s})(),$f=fs(Wf,"optimizeMutations"),zf=csSymbol.for("ignoreNextSerialization");function qf(){let s=new Set,n=new Set,t=new Set,e=new Set,i=new Map,r=new Map,o=new Map,c=new Set,l=new Set,h=new Map,p=new Set;return{isMovedNode(u){return s.has(u)},markAsMovedNode(u){p.delete(u),s.add(u)},isDetachedMove(u){return!!yt.findAncestor(u,E=>p.has(E),!0)},isAddedNode(u){let E=yt.findAncestor(u,y=>n.has(y)||l.has(y)||s.has(y),!0);return!!E&&!s.has(E)},isMovedNodeIntoAddedNode(u){return s.has(u)&&!!yt.findAncestor(u,E=>n.has(E)||l.has(E),!0)},markAsAddedNode(u){p.delete(u),l.delete(u),n.add(u)},markAsPendingInsert(u){l.add(u)},isPendingInsert(u){return l.has(u)},isRemovedNode(u){return!!yt.findAncestor(u,E=>t.has(E),!0)},markAsRemovedNode(u){t.add(u)},isUselessNode(u){return e.has(u)},markAsUselessNode(u){e.add(u)},getPlaceholder(u,E){let y=E==="previous"?r:i;return u&&y.has(u)?y.get(u)||null:u},getSiblings(u){let E=u.addedNodes.length,y=this.getPlaceholder(u.previousSibling,"previous"),S=this.getPlaceholder(u.nextSibling,"next");if(E){let A=y,C=S,R=u.previousSibling!==y,_=u.nextSibling!==S;for(let j=0;j<E;j++){let b=u.addedNodes[j],x=u.addedNodes[E-j-1];this.isLatestNodeMutation(b,u)?(r.delete(b),u.previousSibling&&R&&(i.set(u.previousSibling,b),R=!1),A=b):r.set(b,A),this.isLatestNodeMutation(x,u)?(i.delete(x),u.nextSibling&&_&&(r.set(u.nextSibling,x),_=!1),C=x):i.set(x,C)}}else u.previousSibling&&u.previousSibling!==y&&i.set(u.previousSibling,S),u.nextSibling&&u.nextSibling!==S&&r.set(u.nextSibling,y);return{previousSibling:y,nextSibling:S}},setAttributeMutation(u,E){let y=o.get(u)||new Set;y.add(E),o.set(u,y)},isAttributeMutated(u,E){var y;return!!(!((y=o.get(u))===null||y===void 0)&&y.has(E))},setLatestNodeMutation(u,E){h.set(u,E)},isLatestNodeMutation(u,E){return h.get(u)===E},markAsFutureAddedNode(u){h.has(u)||p.add(u)},isTextMutated(u){return c.has(u)},setTextMutated(u){return c.add(u)}}}function Gf(s,n){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];n.markAsFutureAddedNode(e),n.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];n.setLatestNodeMutation(e,s)}}function Wf(s){let n=qf(),t=[];for(let e of s)e.type==="childList"&&Gf(e,n);for(let e of s)switch(e.type){case"attributes":Xf(e,n,t);break;case"characterData":Yf(e,n,t);break;case"childList":Jf(e,n,t);break}return t}function Yf(s,n,t=[]){let e=s.target;return yt.isConnected(e)&&!n.isTextMutated(e)&&!n.isAddedNode(e)&&!Qf(e,"characterData")&&(n.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Xf(s,n,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return yt.isConnected(e)&&!n.isAttributeMutated(e,i)&&!n.isAddedNode(e)&&(n.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Kf=30;function Qf(s,n,t){let e=csSymbol.for(t?`${n}:${t}`:n),i=O.now(),r=s[e];return r&&i<r?!0:(s[e]=i+Kf,!1)}function Jf(s,n,t=[]){let e=yt.isConnected(s.target),i=!e&&n.isRemovedNode(s.target),r=e&&n.isAddedNode(s.target),o=n.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,p=()=>{if(h){let{childListType:y,movedNodes:S,...A}=h;csArray.prototype.push.call(t,y==="added"?A:{...A,movedNodes:S}),h=null}},u=y=>y===(h==null?void 0:h.childListType)?h:(p(),{childListType:y,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let y=0;y<s.addedNodes.length;y++){let S=s.addedNodes[y];n.isLatestNodeMutation(S,s)?(n.isMovedNode(S)?(h=u("moved"),csArray.prototype.push.call(h.movedNodes,S)):(n.markAsAddedNode(S),r||(h=u("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):yt.isConnected(S)?n.isMovedNode(S)||n.markAsPendingInsert(S):n.markAsUselessNode(S)}p()}let E=Ir(s.removedNodes,y=>{if(yt.isConnected(y)){if(!i&&!n.isPendingInsert(y)){if(n.isDetachedMove(y))return!0;n.markAsMovedNode(y),n.isMovedNodeIntoAddedNode(y)&&(y[zf]=!0)}return!1}return n.isUselessNode(y)?!1:(n.markAsRemovedNode(y),!0)});return E.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:E,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var ca={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Ie=(()=>{var s;class n{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Uc(e){if(s.shadowRootFilters.length>0&&Ns(e))for(let i=0;i<s.shadowRootFilters.length;i++){let r=s.shadowRootFilters[i];if(r(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,ca)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Wt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(r=>{this.mutationObserver.observe(r,ca)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(us.getAllShadowHosts(document),r=>i(csElementshadowRoot.apply(r),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Uc(document),this.shadowRootObserver=new Fs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,X(this.shadowRootObserver.shadowRoots,r=>{this.Uc(r)}))}static disconnect(e,i){var r,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(r=this.shadowRootObserver)===null||r===void 0||r.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.S=e,this.Ed=i;let r=ln(o=>e(o,this),!0);this.S=Ze("DocumentMutationObserver:callback",o=>{X(o,c=>r.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),r=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&r.length?Jd(i,r):i!=null?i:r}observe(){s.observe(this.S,this.Ed)}disconnect(){s.disconnect(this.S,this.Ed)}}return s=n,n.callbacks=[],n.shadowRootCallbacks=[],n.started=!1,n.observedTargets=new Set,n.shadowRootFilters=[],n.mutationCallback=t=>{he.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},n.onShadowRoot=(t,e)=>{X(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Uc(t):s.disconnectShadowRoot(t)},n.isRefreshing=!1,ht([D()],n.prototype,"observe",null),ht([D()],n.prototype,"disconnect",null),n})(),Zf=(()=>{class s{constructor(t){this.S=t,this.Ky=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.S({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"&&this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}))},this.S=e=>Wt(()=>t(e)),this.vd=new Vr(e=>Wt(async()=>{await Ic(),this.Ky(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Sd=new Ff(t))}observe(){var t;this.P=new Ie(e=>this.Qy(e),(e,i)=>{i==="added"&&this.Jy(e)}),this.P.observe(),this.vd.observe(),(t=this.Sd)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.P)===null||t===void 0||t.disconnect(),this.vd.disconnect(),(e=this.Sd)===null||e===void 0||e.disconnect()}Qy(t){let e=$f(t);for(let i=0;i<e.length;i++){let r=e[i];if(!r){ut.error("processRawMutations: empty record");continue}switch(r.type){case"attributes":this.processAttributeChanged(r);break;case"characterData":this.processCharacterDataChanged(r);break;case"childList":this.processChildListChanged(r);break;default:ut.error(`processRawMutations: unknown record type '${r.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:yt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.S(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.S(e)}processChildListChanged(t){var e,i,r;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.S(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Ms(t.addedNodes)};this.S(o)}if(!((r=t.removedNodes)===null||r===void 0)&&r.length){let o={type:"nodesRemoved",target:t.target,nodes:de(t.removedNodes,c=>c)};this.S(o)}}Jy(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.S(e)}}return ht([D()],s.prototype,"processAttributeChanged",null),ht([D()],s.prototype,"processCharacterDataChanged",null),ht([D()],s.prototype,"processChildListChanged",null),s})(),tg=(()=>{class s extends ms{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),eg=(()=>{class s extends ms{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),sg=(()=>{class s extends ms{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),ig=(()=>{class s extends ms{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),ng=(()=>{class s extends ms{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),rg=(()=>{class s{constructor(t,e,i){var r;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(r=t.namespaceURI)!==null&&r!==void 0?r:"")}static create(t){var e,i;let r=t.attributes,o=new csArray(r.length);for(let c=0;c<o.length;c++){let l=r[c];o[c]=new s(l.name,l.value,l.namespaceURI),l.name==="href"&&Xa(t)&&(o[c].value=(i=(e=t.sheet)===null||e===void 0?void 0:e.href)!==null&&i!==void 0?i:l.value)}return o}}return s})(),la={workTime:40,async:!0,initialDOM:!0};var hi=csSymbol("InitialDom"),ha=csSymbol.for("ignoreNextSerialization");function Pc(s){return s[ha]?(delete s[ha],!0):!1}function Oc(s=la){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=la.workTime);let r=Ze("serialize:callback",E=>e(E)),o=new Hs,c=(E,y)=>{E.hasChildNodes()&&o.push({node:E,serializedNode:y});let S=E instanceof Element&&csElementshadowRoot.apply(E);if(S){let A=y.shadowRoot=ui(S);s.async&&s.initialDOM&&W.setProperty(S,hi,!0),c(S,A)}},l,h=!0,p=8,u=Ze("work",()=>{var E;if(h)l=ui(t),s.async&&s.initialDOM&&W.setProperty(t,hi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let y=cg(100);for(;!o.isEmpty;){if(s.async&&y.elapsed()>=s.workTime){--p<=0&&csSetTimeout(u);return}let{node:S,serializedNode:A}=o.pop(),C=(E=A.children)!==null&&E!==void 0?E:[];if(sn(S))continue;let R=0;for(let _=csNodefirstChild.apply(S);_;_=csNodenextSibling.apply(_)){if(Pc(_))continue;let j=ui(_);s.async&&s.initialDOM&&W.setProperty(_,hi,!0),C[R++]=j,c(_,j)}}s.async?csSetTimeout(()=>r(l)):e(l)});if(!s.async)s.workTime=1/0,u();else for(let E=0;E<p;E++)csSetTimeout(u,1)}}function og(s){let n=ui(s),t=n;if(sn(s))return n;let e=0;for(let r=csNodefirstChild.apply(s);r;r=csNodenextSibling.apply(r))Pc(r)||(t.children[e++]=lr(r));let i=s.shadowRoot;return i&&(t.shadowRoot=lr(i)),n}var lr=fs(og,"serializeSync");function ui(s){let n,t;switch(s.nodeType){case 1:t=n=new Os(s),n.attributes=lg(s);break;case 3:t=new Rc(s);break;case 4:t=new tg(s);break;case 8:t=new eg(s);break;case 10:t=new sg(s);break;case 9:t=new ig(s);break;case 11:t=new ng(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function ag(){hi=csSymbol("InitialDom")}function cg(s){if(s<1)throw new Error("Precision should be >= 1");let n=0,t=performance.now();return{started:t,elapsed(){return++n%s===0&&(t=performance.now()),t-this.started}}}function lg(s){return sn(s)?[]:rg.create(s)}var ge=(()=>{class s{constructor(){this.ne=[],this.isStarted=!1}produceEvent(t){this.isStarted&&(t.timestamp=O.now(),csArray.prototype.forEach.call(this.ne,e=>e(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.ne=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.ne,t),()=>{let e=csArray.prototype.indexOf.call(this.ne,t);csArray.prototype.splice.call(this.ne,e,1)}}}return s})(),hg=Oc(),Nc=(()=>{class s extends ge{constructor(){super(...arguments),this.vo=!1}onStart(){this.vo=!0,this.S=Bf(this.Zy,this),this.F=new Zf(this.S),this.F.observe();let t=he.mutations.initialDOM.asyncMeasure(),e=()=>{this.vo=!1,ag(),t()};this.produceEvent(new Ur(i=>hg(document,r=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:r})})))}onStop(){var t,e;this.vo=!1,(t=this.S)===null||t===void 0||t.cancel(),(e=this.F)===null||e===void 0||e.disconnect()}re(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=it(e.target),i.targetProps=W.getProperties(e.target)),[e,i]}Zy(t){if(!this.tE(t))switch(t.type){case"attributeChanged":{let[e,i]=this.re(t.type,t);i.attribute=e.attribute,i.isSvg=js(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=ni(e.target),i.linkRel=Wa(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?ni(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.re(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?ni(e.target.parentElement):null,i.parentProps=e.target.parentElement?W.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.re(t.type,t);i.targetLocalName=ct(e.target)?ni(e.target):null,i.nextSibling=e.nextSibling?it(e.nextSibling):null,i.previousSibling=e.previousSibling?it(e.previousSibling):null,he.mutations.serializedMutations.measure(()=>{i.nodes=de(e.nodes,lr)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.re(t.type,t);i.previousSibling=e.previousSibling?it(e.previousSibling):null,i.nextSibling=e.nextSibling?it(e.nextSibling):null,i.nodesIds=de(e.nodes,it),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.re(t.type,t);i.nodesIds=de(e.nodes,it),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.re(t.type,t);i.shadowRoot=ui(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.re(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.re(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.re(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.re(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.re(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.re(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.re(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.re(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}}}So(t){return this.vo&&!W.getProperty(t,hi)}tE(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.So(t.target)||k.isMaskedElement(t.target)||k.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.So(e)||k.isMaskedElement(e)||k.isMaskedElementChild(e))}case"attributeChanged":return this.So(t.target)||k.isMaskedElementChild(t.target)||k.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":return this.So(t.target)||k.isMaskedElementChild(t.target);default:return!1}}}return s})(),_i=(()=>{let s;return function(n){function t(e){return e.type==="DomEvent"}n.isDOMEvent=t}(s||(s={})),s})(),$s=(()=>{class s{constructor(){this.ne=[]}start(){}stop(){this.ne.length=0,this.ne=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.ne;csSetTimeout(()=>{let r=Ze("Processor:processEvent",o=>this.processEvent(o))(t);r!=null&&csArray.prototype.forEach.call(e,o=>o(r)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.ne,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.ne,t),()=>{this.ne=csArray.prototype.filter.call(this.ne,e=>e!==t)}}emitEvent(t){Wt(()=>csArray.prototype.forEach.call(this.ne,e=>e(t)))}}return s.pendingEvents=0,s})(),at=(()=>{let s;return function(n){n.ELLIPSIS="\u2026";function t(r){return csString.prototype.replace.call(r,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(r,o,c){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(r,o,c);let l=new csRegExp(t(o),"g");return csString.prototype.replace.call(r,l,c)}n.stringReplaceAll=e;function i(r,o,c=""){return r.length<=o?r:csString.prototype.slice.call(r,0,o-c.length)+c}n.truncate=i}(s||(s={})),s})(),ua=(()=>{class s{static async toStaticResourceEvent(t,e,i){let r=await s.eE(t);if(!r)return null;let o=await s.wd(r),c=$t(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:r}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,r){let o=await s.sE(t,r),c=fe(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(p=>{p&&csArray.prototype.push.call(h.nestedResources,{hash:p.hash,data:p.data})})),h}static async wd(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Gn,e);return ir(i)}static async eE(t){let e;if(!$t(t))e=await(await window.fetch(t)).blob();else{let i=Uo(t);if(!i)return null;e=i}return e}static async sE(t,e){let i=new Map,r=fe(t),c=[{resourceRawPath:t,resourceAbsolutePath:r}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!$t(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let y=await fetch(l.resourceAbsolutePath);l.data=await y.text()}l.nestedResources||(l.nestedResources=li(l.data));let u=!1,E=!1;for(let y of l.nestedResources){let S=$t(y)?y:l.resourceAbsolutePath?gc(y,l.resourceAbsolutePath):fe(y),A=i.get(S);if(A!==void 0){if(A!==null){let R=s.iE(A,y);l.data=at.stringReplaceAll(l.data,y,R)}continue}we(c,R=>R.resourceAbsolutePath===S)!==void 0||(u=!0,E||(csArray.prototype.push.call(c,l),E=!0),csArray.prototype.push.call(c,{resourceRawPath:y,resourceAbsolutePath:S}))}if(!u){let y=await s.nE(l.data);i.set(l.resourceAbsolutePath,{hash:y.hash,data:y.data})}}else{let u;if(!$t(l.resourceAbsolutePath))u=await(await fetch(l.resourceAbsolutePath)).blob();else{let y=Uo(l.resourceAbsolutePath);if(!y){i.set(l.resourceAbsolutePath,null);continue}u=y}let E=await s.wd(u);i.set(l.resourceAbsolutePath,{hash:E,data:u})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static iE(t,e){let i=`cs://resources/${t.hash}`;return $t(e)||(i+=`?${s.Vc}=${e}`),i}static async nE(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),r=await crypto.subtle.digest(s.Gn,i);return{data:e,hash:ir(r)}}}return s.Gn="SHA-256",s.Vc="original-resource-name",s})(),Ls=(()=>{class s extends $s{constructor(){super(),this.wo="cssrm://",this.oe=0,this.ps=!1}isListening(t){return!s.isSupported()||!_i.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.rE(t);break;case"attributeChanged":this.oE(t);break;case"characterDataChanged":this.aE(t);break}return t}disableOnlineAssets(){this.ps=!1}enableOnlineAssets(){this.ps=!0}isOnlineAssetsActivated(){return this.ps}rE(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)W.traverse(i,(r,o)=>{if(r.nodeType===3&&o){this.cE(r,o.localName);return}if(!Os.isElement(r))return;let c=we(r.attributes,l=>l.name==="style");if(c&&(c.value=this._o(c.value)),this.lE(r)||this.hE(r,o)){let l=we(r.attributes,p=>p.name==="src");l&&l.value&&(l.value=this._d(l.value));let h=we(r.attributes,p=>p.name==="srcset");if(h){h.value=this.bd(h.value);return}}if(this.uE(r)&&this.ps){let l=we(r.attributes,h=>h.name==="href");if(!l||!l.value)return;this.oe++,this.ji(fe(l.value),this.oe,!0),this.dE(r,l,this.oe)}})}dE(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.wo+i}cE(t,e){if(!t||e!=="style")return;let i=this._o(t.data);i!==null&&(t.data=i)}aE(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this._o(t.newValue);e!==null&&(t.newValue=e)}oE(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this._o(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this._d(t.newValue)),i&&(t.newValue=this.bd(t.newValue)))}_d(t){return $t(t)||this.ps?(this.oe++,this.ji(t,this.oe,!1,O.now()),this.wo+this.oe):t}bd(t){if(!this.ps)return t;let e=t,i=Lr(t),r=O.now();for(let o of i)this.oe++,this.ji(fe(o),this.oe,!1,r),e=csString.prototype.replace.call(e,o,this.wo+this.oe);return e}_o(t){let e=li(t),i=t,r=O.now();for(let o of e){let c=$t(o);if(!(c||this.ps)||this.pE(o))continue;this.oe++,i=csString.prototype.replace.call(i,o,this.wo+this.oe);let l=ar(o);c?this.ji(o,this.oe,!1,r):this.ps&&(l?this.ji(o,this.oe,!0,r):this.ji(fe(o),this.oe,!1,r))}return i}ji(t,e,i,r=O.now()){let o=i?ua.toCSSStaticResourceEvent:ua.toStaticResourceEvent,c=new Ur(async l=>{try{let h=await o(t,e,r,this.ps);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}lE(t){return t.localName==="img"}hE(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}uE(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return uc()&&Ip()&&!!csArray.from}pE(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Ce([Lt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Gt=(()=>{let s;return function(n){n.Visible="visible",n.Hidden="hidden",n.Blur="blur",n.PagehideVisible="pagehideVisible",n.PagehideHidden="pagehideHidden",n.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Mc=(()=>{class s{constructor(){this.N=!1,this.Ms=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Qt(Gt.Hidden):this.Qt(Gt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Qt(Gt.PagehideHidden):this.Qt(Gt.PagehideVisible);case"blur":return this.Qt(Gt.Blur);case"navigate":return this.fE(t)?this.Qt(Gt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.N||(this.N=!0,this.jc(),this.gE(),this.mE(),Ho()&&this.yE())}stop(){this.N&&(this.N=!1,this.Hc(),this.EE(),this.vE(),Ho()&&this.SE())}onEvent(t){this.Qt=t}yE(){window.navigation.addEventListener("navigate",this.Ms)}SE(){window.navigation.removeEventListener("navigate",this.Ms)}jc(){document.addEventListener("visibilitychange",this.Ms)}Hc(){document.removeEventListener("visibilitychange",this.Ms)}gE(){window.addEventListener("pagehide",this.Ms)}EE(){window.removeEventListener("pagehide",this.Ms)}mE(){window.addEventListener("blur",this.Ms)}vE(){window.removeEventListener("blur",this.Ms)}fE(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})(),Mt=(()=>{let s;return function(n){n[n.Active=0]="Active",n[n.Paused=1]="Paused",n[n.Stopped=2]="Stopped"}(s||(s={})),s})(),ug=(()=>{class s{constructor(t,e,i=[]){this.Hi=t,this.Bc=e,this.wE=i,this.bo=null,this._t=Mt.Active,this.Z=[]}reset(){this.bo=null,this.Z=[],this._t=Mt.Active}disconnect(){this._t=Mt.Stopped}_E(){this.Bc(Mt.Paused),this._t=Mt.Paused,csSetTimeout(()=>{this._t===Mt.Paused&&this.Fc()},s.STOP_TIMEOUT)}bE(){this.Bc(Mt.Active),this._t=Mt.Active,X(this.Z,this.Hi),this.Z=[]}Fc(){this.Z=[],this.Bc(Mt.Stopped),this._t=Mt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.bo=t.date,this._t!==Mt.Active)){this.bE(),this.Hi(t);return}if(this.AE(t)){this.Hi(t);return}switch(this._t){case Mt.Active:if(this.TE(t,e)){this._E(),csArray.prototype.push.call(this.Z,t);return}this.Hi(t);break;case Mt.Paused:csArray.prototype.push.call(this.Z,t);break;case Mt.Stopped:break}}TE(t,e){return!e.isUserEvent&&this.bo!==null&&t.date-this.bo>s.INACTIVITY_TIMEOUT}AE(t){return csArray.prototype.indexOf.call(this.wE,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),dg=2e3,pg=(()=>{class s extends lt{constructor(t,e,i,r,o,c,l,h,p,u,E,y,S,A,C=[],R,_,j,b,x){super(),this.h=t,this.j=e,this.RE=i,this.Le=r,this.X=o,this.w=c,this.ae=l,this.at=h,this.ce=p,this.tt=u,this.U=E,this.Ct=y,this.yt=S,this.Pe=A,this.Oe=C,this.Ad=R,this.Lt=_,this.Bi=j,this.Ge=b,this.We=x,this.ks=0,this.Ds=new xr,this.Fi={allowFromQuotaService:!0,allowFromSerialization:!0},this.Td=on(()=>{this.j.eventsCount()>0&&this.Rd()},dg),this.fs=B=>this.processBrowserEvent(B),this.Wn=B=>this.It(B),this.Cd=0,this.Ao=0,this.Ue=new Mc,this.$c=!1,this.Id=50*1024,this.fi=!1,this.Yn=!1,this.gi=[],this.To=new ug(B=>this.G(B),B=>{switch(B){case Mt.Active:this.CE();break;case Mt.Stopped:this.IE();break}},[U.RESOURCE_HASHES,U.TEXT_VISIBILITY]),this.Pd=B=>{this.Ct.removeBatchInProgress(`${B.params.sn}.${B.params.pn}.${B.params.ri}`)}}init(){this.zc(),this.U.onLoad(this.Pd),this.U.onError(this.Pd)}CE(){csArray.prototype.forEach.call(this.Ad,t=>t.start())}IE(){csArray.prototype.forEach.call(this.Ad,t=>t.stopForInactivity())}zc(){var t,e,i;this.Pe.onEvent(this.fs,this.Wn),(t=this.tt)===null||t===void 0||t.onInputNodeToEncrypt(this.Wn),(e=this.tt)===null||e===void 0||e.onApiErrorToEncrypt(r=>{this.Od(r)}),(i=this.tt)===null||i===void 0||i.onUserIdentifierToEncrypt(this.fs),this.Ue.onEvent(r=>{if(csSetTimeout(()=>this.mi("page-state",r)),r!==Gt.Visible){if(r===Gt.Blur)return this.Nd();if(!this.$c)return this.$c=!0,csSetTimeout(()=>{this.$c=!1}),r===Gt.Hidden?this.Nd():this.PE()}})}isRecording(){return this.w.hasValidSession()&&this.isStarted}Nd(){if(!this.canSendEvents())return;this.Pe.flush(),this.Ct.saveBatchesInProgress(),X(this.Oe,o=>{var c,l;return X((l=(c=o.getPendingEvents)===null||c===void 0?void 0:c.call(o))!==null&&l!==void 0?l:[],h=>this.j.addEvent(h))});let t=this.j.getEvents();if(t.length===0)return;this.mi("pending-events",this.Pe.pendingEvents);let e=this.U.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.Le.getCurrentIndex();e.ri=i.toString(),this.yt.removeQueryParams(),this.yt.setQueryParams(e),this.Ao=t[t.length-1].date;let r=this.j.stringifyEvents();if(r.length>this.Id){let o=this.Md();if(o.length>0){let c=ks(o);this.yt.send(c)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Le.increment()}if(this.j.eventsCount()>0){e.ri=this.Le.getCurrentIndex().toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.Le.increment()}}else this.yt.send(r)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:r}),this.Le.increment();this.yt.removeQueryParams(),this.j.clearEvents()}PE(){if(!this.canSendEvents())return;this.Pe.flush();let t=this.U.getQueryParams();this.Ct.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.yt.removeQueryParams(),X(this.Oe,r=>{var o,c;return X((c=(o=r.getPendingEvents)===null||o===void 0?void 0:o.call(r))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();return}this.mi("pending-events",this.Pe.pendingEvents),this.Ao=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.yt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.Id){let r=this.Md();if(r.length>0){let o=ks(r);this.yt.send(o)||this.Ct.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.yt.removeQueryParams(),this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.Le.getCurrentIndex();t.ri=o.toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.Le.increment()}}else this.yt.send(i)||(this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.Le.increment());this.yt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.Fi.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Fi.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Fi.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Fi.allowFromSerialization=!0}canSendEvents(){return this.Fi.allowFromQuotaService&&this.Fi.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ae&&this.Ge){(e=this.ae)===null||e===void 0||e.anonymize(t);let i=this.Ge.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:O.now(),type:"JSError"});i&&this.fs(i)}}onIframeCustomError(t){if(this.We){let e=this.We.translate({...t,timestamp:O.now(),type:"CustomError"});e&&this.fs(e)}}onIframeDetailedApiError(t){this.kd(t)}onIframeRecordingUserEvent(t){for(let e of t)this.It(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.X.isCurrentPageviewValid()&&this.To.pushEvent(t,{isUserEvent:!1})}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.To.pushEvent(t,{isUserEvent:!0})}G(t){he.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.Td(),this.Dd(t)}Dd(t){this.h.emitDebugEvents&&this.Ds.emit("recordingEvent",{...t,typeName:U[t.type]})}onStart(){var t;this.mi("tag-version","15.104.2"),this.mi("page-state",document.visibilityState),this.To.reset(),this.Ue.start(),this.initStates(),this.Pe.start(),this.at&&this.ce&&this.at.subscribe(s.Mt,e=>this.kd(e),{detailedEvent:!0}),this.h.emitDebugEvents&&this.Ds.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.gi,e=>this.xd(e)),this.gi=[],this.fi&&((t=this.Lt)===null||t===void 0||t.enableOnlineAssets(),this.fi=!1)}onStop(){var t;this.Ue.stop(),this.at&&this.at.unsubscribe(s.Mt),this.Pe.stop(),this.To.disconnect(),(t=this.Lt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Pe.flush(),this.Td.cancel(),this.pushEvents(),this.U.removeQueryParams()}initStates(){this.Cd=O.now(),this.Le.reset(),this.ks=0,this.U.setQueryParams(this.RE.getRequestParameters())}pushEvents(){X(this.Oe,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.Rd():this.j.clearEvents())}Rd(){if(!this.canSendEvents())return;let t=this.j.getEvents();this.Ao=t[t.length-1].date;let e=this.Le.getCurrentIndex();this.U.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.U.getQueryParams();this.Ct.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.U.getQueryParams(),t),this.U.send(t),this.Le.increment(),this.j.clearEvents(),this.Ld&&this.Ld()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Dd(t)}kd(t){if(this.Bi&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Bi.truncate(t),this.tt){this.tt.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Od(t)}Od(t){if(this.ks<s.OE){let e={type:U.API_ERROR,date:O.now(),args:[this.ce.anonymize(t)]};this.fs(e),this.ks=this.ks+1,rt.counters.networkRequests.count("collected")}}NE(t){t===Qe.ETR_SESSION?this.U.setQueryParams({[s.ME]:s.Ud}):t===Qe.ETR_PAGE&&this.U.setQueryParams({[s.kE]:s.Ud})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.Ge)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:O.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.fs(i)}onCustomErrorEvent(t){var e;let i=(e=this.We)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:O.now(),message:t.message,attributes:t.attributes});i&&this.fs(i)}onPageEvent(t){this.Vd(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:O.now(),keyId:this.h.encryptionPublicKeyId};(e=this.tt)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.xd({eventName:t,eventType:e}):csArray.prototype.push.call(this.gi,{eventName:t,eventType:e})}xd(t){this.NE(t.eventType),this.Vd(t.eventName),this.pushEvents()}Vd(t){let e={type:U.PAGE_EVENT,date:O.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.DE)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:O.now(),type:U.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:O.now(),type:U.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.mi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.mi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Yn=!0}getStaticResourceManagerStatus(){return this.Lt?{isStarted:this.h.useStaticResourceManager&&Ls.isSupported(),onlineAssets:{activated:this.Lt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Yn}}:null}resetOnlineAssetsOnPageview(){this.fi=!1,this.Yn=!1}updateOnlineAssetsOnPageview(){this.Lt&&this.Yn&&(this.fi=!0,this.Yn=!1)}onRecordingRequestSent(t){this.Ld=t}getRecordingStartTimestamp(){return this.Cd.toString()}getRecordingLastEventTimestamp(){return this.Ao.toString()}onOptOut(){X(this.Oe,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}mi(t,e){if(!this.h.emitRecordInfoEvents)return;let i={date:O.now(),type:U.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}Md(){return this.j.extractEvents(U.API_ERROR,U.JAVASCRIPT_ERROR,U.CUSTOM_ERROR,U.TEXT_VISIBILITY,U.POINTER_DOWN)}}return s.Mt="RecordingService",s.DE=255,s.OE=20,s.kE="etrp",s.ME="etrs",s.Ud="1",H([Lt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),fg=(()=>{class s extends lt{constructor(t,e,i){super(),this.Wt=t,this.yt=e,this.U=i,this.qc=!1,this.Xn={},this.xE=r=>{if(r.length!==0)for(let o of r){let{metadata:c,events:l}=o;this.LE(c.rt)&&this.U.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Xn={}}onStop(){}recover(){this.Wt.recover(this.xE)}addBatchInProgress(t,e,i){this.Xn[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Xn[t]}blockSendingLastMessage(){this.qc=!1}allowSendingLastMessage(){this.qc=!0}sendLastMessageBeacon(){if(this.qc){let{ri:t,rst:e,let:i,...r}=this.U.getQueryParams();r.hlm="true",this.yt.setQueryParams(r),this.yt.send()}}LE(t){return!!t&&csString.prototype.indexOf.call(t,M.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Xn),t=>{let{metadata:e,events:i}=this.Xn[t];this.Wt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Wt.save(t)}}return H([D("RecordingRecovery")],s.prototype,"recover",null),s})(),mi=(()=>{class s{constructor(...t){this.jd=t}addProvider(t){csArray.prototype.push.call(this.jd,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.jd,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),kc=(()=>{class s{constructor(t,e){this.Rt=t,this.I=e,this.xs=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.O=t}start(){this.hi(),this.triggerInitialEvents()}stop(){this.pi()}hi(){csArray.prototype.forEach.call(this.xs,t=>It(t))}pi(){csArray.prototype.forEach.call(this.xs,t=>Pt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:U.HASH_CHANGE,args:[this.I.anonymizePII(this.Rt.href)],date:O.now()};this.O(t)}visibilityChangeListener(){let t={type:U.VISIBILITY_CHANGE,args:[document.visibilityState],date:O.now()};this.O(t)}}return H([D("hashChange")],s.prototype,"hashChangeListener",null),H([D("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Dc=(()=>{class s{constructor(){}onScannedAsset(t){this.Ro=t}scanCssString(t){this.Gc(li(t))}scanElement(t,e){k.getMaskedElementDetails(t).state!==k.MaskedElementState.NotMasked||e&&k.isMaskedAttribute(t,e)||(_r(t)?this.UE(t):Xa(t)?this.VE(t,e):(this.jE(t,e),this.HE(t,e),this.BE(t,e)))}VE(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:t.getAttribute("href")};this.Ro({type:"stylesheet",asset:o})}}UE(t){var e;let i=new Set;if(t.textContent)for(let o of li(t.textContent))i.add(o);let r;try{r=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||V.error(o.message)}if(r)for(let o=0;o<r.length;o++){let c=r.item(o).cssText;for(let l of li(c))i.add(l)}this.Gc(Bs(i))}Wc(t){return!this.FE(t)&&!$t(t)&&!Ac(t)}jE(t,e){if(yd(t)||md(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Wc(i)){let r={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Ro({type:"asset",asset:r})}}(!e||e==="srcset")&&t.srcset&&this.$E(t.srcset)}}HE(t,e){if(t.nodeType!==1){ut.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}$E(t){this.Gc(Lr(t))}BE(t,e){if((wd(t)||_d(t)||bd(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Wc(i)){let r={assetId:fe(i),assetRawPath:i,assetBasePath:window.location.href};this.Ro({type:"asset",asset:r})}}}Gc(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Wc(e)),e=>({rawUrl:e,absoluteUrl:fe(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Ro({type:"asset",asset:i})})}FE(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),gg=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.Ls=[],this.Z=[],this.zE=t}next(t){this.Z.length===this.zE&&csArray.prototype.shift.call(this.Z),csArray.prototype.push.call(this.Z,t),this.Z.length===1&&csSetTimeout(()=>this.clear());for(let e of this.Ls)e(t)}subscribe(t){if(we(this.Ls,i=>t===i))return()=>{this.Ls=csArray.prototype.filter.call(this.Ls,i=>i!==t)};csArray.prototype.push.call(this.Ls,t);for(let i of this.Z)t(i);return()=>{this.Ls=csArray.prototype.filter.call(this.Ls,i=>i!==t)}}clear(){this.Z=[]}hasObservers(){return this.Ls.length>0}}return s})(),xc=(()=>{var s;class n{constructor(e){this.S=e}observe(){this.qE=s.Kn.subscribe(e=>this.S(e)),s.Co||(s.Co=!0,s.Qn.observe(),zt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.gs.add(i),s.Kn.next(i)}))}disconnect(){s.Co&&(this.qE(),s.Kn.hasObservers()||(s.Co=!1,s.Qn.disconnect(),s.Kn.clear(),s.gs.clear()))}}return s=n,n.gs=cn(),n.Kn=new gg,n.GE=fs(t=>{Wt(()=>{for(let e of t)e.type==="childList"&&X(e.addedNodes,i=>{zt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.gs.has(o)||(s.gs.add(o),s.Kn.next(o))})})})},"ElementObserver.findAllElements"),n.Co=!1,n.Qn=new Ie(s.GE),ht([D()],n.prototype,"observe",null),ht([D()],n.prototype,"disconnect",null),n})(),mg=1,yg=0,Lc=(()=>{class s{constructor(t,e=mg,i=yg){this.WE=t,this.YE=e,this.XE=i,this.Ve=new Hs,this.xe=!1,this.Yc=0,this.Hd=()=>{for(this.Yc=0;this.Ve.length;){if(this.Yc>=this.YE){csSetTimeout(this.Hd,this.XE);return}let r=O.elapsed(),o=this.Ve.pop();if(!o)break;this.runTask(o);let c=O.elapsed()-r;this.Yc+=c}this.xe=!1}}schedule(t,e=!1){if(!this.WE||e){t();return}he.general.pendingTasks.increase(),this.Ve.push(t),this.KE()}KE(){this.xe||(this.xe=!0,csSetTimeout(()=>{this.Hd()}))}runTask(t){he.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ve.forEach(t=>{this.runTask(t)}),this.Ve.clear()}clearQueue(){he.general.pendingTasks.clear(),he.mutations.pendingMutations.clear(),this.Ve.clear()}isEmpty(){return this.Ve.length===0}}return H([D("TaskScheduler"),Lt("runTask")],s.prototype,"runTask",null),H([Lt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Uc=(()=>{class s{constructor(){this.B=!1,this.Bd=new Vr(t=>t.type==="cssRuleInserted"&&this.QE(t)),this.JE=ln(t=>{this.B&&t.length>0&&this.C.schedule(()=>X(t,e=>this.Jn.scanElement(e)))}),this.ZE=({type:t,asset:e})=>{var i,r,o;t==="stylesheet"&&((i=this.sv)===null||i===void 0||i.call(this,e)),(r=this.iv)===null||r===void 0||r.call(this,e);let c={date:O.now(),type:U.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.O)===null||o===void 0||o.call(this,c)},this.C=new Lc(!0,30,0),this.Zn=new xc(t=>this.nv(t)),this.P=new Ie(t=>this.Io(t)),this.Jn=new Dc,this.Jn.onScannedAsset(this.ZE)}onEvent(t){this.O=t}onAsset(t){this.iv=t}onStyleSheetFound(t){this.sv=t}start(){this.B||(this.B=!0,this.Bd.observe(),this.Zn.observe(),this.P.observe())}stop(){this.B&&(this.Bd.disconnect(),this.Zn.disconnect(),this.P.disconnect(),this.B=!1)}QE(t){!t.rule||!this.B||this.Jn.scanCssString(t.rule)}nv(t){this.B&&k.getMaskedElementDetails(t).state===k.MaskedElementState.NotMasked&&this.JE.push(t)}Io(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Jn.scanElement(e.target,e.attributeName);break;case"characterData":this.rv(e.target);break;case"childList":}})}rv(t){Wi(t)&&csNodeparentNode.apply(t)&&_r(csNodeparentNode.apply(t))&&this.Jn.scanCssString(t.data)}}return s})(),Vc=(()=>{class s{constructor(t){this.Fd=[],this.$d=[],this.qt={},this.Gt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.qt[e]}):this.qt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Fd,t)}onBeaconFailure(t){csArray.prototype.push.call(this.$d,t)}send(t){let e=gi.toQuery({...this.qt,ct:rn.UNCOMPRESSED}),i=this.ov(e,t);return i?csArray.prototype.forEach.call(this.Fd,r=>r()):csArray.prototype.forEach.call(this.$d,r=>r(this.qt)),i}ov(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Gt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Gt}?${t}`,e||"")}}return s})(),Eg=(()=>{class s{constructor(t){this.Po={},this.we=new Dr(t)}save({key:t,metadata:e,events:i}){this.we.isThresholdReached()||(this.we.addString(t),typeof i=="string"?this.we.addString(i):this.we.addArrayBuffer(i),!this.we.isThresholdReached()&&(this.Po[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.av(),i=>{let r=this.Po[i];r!==void 0&&(delete r.metadata.datatype,csArray.prototype.push.call(e,r),this.cv(i))}),e.length!==0&&(t(e),this.we.reset())}av(){return Object.keys(this.Po)}cv(t){delete this.Po[t]}}return s})(),$e=(()=>{let s;return function(n){n[n.NOT_STARTED=0]="NOT_STARTED",n[n.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",n[n.OPEN_FAILED=2]="OPEN_FAILED",n[n.READY=3]="READY"}(s||(s={})),s})(),vg=(()=>{class s{constructor(t,e,i){this.$i=t,this.lv=i,this.yi=$e.NOT_STARTED,this.Oo=[],this.Xc=0,this.hv=self.origin,this._e=typeof window=="object"?"":"worker-",this.we=new Dr(e),this.Kc()}async Kc(){await this.zd(),this.yi===$e.READY?this.uv():this.lv(this.Oo)}uv(){csArray.prototype.forEach.call(this.Oo,t=>{this.save(t)}),this.Oo=[]}async save(t){try{if(this.yi===$e.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Oo,t);return}if(this.yi!==$e.READY||this.we.isThresholdReached())return;let{key:e,metadata:i,events:r}=t;if(this.we.addString(e),typeof r=="string"?this.we.addString(r):this.we.addArrayBuffer(r),this.we.isThresholdReached())return;await this.Xt.put(`${this.hv}/${e}`,new Response(r,{headers:i}))}catch{}}async recover(t){!this.Xt&&(await this.zd(),this.yi!==$e.READY)||this.pv(t)}async zd(){try{this.yi=$e.OPEN_IN_PROGRESS,this.Xt=await self.caches.open(`${this._e}${this.$i}`),this.yi=$e.READY}catch{this.yi=$e.OPEN_FAILED}}async pv(t){try{if(this.Xc++,this.Xc>1)return;let e=await this.Xt.keys();if(e.length===0)return;let i=await this.Xt.matchAll(),r=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((p,u)=>{l[u]=p}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(p=>({metadata:l,events:p})):c.arrayBuffer().then(p=>({metadata:l,events:p}))}),o=await Promise.all(r);await Promise.all(csArray.prototype.map.call(e,c=>this.Xt.delete(c))),t(o),this.we.reset()}catch{}finally{this.Xc--}}}return s})(),Sg=(()=>{class s{constructor(t){try{this.fv(t)}catch{this.Qc()}}fv(t){self.caches?this.gv(t):this.Qc()}save(t){this.Mo.save(t)}recover(t){this.Mo.recover(t)}gv(t){this.Mo=new vg(t,s.qd,e=>{this.Qc(e)})}Qc(t){this.Mo=new Eg(s.qd),t&&csArray.prototype.forEach.call(t,e=>{this.Mo.save(e)})}}return s.qd=1024*1024*16,s})(),Un=(()=>{let s;return function(n){n.REQUEST_START="requestStart",n.DOM_INTERACTIVE="domInteractive",n.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();var jc=(()=>{class s extends $s{isListening(t){return _i.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let r of i){if(r instanceof Os){let c=k.getMaskedAttributeDetails(r);r.attributes=this.Do(r,c)}if(k.getMaskedElementDetails(r).state===k.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==r);continue}W.traverse(r,c=>{if(c instanceof Os){let l=k.getMaskedAttributeDetails(c);c.attributes=this.Do(c,l);let h=k.getMaskedElementDetails(c);h.state===k.MaskedElementState.Parent&&(this.Zc(c,h),e++)}})}return e>0&&rt.counters.sensitiveElements.count("masked-elements",e),t}Do(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Zc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),Os.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return Ce([Lt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),ae=(()=>{let s;return function(n){n.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",n.WHITELISTED_STATUS="whitelisted";function t(r){return W.getProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP)===n.WHITELISTED_STATUS}n.isWhitelistedElement=t;function e(r){W.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,n.WHITELISTED_STATUS)}n.whitelistElement=e;function i(r){W.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,void 0)}n.removeWhitelistElement=i}(s||(s={})),s})(),wg=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,_g="\uFF41",bg=/[^\s]/g,Ag="a";function Vn(s){let n=csString.prototype.replace.call(s,wg,_g);return csString.prototype.replace.call(n,bg,Ag)}var Tg=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Hc=s=>{let n=new Set(Tg);return csArray.prototype.forEach.call(s,t=>{n.add(t)}),n},Rg=["svg","slot"],Cg=(s,n,t)=>t==="radio"&&s==="input"&&n==="name"||csArray.prototype.indexOf.call(Rg,s)>-1,Bc={href:new Set(["a"]),src:new Set(["iframe"])},Ig=s=>Bc.hasOwnProperty(s),Pg=(s,n,t)=>{var e;return((e=Bc[n])===null||e===void 0?void 0:e.has(s))&&!$t(t)},Og=(s,n,t)=>(t==="submit"||t==="button")&&s==="input"&&n==="value",Ng=(()=>{class s{constructor(t,e,i,r=null){this.Ye=t,this.bv=e,this.I=i,this.xo=r,this.Av=Hc(this.bv)}sanitize(t){return W.traverse(t,(e,i)=>{if(e.anonymized=this.Ye,e.nodeType===3){let{anonymizedValue:r,withAnonymization:o}=this.getAnonymizedValue(e.data,i==null?void 0:i.localName,i?W.getProperties(i):void 0);e.anonymized=o,e.data=r;return}if(Os.isElement(e))return this.Tv(e);if(e.nodeType===4){e.data=this.Ye?Vn(e.data):this.I.checkAndAnonymizePII(e.data,this.xo);return}}),t}setAnonymization(t){this.Ye=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let r=(i==null?void 0:i[ae.ANONYMIZED_TEXT_STATUS_PROP])===ae.WHITELISTED_STATUS;return this.Ye&&!r?{anonymizedValue:Vn(t),withAnonymization:!0}:{anonymizedValue:this.I.checkAndAnonymizePII(t,this.xo),withAnonymization:!1}}Tv(t){if(W.getProperty(t,"SVG"))return;let e=we(t.attributes,r=>r.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,r=>(r.anonymized=this.Ye,r.value=this.getAnonymizedAttributeValue(t.localName,r.name,r.value,i),r))}getAnonymizedAttributeValue(t,e,i,r){return this.Rv(t,e,r)?i:Ig(e)?Pg(t,e,i)?this.I.anonymizePII(i):i:this.Ye&&Og(t,e,r)?Vn(i):this.Ye?"":this.I.checkAndAnonymizePII(i,null)}Rv(t,e,i){return Cg(t,e,i)||this.Av.has(e)}}return s})();var Mg=()=>(s,n,t)=>{t.value=Dg(t.value)},kg=csQueueMicrotask||csSetTimeout;function Dg(s){let n=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var r;let o=(r=this)!==null&&r!==void 0?r:e;if(t=arguments,o[n])return;o[n]=!0,kg(()=>{o[n]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=n,i}Mg.isScheduled=(s,n)=>{let t=n.oncePerTickSymbol;return s[t]};var Fc=(()=>{let s;return function(n){n.ENCRYPTED_NODE_PROP="toEncrypt";function t(r){return W.getProperty(r,n.ENCRYPTED_NODE_PROP)===!0}n.shouldEncrypt=t;function e(r){W.setProperty(r,n.ENCRYPTED_NODE_PROP,!0)}n.markEncryptedNode=e;function i(r){W.setProperty(r,n.ENCRYPTED_NODE_PROP,void 0)}n.unmarkEncryptedNode=i}(s||(s={})),s})(),Se=(()=>{let s;return function(n){n.EDITABLE_NODE_PROP="editableNode";function t(r){return W.getProperty(r,n.EDITABLE_NODE_PROP)===!0}n.isEditableNode=t;function e(r){W.setProperty(r,n.EDITABLE_NODE_PROP,!0)}n.markEditableNode=e;function i(r){W.setProperty(r,n.EDITABLE_NODE_PROP,void 0)}n.unmarkEditableNode=i}(s||(s={})),s})();var da=(()=>{let s;return function(n){function t(e){return e.type==="TextVisibility"}n.isTextVisibilityEvent=t}(s||(s={})),s})(),$c=(()=>{class s extends $s{constructor(t,e,i,r=null){super(),this.I=i,this.xo=r,this.jo=new Ng(t,e,i,r)}setAnonymization(t){this.jo.setAnonymization(t)}isListening(t){return da.isTextVisibilityEvent(t)||_i.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(da.isTextVisibilityEvent(t))return t.text=this.I.checkAndAnonymizePII(t.text,this.xo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.rl(t);break;case"attributeChanged":this.Mv(t);break;case"characterDataChanged":this.kv(t);break}return t}rl(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)this.jo.sanitize(i)}Mv(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.jo.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}kv(t){t.newValue=this.jo.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Ce([Lt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var zc=(()=>{class s extends $s{constructor(t){super(),this.K=t}isListening(t){return _i.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.K.anonymizeUrl(t.initialDOM.baseURI)),t}}return Ce([Lt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),jn="textarea",qc=(()=>{class s extends $s{isListening(t){return _i.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.xv(t);break;case"nodesAdded":this.Lv(t);break;case"characterDataChanged":this.Uv(t);break}return t}xv(t){W.traverse(t.initialDOM,(e,i)=>{(this.Jd(e,i)||this.Zd(e))&&(e.data=this.ol(e.data))})}Lv(t){for(let e of t.nodes)W.traverse(e,(i,r)=>{(this.jv(i,r,t)||this.Zd(i))&&(i.data=this.ol(i.data))})}Uv(t){var e;(t.parentLocalName===jn||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.ol(t.newValue))}ol(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}jv(t,e,i){return this.Hv(t,i)||this.Jd(t,e)}Hv(t,e){return t.nodeType===3&&e.targetLocalName===jn}Jd(t,e){return t.nodeType===3&&J(e)&&e.localName===jn}Zd(t){return t.nodeType===3&&Se.isEditableNode(t)}}return Ce([Lt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),xg=(()=>{class s{constructor(t){this.S=t,this.Ut={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.S=t}observe(){It(this.Ut),this.Ac()}Ac(){this.resizeListener()}disconnect(){Pt(this.Ut)}resizeListener(){let t={width:vt.windowWidth(),height:vt.windowHeight()};this.S(t)}}return ht([D("resize")],s.prototype,"resizeListener",null),s})(),Ge=(()=>{let s;return function(n){n.PORTRAIT="Portrait",n.LANDSCAPE="Landscape"}(s||(s={})),s})(),Li=(()=>{let s;return function(n){n.PORTRAIT_PRIMARY="portrait-primary",n.PORTRAIT_SECONDARY="portrait-secondary",n.LANDSCAPE_PRIMARY="landscape-primary",n.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Ui=(()=>{let s;return function(n){n[n.PORTRAIT=0]="PORTRAIT",n[n.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",n[n.LANDSCAPE=-90]="LANDSCAPE",n[n.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Lg=(()=>{let s;return function(n){let t=null;n.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=Ct.screen)===null||c===void 0)&&c.orientation)},n.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in Ct;function e(){return Ge.LANDSCAPE}function i(){var c;switch((c=Ct.screen.orientation)===null||c===void 0?void 0:c.type){case Li.PORTRAIT_PRIMARY:case Li.PORTRAIT_SECONDARY:return Ge.PORTRAIT;case Li.LANDSCAPE_PRIMARY:case Li.LANDSCAPE_SECONDARY:return Ge.LANDSCAPE;default:return Ge.PORTRAIT}}function r(){switch(window.orientation){case Ui.PORTRAIT:case Ui.PORTRAIT_REVERSE:return Ge.PORTRAIT;case Ui.LANDSCAPE:case Ui.LANDSCAPE_REVERSE:return Ge.LANDSCAPE;default:return Ge.PORTRAIT}}function o(){return n.isScreenOrientationApiSupported()?i():n.isDeprecatedScreenOrientationApiSupported()?r():e()}n.getCurrentOrientation=o}(s||(s={})),s})(),Ug=(()=>{class s extends ge{constructor(){super(...arguments),this.al=null,this.cl=null,this.js=new xg(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Lg.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.Bv(t);if(e!==this.al||i!==this.cl){this.al=e,this.cl=i;let r={type:"screenResize",width:e,height:i};this.produceEvent(r)}}Bv(t){let e,i,r=vt.screenWidth(),o=vt.screenHeight();return t===Ge.PORTRAIT?(e=r,i=o):(e=Math.max(r,o),i=Math.min(r,o)),{screenWidth:e,screenHeight:i}}onStart(){this.js.observe()}onStop(){this.al=null,this.cl=null,this.js.disconnect()}}return s})();function Vg(s){let n=csEventtarget.apply(s);return n&&ct(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}var Us=(()=>{class s{get selectors(){return this.He===""?null:this.He}constructor(t,e={closest:!1}){this.S=t,this.Et=e,this.He="",this.rr=cn(),this.Io=fs(i=>{if(this.He==="")return;let r=[];for(let o of rc(i,c=>c.addedNodes)){if(!(Td(o)||this.Et.closest&&Wi(o)))continue;let c=this.Et.closest?this.Fv(o,this.He):this.findMatchingElements(o,this.He);Do(c,r)}r.length&&this.S(r,"added")},"SelectorObserver.processMutations"),this.$v=(i,r)=>{if(this.He===""||r!=="added")return;let o=this.findMatchingElements(i,this.He);o.length&&this.S(o,"added")},this.F=new Ie(this.Io,this.$v)}observe(t){this.He===""?this.F.observe():this.He+=",",this.He+=t;let e=this.findMatchingElements(document,t);for(let i of this.F.shadowRoots){let r=this.findMatchingElements(i,t);Do(r,e)}e.length&&(X(e,i=>{this.rr.add(i)}),this.S(e,"initial"))}processPendingMutations(){this.Io(this.F.takeRecords())}disconnect(){this.F.disconnect(),this.rr.clear(),this.He=""}Fv(t,e){let i=[];if(Wi(t)){if(t.parentElement){let r=rr(t.parentElement,e);r&&csArray.prototype.push.call(i,r)}return csArray.prototype.filter.call(i,r=>this.rr.has(r)===!1)}else{if(Ei(t)){let r=rr(t,e);if(r)return csArray.prototype.push.call(i,r),csArray.prototype.filter.call(i,o=>this.rr.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Ms(window.csquerySelectorAll[t.nodeType].call(t,e));return ct(t)&&Kt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,r=>this.rr.has(r)===!1)}}return ht([D()],s.prototype,"observe",null),ht([D()],s.prototype,"disconnect",null),ht([Lt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),jg=(()=>{class s extends ge{constructor(){super(),this.tp=t=>{let e=Vg(t);e&&this.ll(e,t.type)},this.ie=new Fs((t,e)=>{switch(e){case"initial":case"added":this.ep(t);break;case"removed":this.sp(t);break}}),this.V=new Us((t,e)=>{(e==="initial"||e==="added")&&this.zv(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&yt.isConnected(t)&&!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.ep(document),this.ie.observe(),this.V.observe("video")}onStop(){this.sp(document),this.ie.disconnect(),this.V.disconnect()}ll(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let r=it(t),o={type:"VideoEvent",videoEventType:i,nodeId:r};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),cr(()=>this.produceEvent(o))}}zv(t){for(let e of t)this.ll(e,"seeked"),s.isPlaying(e)&&this.ll(e,"play")}ep(t){for(let e of["play","pause","seeked"])It({type:e,listener:this.tp,boundElement:t})}sp(t){for(let e of["play","pause","seeked"])Pt({type:e,listener:this.tp,boundElement:t})}}return s})();function Hg(s){return s.nodeName==="SELECT"}function jr(s){return s.nodeName==="INPUT"}function Bg(s){return s.nodeName==="TEXTAREA"||jr(s)&&!Gc(s)&&!Wc(s)}function Gc(s){return jr(s)&&s.type==="number"}function Wc(s){return jr(s)&&(s.type==="checkbox"||s.type==="radio")}var Yc=(()=>{class s extends ge{constructor(t){super(),this.tt=t,this.ul=cn(),this.zi=e=>this.inputHandler(e),this.Ei=[],this.qv(),this.Gv(),this.V=new Us(e=>{for(let i of e)this.dl(i)&&Wt(()=>{this.pl(i,it(i))},"low")}),this.ie=new Fs((e,i)=>{switch(i){case"initial":case"added":It({type:"change",listener:this.zi,boundElement:e});break;case"removed":Pt({type:"change",boundElement:e,listener:this.zi});break}})}onStart(){It({type:"keyup",boundElement:document,listener:this.zi}),It({type:"change",boundElement:document,listener:this.zi}),X(this.Ei,t=>t.activate()),this.V.observe(csArray.prototype.join.call(s.Wv,",")),this.ie.observe()}onStop(){Pt({type:"keyup",boundElement:document,listener:this.zi}),Pt({type:"change",boundElement:document,listener:this.zi}),X(this.Ei,t=>t.deactivate()),this.V.disconnect(),this.ie.disconnect(),this.ul.clear()}pl(t,e){var i,r,o;if(this.ul.has(t))return;if(this.ul.add(t),Hg(t)){let h={type:"InputEvent",inputType:"select",target:it(t),selectedIndex:t.selectedIndex,timestamp:O.now()};this.produceEvent(h);return}if(Wc(t)){let h={type:"InputEvent",inputType:"checkable",target:it(t),checked:t.checked,timestamp:O.now()};this.produceEvent(h);return}let c=Bg(t),l=Gc(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((r=this.tt)===null||r===void 0)&&r.shouldEncrypt(t)){(o=this.tt)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:O.now()});return}let p=l?"0":"\u2022",u={type:"InputEvent",inputType:"text",target:it(t),value:csString.prototype.replace.call(h,/\S/g,p),timestamp:O.now()};this.produceEvent(u)}}inputHandler(t){if(!this.isStarted)return;let e=St(t),i=it(e);!i||!this.dl(e)||yt.isConnected(e)&&Wt(()=>{this.pl(e,i)},"low")}qv(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Gv(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let r=nr(t.prototype,e,(o,c,l)=>{if(l!==c&&yt.isConnected(o)){let h=i?o.parentElement:o;this.Yv(h)}});r&&csArray.prototype.push.call(this.Ei,r)}dl(t){return!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)&&(en(t)||Ar(t)||br(t))}Yv(t){if(this.isStarted&&yt.isConnected(t)){let e=it(t);e&&this.dl(t)&&Wt(()=>{this.pl(t,e)},"low")}}}return s.Wv=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Ce([Tt()],s.prototype,"inputHandler",null),Ce([D()],s.prototype,"trackChanges",null),s})();var Xc=(()=>{class s extends ge{constructor(){super(),this.ms=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.Xv=Ze("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)k.isMaskedElement(i)||k.isMaskedElementChild(i)||Cd(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=ln(this.Xv);this.Zn=new xc(e=>t.push(e)),this.Vs=new Set}onStart(){this.ms&&this.Zn.observe()}onStop(){this.Vs.clear(),this.Zn.disconnect()}async register(t){this.Vs.has(t)||(this.Vs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Ce([D()],s.prototype,"register",null),s})(),pa=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static ip(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.Kv(t))}static Kv(t){let i=t.getEntriesByType("navigation")[0];i&&(this.vi=i,s.qi(i))}static $n(t){this.Qv(t),this.vi&&t(this.vi),this.Ne||this.Jv()}static Qv(t){this.Pt.add(t)}static Zv(t){this.Pt.delete(t)}static Jv(){if(this.or||(this.or=this.ip()),!this.or){this.vi||(this.vi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.qi(this.vi);return}this.or.observe({type:"navigation",buffered:!0}),this.Ne=!0}static qi(t){this.Pt.forEach(e=>e(t))}static qn(t){this.Zv(t),this.Pt.size===0&&this.er()}static er(){var t;this.Ne&&((t=this.or)===null||t===void 0||t.disconnect(),this.Ne=!1,this.vi=null,this.or=this.ip())}constructor(t){this.S=t}observe(){s.$n(this.S)}disconnect(){s.qn(this.S)}}return s.Ne=!1,s.Pt=new Set,s.vi=null,s})(),Kc=(()=>{class s extends ge{constructor(){super(...arguments),this.Ho=null,this.np=new pa(t=>{if(this.Ho)return;let e=this.tS(t);e&&(this.Ho=e,this.produceEvent(e))})}onStart(){if(this.Ho){this.produceEvent(this.Ho);return}this.np.observe()}onStop(){this.np.disconnect()}tS(t){let e=pa.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:O.now()}}}return s})(),wt=(()=>{let s;return function(n){n[n.TAP=0]="TAP",n[n.LONG_PRESS=1]="LONG_PRESS",n[n.DRAG=2]="DRAG",n[n.FLICK=3]="FLICK",n[n.PINCH_IN=4]="PINCH_IN",n[n.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Vi=(()=>{let s;return function(n){n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Fg=(()=>{class s{compute(t,e){let i=this.Hs(e.x)-this.Hs(t.x),r=this.Hs(e.y)-this.Hs(t.y),o=e.time-t.time;return{duration:o,distance:this.rp(i,r),direction:this.eS(i,r),velocity:this.sS(i,r,o)}}computePinchMetrics(t,e){let i=this.Hs(e.x)-this.Hs(t.x),r=this.Hs(e.y)-this.Hs(t.y);return{duration:e.time-t.time,distance:this.rp(i,r)}}getScale(t,e){return Math.abs(e/t-1)}Hs(t){return t/window.devicePixelRatio}rp(t,e){return Math.round(Math.sqrt(t*t+e*e))}sS(t,e,i){let r=i/1e3,o=t/r,c=e/r;return Math.round(Math.abs(o)+Math.abs(c))}eS(t,e){return Math.abs(t)>Math.abs(e)?t>0?Vi.RIGHT:Vi.LEFT:e>0?Vi.DOWN:Vi.UP}}return s})(),Qc=typeof performance!="undefined"&&!!performance.now,fa=Qc?()=>performance.now():csDate.now,$g=(()=>{var s;return Qc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),ji={now(){return Math.round(fa()+$g)},elapsed(){return fa()}};function ga(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var zg=1e3,qg=100,Gg=.1,hr=(()=>{class s{constructor(){this.Vt={},this.gl=()=>{},this.Bo=new Fg,this.be()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.gl=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.iS(t))return;this.nS(t)&&this.be();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:ji.now()};if(t.touches.length===1)this.Vt.startPinchTime=e.time,this.Vt.firstTouch=e;else if(t.touches.length===2&&(this.Vt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:ji.now()},this.Vt.firstTouch&&this.Vt.secondTouch)){let i=this.Bo.computePinchMetrics(this.Vt.firstTouch,this.Vt.secondTouch);this.Gi=i.distance}csArray.prototype.push.call(this.ar,e),this.Fo=St(t)}processActionMove(){this.ml=!0}processActionUp(t){if(this.rS(t)){if(csArray.prototype.push.call(this.ar,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:ji.now()}),this.oS(t)&&this.Vt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Vt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:ji.now()};this.Vt.firstTouch&&(this.Vt.firstTouch=e,this.Vt.secondTouch=i),this.aS(t)}this.Gi||this.cS()&&this.lS(t)}}be(){this.ar=[],this.Fo=null,this.ml=!1,this.Gi=null,this.cr=!0}lS(t){let e=this.Bo.compute(this.ar[0],this.ar[1]);this.cr=t.isTrusted;let i=this.ml?this.hS(e):this.uS(e);if(this.dS(i.type,t.changedTouches)){let r=t.changedTouches[0];i.pageX=ga(r.pageX,1),i.pageY=ga(r.pageY,1)}this.gl(i,t)}aS(t){if(!(this.Vt.firstTouch&&this.Vt.secondTouch))return;let e=this.Bo.computePinchMetrics(this.Vt.firstTouch,this.Vt.secondTouch);this.cr=t.isTrusted;let i=this.pS(e);i&&this.gl(i,t)}pS(t){return!this.Gi||this.Bo.getScale(this.Gi,t.distance)<Gg?void 0:{type:this.Gi>t.distance?wt.PINCH_IN:wt.PINCH_OUT,target:this.Fo,distance:t.distance,isTrusted:this.cr}}hS(t){return{type:t.velocity<qg?wt.DRAG:wt.FLICK,target:this.Fo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.cr}}uS(t){return{type:t.duration<zg?wt.TAP:wt.LONG_PRESS,target:this.Fo,isTrusted:this.cr}}dS(t,e){return t===wt.TAP&&e&&e.length===1}nS(t){return t.touches.length===1}cS(){return this.ar.length===2}iS(t){return t.touches.length>0}rS(t){return t.changedTouches.length>0}oS(t){return this.ml&&!!this.Gi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),Wg="touchstart",Yg="touchmove",Xg="touchend",Kg=(()=>{class s{constructor(t){this.S=t}observe(){s.op&&s.yl(this.S)}disconnect(){s.op&&s.El(this.S)}static fS(t,e){csArray.prototype.forEach.call(Bs(s.Pt),i=>i(t,e))}static yl(t){s.Pt.has(t)||(s.Pt.add(t),s.Pt.size===1&&(s.lr.onGesture(s.fS),csArray.prototype.forEach.call(s.xs,e=>It(e))))}static El(t){s.Pt.delete(t),s.Pt.size===0&&csArray.prototype.forEach.call(s.xs,e=>Pt(e))}static vl(t){if(s.lr.isValidTouchEvent(t))switch(t.type){case"touchstart":s.lr.processActionDown(t);break;case"touchmove":s.lr.processActionMove();break;case"touchend":s.lr.processActionUp(t);break}}}return s.xs=[{boundElement:Ct.document,type:Wg,listener:n=>s.vl(n)},{boundElement:Ct.document,type:Yg,listener:n=>s.vl(n)},{boundElement:Ct.document,type:Xg,listener:n=>s.vl(n)}],s.op=hr.isGestureDetectionSupported(),s.Pt=new Set,s.lr=new hr,s})(),Jc=(()=>{class s extends ge{constructor(){super(),this.ur=new Kg(this.Sl.bind(this))}onStart(){this.ur.observe()}onStop(){this.ur.disconnect()}Sl(t){let e=this.gS(t);e&&this.produceEvent(e)}gS(t){if(!this.mS(t))return null;let e=bf(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}mS(t){return t.target!==null&&!(ct(t.target)&&k.isMaskedElementChild(t.target))}}return s})(),Zc=(()=>{class s{constructor(t){this.S=t,this.Bs=!1,this.Ut={boundElement:Ct,type:"error",listener:e=>this.yS(e)}}observe(){It(this.Ut,this.Bs)}disconnect(){Pt(this.Ut,this.Bs)}yS(t){this.S(t)}}return s})(),Qg=(()=>{class s extends ge{constructor(){super(...arguments),this.ap=new Zc(t=>this.$o(t))}$o({message:t,filename:e,lineno:i,colno:r}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||$t(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:r})}onStart(){this.ap.observe()}onStop(){this.ap.disconnect()}}return s})(),Jg=(()=>{class s extends $s{constructor(t){super(),this.ES=t,this.wl=1024,this._l=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=at.truncate(t.message,this.wl,at.ELLIPSIS),t.filename=at.truncate(t.filename,this._l,at.ELLIPSIS),this.ES(t)}}return s})();var Ts=[],ur=!1,tl=fs(tm,"executeTasks");function Zg(s){if(csArray.prototype.push.call(Ts,s),!ur){for(let n=0;n<3;n++)csSetTimeout(tl);ur=!0}}function tm(){let s=csDate.now();for(let n=0;n<Ts.length;n++)if(Ts[n](),csDate.now()-s>=35){Ts=csArray.prototype.slice.call(Ts,n+1),csSetTimeout(tl);return}Ts=[],ur=!1}var ze=(()=>{let s;return function(n){n[n.Started=0]="Started",n[n.Stopped=1]="Stopped",n[n.Processing=2]="Processing",n[n.Completed=3]="Completed"}(s||(s={})),s})(),el=(()=>{class s{constructor(){this.At=new Hs,this._t=ze.Stopped,this.S=null,this.lp=t=>{this._t===ze.Stopped||!t||(this.S(t),this.hp())}}get queueLength(){return this.At.length}start(t){if(this.S)throw new Error("callback already set");this._t=ze.Started,this.S=t}push(t){this.At.push(t),this.Rl()}stop(){this.S=null,this._t=ze.Stopped,this.At.clear()}static pipe(t,e){let i=t,r=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(r,l),X(i,h=>h.subscribe(p=>l.push(p))),i=[c]}let o=new em(r);return X(i,c=>c.subscribe(l=>o.push(l))),o}up(){return this._t===ze.Stopped}Xe(){return this._t===ze.Processing}hp(){if(!this.up()){if(this.At.isEmpty){this._t=ze.Completed;return}this._t=ze.Processing,Zg(()=>{let t=this.At.pop();t instanceof Ur?t.complete(this.lp):this.lp(t)})}}Rl(){this.up()||this.Xe()||this.hp()}}return s})(),em=(()=>{class s extends el{constructor(t){super(),this.dp=t}get queueLength(){return csArray.prototype.reduce.call(this.dp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),X(this.dp,t=>t.stop())}}return s})(),sl=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.B=!1,this.Pt=[]}get pendingEvents(){var t,e;return(e=(t=this.At)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.B)throw new Error("Recording is already started.");let t=this.Pt;this.At=el.pipe(this.producers,this.processors),this.At.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),X(this.producers,e=>e.start()),X(this.processors,e=>e.start()),this.B=!0}stop(){this.At.stop(),this.Pt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.B=!1,this.Pt=[]}subscribe(t){if(this.B)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Pt,t),()=>this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}return s})(),il=(()=>{class s extends ge{constructor(t){super(),this.Oe=t}subscribe(t){return super.subscribe(t)}onStart(){X(this.Oe,t=>{t.onEvent(e=>{var i;return this.Hi(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),X(this.Oe,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){X(this.Oe,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Hi(t,e){this.produceEvent({timestamp:O.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})();function sm(s,n,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,r={type:U.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(r);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{n({type:U.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)n({type:U.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{n({type:U.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:r,attribute:o,newValue:c}=s;n({type:U.MUTATION_ATTRIBUTE,date:e,args:[i,r,o,c]});break}case"characterDataChanged":{let{target:i,newValue:r}=s;n({type:U.MUTATION_CHARACTER_DATA,date:e,args:[i,r]});break}case"cssRuleInserted":{let{target:i,rule:r,index:o}=s,c=J(o)?[i,r,o]:[i,r];n({type:U.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:r}=s;n({type:U.STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"cssRuleUpdated":{let{target:i,rule:r,index:o}=s;n({type:U.STYLESHEET_RULE_UPDATE,date:e,args:[i,r,o]});break}case"shadowRootAttached":{let{target:i,shadowRoot:r}=s;n({type:U.ATTACH_SHADOW,date:e,args:[i,r]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:r}=s;n({type:U.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:r}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:r}=s;n({type:U.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:r,index:o}=s,c=J(o)?[i,r,o]:[i,r];n({type:U.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:r}=s;n({type:U.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:r,index:o}=s,c=[i,r,o];n({type:U.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}default:V.error("translateDOMEvent: DOMEvent not supported");break}}function im(s){let n=nm(s.data);return{type:U.GESTURE_RECOGNITION,args:[s.targetId,n],date:s.timestamp}}function nm(s){let n={type:rm(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(n[t]=e)}return n}function rm(s){switch(s){case wt.DRAG:case wt.FLICK:return si.SWIPE;case wt.LONG_PRESS:return si.LONG_PRESS;case wt.TAP:return si.TAP;case wt.PINCH_IN:return si.PINCH_IN;case wt.PINCH_OUT:return si.PINCH_OUT}}function om(s,n){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===n.batchSize){this.flush();return}n.autoFlushDelay&&n.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},n.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var am=20;function cm(s){return om(n=>{let t={visibleInViewPort:n},e={type:U.TEXT_VISIBILITY,date:O.now(),args:[t]};s(e)},{batchSize:am,autoFlushDelay:1e3})}function lm(s){return{type:U.PERFORMANCE_TIMINGS,args:[{performanceTiming:Un.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Un.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Un.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function hm(s){switch(s.inputType){case"text":return{type:U.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:U.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:U.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var um=500,Hn=0;function dm(){return{processEvent(s,n){if(s.originalEvent.type===U.PERFORMANCE_RESOURCE_TIMING)return Hn>=um?null:(Hn+=1,n({...s.originalEvent,date:s.timestamp}));n(s.originalEvent)},reset(){Hn=0}}}function pm(s){switch(s.videoEventType){case"play":return{type:U.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:U.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let n=s;return{type:U.VIDEO_SEEK,args:[n.nodeId,n.newTimePositionInSec],date:s.timestamp}}default:return null}}var nl=(()=>{class s{get pendingEvents(){return this.zo.pendingEvents}constructor(t,e,i,r,o){this.zo=t,this.E=e,this.Ae=i,this.Ge=r,this.We=o,this.Jt=()=>{},this.qo=()=>{},this.pp=cm(c=>this.Jt(c))}start(){var t,e;this.fp=dm(),this.zo.subscribe(i=>{var r,o,c,l,h,p;let u=i,{timestamp:E}=u;switch(u.type){case"Legacy":{let y=u.eventType==="user"?(r=this.qo)!==null&&r!==void 0?r:()=>{}:this.Jt;this.fp.processEvent(u,y)}break;case"CustomElementRegistration":{this.Jt({type:U.CUSTOM_ELEMENT_REGISTRATION,date:E,args:[u.tagName]});break}case"DomEvent":{sm(u,this.Jt,this.E);break}case"InputEvent":{let y=hm(u);(o=this.qo)===null||o===void 0||o.call(this,y);break}case"encryptedCharacterDataChanged":{let{target:y,rawData:S,encryptedData:A,encryptionMetadata:C}=u;this.Jt({type:U.MUTATION_ENCRYPTED_CHARACTER_DATA,date:E,args:[y,S,A,C]});break}case"StaticResource":{let{url:y}=u;this.Jt({type:U.STATIC_RESOURCE_URL,date:E,args:[y]});break}case"ResizeMaskedElement":{let{target:y,width:S,height:A}=u;this.Jt({type:U.MUTATION_ATTRIBUTE,date:E,args:[y,"","style",`width:${S}px !important;height:${A}px !important;`]});break}case"Gesture":{let y=im(i);(c=this.qo)===null||c===void 0||c.call(this,y);break}case"TextVisibility":{this.pp.push(u.text);break}case"StaticResourceManagerEvent":{(l=this.Ae)===null||l===void 0||l.processEvent(u);break}case"screenResize":{let{width:y,height:S}=u,A={type:U.SCREEN_RESIZE,date:E,args:[y,S]};this.Jt(A);break}case"viewportResize":{let{width:y,height:S}=u,A={type:U.RESIZE,date:E,args:[y,S]};this.Jt(A);break}case"PerformanceTiming":{this.Jt(lm(u));break}case"CustomError":{let y=(h=this.We)===null||h===void 0?void 0:h.translate(u);y&&this.Jt(y);break}case"JSError":{let y=(p=this.Ge)===null||p===void 0?void 0:p.translate(u);y&&this.Jt(y);break}case"VideoEvent":{let y=pm(u);y&&this.Jt(y);break}case"warning":{V.warn(u.message);break}default:V.error(`WebRecorderEventTranslator: Event not supported (${u.type})`);break}}),this.E.emitInitialDomStart(),(t=this.Ge)===null||t===void 0||t.start(),(e=this.We)===null||e===void 0||e.start(),this.zo.start()}stop(){var t,e,i;this.reset(),this.flush(),this.zo.stop(),(t=this.Ae)===null||t===void 0||t.flushEvents(),(e=this.Ge)===null||e===void 0||e.stop(),(i=this.We)===null||i===void 0||i.stop()}flush(){this.pp.flush()}onEvent(t,e){var i;this.Jt=t,this.qo=e,(i=this.Ae)===null||i===void 0||i.onEvent(r=>this.Jt(r))}reset(){this.fp.reset()}}return s})(),rl=(()=>{class s{constructor(t=100){this._S=t,this.Go={},this.pr=null,this.Vc="original-resource-name"}onEvent(t){this.bS=t}processEvent(t){this.AS(t.resourceId,t.resource.hash,t.originalResourceName),this.TS(t)}flushEvents(){this.pr&&csClearTimeout(this.pr),this.gp()}onSendStaticResource(t){this.TS=t}gp(){if(!Object.keys(this.Go).length)return;let t={type:U.RESOURCE_HASHES,date:O.now(),args:[this.Go]};this.pr=null,this.Go={},this.bS(t)}AS(t,e,i){let r=e;i&&(r+=`?${this.Vc}=${i}`),this.Go[t]=r,!this.pr&&(this.pr=window.csSetTimeout(()=>this.gp(),this._S))}}return s})(),fm=(()=>{class s{constructor(t,e,i){this.E=t,this.w=e,this.RS=i,this.fr=kt.ETR_DISABLED,this.Wo=kt.ETR_PENDING,this.Yo=!0}getEtrStatus(t){t===void 0&&(t=this.w.getSession());let e=t==null?void 0:t.etrStatus;return this.Cl()&&e===kt.ETR_SAVED_SESSION?e:this.fr}onEventTriggerRecording(t,e){switch(e){case Qe.ETR_PAGE:this.mp(kt.ETR_SAVED_PAGE);break;case Qe.ETR_LEGACY:case Qe.ETR_SESSION:this.mp(kt.ETR_SAVED_SESSION);break}}handleCollectStateChange(t){this.Yo=!1,t?this.gr(this.Wo):this.gr(kt.ETR_DISABLED)}handleArtificialPageview(){this.RS?(this.Yo=!0,this.gr(kt.ETR_DISABLED)):this.Cl()&&this.gr(kt.ETR_PENDING)}handleSessionRenewal(){this.Yo=!0,this.gr(kt.ETR_DISABLED)}gr(t){this.fr=t,this.Wo=kt.ETR_PENDING,this.yp(t),this.E.emitRecordingContextChange()}mp(t){this.Yo?Number(t)>Number(this.Wo)&&(this.Wo=t):this.Cl()&&Number(t)>Number(this.fr)&&(this.fr=t,this.yp(t),this.E.emitRecordingContextChange())}yp(t){let e=this.w.getSession();e!==null&&e.etrStatus===kt.ETR_NOT_SAVED_SESSION&&t===kt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.w.setSession(e))}Cl(){return this.fr!==kt.ETR_DISABLED}}return s})();function dr(s,n){let t,e,i,r,o=null,c=h=>{let p=O.elapsed();if(!h&&o!==null){let E=n-(p-o);if(E>0){e=window.csSetTimeout(c,E);return}}let u=p-i;e=null,o=null,i=null,r=s(u,...t)},l=(...h)=>{if(t=[...h],i){o=O.elapsed();return}return i=O.elapsed(),e=window.csSetTimeout(c,n),r};return l.flushPending=()=>{e&&(window.csClearTimeout(e),c(!0))},l.cancel=()=>{o=null,i=null,e&&(window.csClearTimeout(e),e=null)},l}var gm=(()=>{let s;return function(n){n[n.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),mm=8*1024*1024,ym=(()=>{class s extends lt{constructor(t,e,i){super(),this.Ae=t,this.Ep=e,this.Q=i,this.Il={},this.vp=new Set,this.Xe=!1}initState(){uc()&&(this.Me=this.Q.getRequestParameters(),this.CS=`${this.Ep}/exist?${gi.toQuery(this.Me)}`,this.IS=`${this.Ep}/putTag?${gi.toQuery(this.Me)}`,this.Sp=dr(async()=>{if(this.Xe){this.Sp();return}this.Xe=!0;try{await this.PS()}finally{this.Xe=!1}},300),this.Ae.onSendStaticResource(t=>{this.wp(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.wp(t)}wp(t){this._p(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this._p(e.hash,e.data)})}_p(t,e){this.vp.has(t)||(this.vp.add(t),this.Il[t]=e,this.Sp())}async PS(){let t=this.Il;this.Il={};let e=await this.OS(t);if(!e.length)return;let i=this.NS(e);await Promise.all(csArray.prototype.map.call(i,r=>window.fetch(this.IS,{method:"POST",body:r})))}async MS(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Me.pid,filter:gm.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.CS,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async OS(t){let e=[],i=await this.MS(t);return csArray.prototype.forEach.call(i,r=>{let o=t[r];o?csArray.prototype.push.call(e,{hash:r,data:o}):V.warn("SRM: received unknown hash: "+r)}),e}NS(t){let e=0,i=[new FormData];for(let r of t){let{data:o,hash:c}=r,l=i.length-1;if(e=e+o.size,e<mm)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),Em=(()=>{class s{constructor(t){this.Xo=t,this.mr=20,this.Si=0,this.N=!1}translate(t){if(this.Si>=this.mr)return this.Xo.stop(),null;this.Si+=1;let{filename:e,message:i,lineno:r,colno:o,timestamp:c}=t;return{type:U.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:r,colno:o}]}}start(){this.N||(this.Si=0,this.N=!0)}stop(){this.N=!1}}return s})(),vm=(()=>{class s{constructor(){this.mr=20,this.wi=0,this.N=!1}translate(t){if(this.wi>=this.mr)return null;this.wi+=1;let{message:e,attributes:i,timestamp:r}=t;return{type:U.CUSTOM_ERROR,date:r,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.N||(this.wi=0,this.N=!0)}stop(){this.N=!1}}return s})(),Sm="csPersisted",ma="v2/recording",ol=["isRecording"],al=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],cl=["replay:resourceManager:getStatus","cssrm:getStatus"],wm=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,E,y,S,A,C,R,_,j,b,x,B,G){this.Fs=t,this.w=e,this.h=i,this.Me=r,this.f=o,this.I=c,this.X=l,this.jt=h,this.ae=p,this.at=u,this.ce=E,this.lt=y,this.E=S,this.$s=A,this.bp=C,this.Zt=R,this.vt=_,this.K=j,this.Bi=b,this.ot=x,this.hC=B,this.tt=G}init(){var t,e;let i=[],r=[];csArray.prototype.push.call(r,new jc),this.yr=new $c(this.ot.shouldUseAnonymization(),this.h.whitelistedAttributes,this.I,this.h.anonymizeDigits),this._i();let o=new Sg(Sm);this.kS(o);let c=new Pf;this.j=new If;let l=new Uc;csArray.prototype.push.call(i,l),this.h.useStaticResourceManager&&Ls.isSupported()&&(this.Lt=new Ls,this.Ae=new rl,this.Ap=new ym(this.Ae,this.h.getStaticResourceManagerUri(),this.Me),this.bp.addListener(this.Ap),csArray.prototype.push.call(r,this.Lt));let h=new mi(c,this.Me,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")})}),p=new Vc(`${this.h.getRecordingUri()}/${ma}`);csArray.prototype.push.call(r,this.yr),csArray.prototype.push.call(r,new zc(this.K)),csArray.prototype.push.call(r,new qc),this.bi=new _c,this.bi.init(),csArray.prototype.push.call(i,this.bi),this.Ct=new fg(o,p,this.U),csArray.prototype.push.call(i,new kc(window.location,this.I));let u=new Nc,E=new Ug,y=new jg,S=new Yc(this.tt),A=new Xc,C=[E,this.jt,u,new il(csArray.prototype.filter.call(i,b=>b)),A,new Kc,new Jc,S,y];this.h.jsErrorsEnabled&&(this.Xo=new Qg,this.xS=new Jg(b=>this.ae.anonymize(b)),this.Ge=new Em(this.Xo),csArray.prototype.push.call(C,this.Xo),csArray.prototype.push.call(r,this.xS)),!((e=this.h.customErrors)===null||e===void 0)&&e.enabled&&(this.We=new vm);let R=new sl(C,r),_=new nl(R,this.E,this.Ae,this.Ge,this.We),j=[u,E,y,S,A];this.recordingService=new pg(this.h,this.j,h,c,this.X,this.w,this.ae,this.at,this.ce,this.tt,this.U,this.Ct,p,_,i,j,this.Lt,this.Bi,this.Ge,this.We),this.$s.addListener(this.recordingService),this.bp.addListener(this.recordingService),this.recordingService.init(),this.f.register(ol,()=>this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()),this.f.register(al,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.E.emitRecordingContextChange()}),this.f.register(cl,()=>this.recordingService.getStaticResourceManagerStatus()),this.Ai=new fm(this.E,this.w,this.h.malkaUrlEnabled),this.$s.addListener(this.Ai),this.Fs.enableRecordingContext(this.recordingService,this.w,this.Ai),this.Pl()}onAfterNaturalPageView(){var t;this.Zt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Ap)===null||t===void 0||t.initState()}onStartTracking(){this.Ct.recover(),this._i(),this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ol())}onArtificialPageViewEnd(){this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()&&!this.w.isTemporarilyRecorded()&&this.Ct.sendLastMessageBeacon(),this.recordingService.clearStates()}onBeforeArtificialPageView(){this.Ai.handleArtificialPageview()}onAfterArtificialPageView(){this._i(),this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()?(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.LS()):(this.recordingService.resetOnlineAssetsOnPageview(),this.Wi())}onBeforeSessionRenewal(){this.Ai.handleSessionRenewal(),this.recordingService.clearStates(),this.Wi()}onOptout(){this.Wi(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this._i(),this.recordingService.triggerUnanonymizationConsentGranted(),this.E.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this._i(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.E.emitRecordingContextChange()}onCollectStateChange(t,e){if(t===M.QUOTA_REACHED||t===M.ANALYTICS_ONLY&&e===Rt.ETR_OFF)this.recordingService.clearEvents(),this.Wi();else{this.U.setQueryParams({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents();let i=t===M.ANALYTICS_ONLY&&e===Rt.ETR_ON;this.Ai.handleCollectStateChange(i)}}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Ct.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ct.allowSendingLastMessage(),this.bi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.w.isReplayRecorded()&&!this.Zt.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ol(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Wi())}Pl(){var t,e,i,r;if(!((e=(t=this.h.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.h.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;X(o,c=>{Ps(c)&&Ie.setShadowRootFilter(l=>{try{return Kt.call(l.host,c)}catch{return!1}})})}}Ol(){this.recordingService.start(),this.Ct.start(),this.E.emitRecordingContextChange()}Wi(){_f(),this.recordingService.stop(),this.Ct.stop(),this.E.emitRecordingContextChange()}LS(){this.Wi(),this.Ol()}kS(t){let e="byteArray";this.U=this.vt.create(`${this.h.getRecordingUri()}/${ma}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}_i(){var t;let e=this.ot.shouldUseAnonymization();this.yr.setAnonymization(e),(t=this.DS)===null||t===void 0||t.setAnonymization(e)}}return H([Lt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),H([Lt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),ri=(()=>{let s;return function(n){n[n.NOT_NEEDED=1]="NOT_NEEDED",n[n.NOT_EXPRESSED=2]="NOT_EXPRESSED",n[n.WITHDRAWN=3]="WITHDRAWN",n[n.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Ke=(()=>{let s;return function(n){function t(r){return r.replayConsentRequiredForSession}n.isReplayConsentNeeded=t;function e(r){return r.collectState===M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||r.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingBlockedByConsent=e;function i(r){return r.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingWithDrawn=i}(s||(s={})),s})(),_m=(()=>{class s{constructor(t,e,i,r){this.R=t,this.w=e,this.h=i,this.Ke=r,this.Tp=!1}isNaturalPageViewSent(){return this.Tp}setNaturalPageViewSent(t){this.Tp=t}getTrackingContext(){let t=this.w.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.h.projectId,r=this.h.uxaDomain,o=t.pageNumber,c=this.Ke.getPageViewType(),l=this.w.isReplayRecorded(),h=this.US(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:r,recordingConsentState:h,...this.h.smbConfig}}getSessionKey(){let t=this.R.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}US(t){return Ke.isReplayConsentNeeded(this.h)?t.collectState===M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?ri.NOT_EXPRESSED:t.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?ri.WITHDRAWN:ri.GRANTED:ri.NOT_NEEDED}}return s})(),bm=(()=>{class s{constructor(t){this.St=t,this.te=[]}handleCommand(t){if(Xt(t)&&(this.Er(t),this.St.isNaturalPageViewSent())){let e=this.St.getTrackingContext();e!==null&&this.kt(t,e)}}Er(t){csArray.prototype.push.call(this.te,t)}executeRegisteredCallbacks(){let t=this.St.getTrackingContext();t!==null&&csArray.prototype.map.call(this.te,e=>this.kt(e,t))}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Am=(()=>{class s{constructor(t){this.St=t,this.Ti=[]}handleCommand(t){if(this.St.isNaturalPageViewSent())return this.VS(t);this.vr(t)}VS(t){let e=this.St.getSessionKey();return this.Rp(t)&&e!==null&&this.kt(t.callback,e),e}vr(t){this.Rp(t)&&csArray.prototype.push.call(this.Ti,t.callback)}flushPendingCallbacks(){let t=this.St.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Ti,e=>{this.kt(e,t)}),this.Ti=[]}Rp(t){return t&&typeof t.callback=="function"}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Tm=(()=>{class s{constructor(t,e){this.Y=t,this.St=e}onTrackingContextRequestCallback(t){let e=this.St.getTrackingContext();e!==null&&this.Y.sendToChildren(I.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.St.isNaturalPageViewSent())return;let e=this.St.getTrackingContext();e!==null&&(t.trackingContext=e,this.Y.sendToChildren(I.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.St.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:xs.AfterPageView};this.Y.sendToChildren(I.IntegrationCallback,e)}}return s})();function ll(s,n){let{isRecording:t,pageNumber:e,projectId:i,siteId:r,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,p,u]=l;r?h=`${c}/sites/${r}/player?uu=${p}&sn=${u}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${p}&sn=${u}&pvid=${e}&recordingType=cs`,n.withTimestamp&&(h+=`&t=${O.now()-n.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var Rm=(()=>{class s{constructor(t){this.St=t}handleCommand(t,e){Yt(t)&&Xt(e)&&this.kt(t,e)}kt(t,e){csSetTimeout(()=>{let i=this.St.getTrackingContext();if(i){let r=ll(i,t);e(r)}})}}return s})(),hl=(()=>{class s{constructor(){this.te=new Set}handleCommand(t,e){return!Xt(t)||this.te.has(t)?null:(this.te.add(t),e&&(this._e=e,this.Cp(t,e)),()=>this.te.delete(t))}executeCallbacks(t){this.jS(t)&&(this._e=t,this.te.forEach(e=>this.Cp(e,t)))}Cp(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}jS(t){let{isRecording:e,recordingStartTimestamp:i,etrState:r,etrStatus:o,collectState:c}=t;return this._e&&(this._e.isRecording!==e||this._e.recordingStartTimestamp!==i||this._e.etrState!==r||this._e.etrStatus!==o||this._e.collectState!==c)}}return s})(),Hr=["afterPageView"],ul=["getSessionKey"],dl=["onRecordingContextChange","onRecordingStateChange"],pl=["replay:link:generate"],Cm=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.R=t,this.w=e,this.f=i,this.it=r,this.Y=o,this.h=c,this.Ke=l,this.Fs=h}init(){this.St=new _m(this.R,this.w,this.h,this.Ke),this.Nl=new bm(this.St),this.Ip=new Am(this.St),this.Sr=new hl,this.HS=new Rm(this.St),this.Ml=new Tm(this.Y,this.St),this.it.addListener(this.Ml),this.f.register(ul,t=>this.Ip.handleCommand(t)),this.f.register(Hr,t=>this.Nl.handleCommand(t)),this.f.register(dl,t=>this.Sr.handleCommand(t,this.Fs.getRecordingContext())),this.f.register(pl,(t,e)=>{this.Yi&&this.HS.handleCommand({...t,recordingStartTimestamp:this.Fs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.St.setNaturalPageViewSent(!0),this.Ip.flushPendingCallbacks(),this.Nl.executeRegisteredCallbacks(),this.Ml.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Nl.executeRegisteredCallbacks(),this.Ml.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.Sr.executeCallbacks(this.Fs.getRecordingContext())}setRecordingService(t){this.Yi=t}}return H([wi({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),Im=512,Pm=255,di=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Im),this.value=z(e)?csString.prototype.slice.call(e,0,Pm):e}static isKeyValid(t){return z(t)}static isValueValid(t){return z(t)||be(t)}}return s})(),Om=(()=>{class s extends lt{constructor(t,e){super(),this.Ht=t,this.I=e,this.kl=[]}onStart(){csArray.prototype.forEach.call(this.kl,t=>this.Pp(t.key,t.value)),this.kl=[]}onStop(){}Pp(t,e){let i=this.I.anonymizePII(t),r=be(e)?e:this.I.anonymizePII(e);this.Ht.add(new di(i,r))}trackDynamicVariable(t,e){if(di.isKeyValid(t)&&di.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.kl,{key:t,value:e});return}this.Pp(t,e)}else throw new Error(`Command misuse: ${hn[0]}`)}}return s})(),Nm=(()=>{class s{constructor(t){this.le=t,this.Ht=[]}add(t){csArray.prototype.push.call(this.Ht,t),this.setBatchReadyCall()}clear(){this.Ht=[]}onBatchReady(t){this.BS=t}getRequestParameters(){let t={};for(let e of this.Ht)t[e.key]=e.value;return{dv:this.le.compressSync(csJSON.stringify(t),"base64"),ct:this.le.algorithm}}setBatchReadyCall(){this.BS()}}return H([wi({wait:0,mode:"trailing"}),D("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Mm="dvar",hn=["trackDynamicVariable"],km=(()=>{class s{constructor(t,e,i,r,o,c){this.f=t,this.w=e,this.h=i,this.Me=r,this.le=o,this.I=c,this.hs=new Ds(this.h.getTrackerUri(),Mm),this.Ht=new Nm(this.le),this.Qe=new Om(this.Ht,this.I)}init(){this.hs.setRequestParametersProviders(this.Me,this.Ht),this.w.setDynamicVariablesService(this.Qe),this.Ht.onBatchReady(()=>this.hs.send()),this.hs.after(()=>this.Ht.clear()),this.f.register(hn,({key:t,value:e}={})=>{this.Qe.trackDynamicVariable(t,e)})}onStartTracking(){this.Qe.start()}}return s})(),pr=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),z(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Ot(t)&&le(t.revenue)&&z(t.currency)&&t.currency.length<=10&&(!Ot(t.id)||z(t.id))}}return s})(),fl=100,Dm=100,xm=(()=>{class s{constructor(t,e,i,r){this.id=t,this.name=e,this.price=i,this.quantity=r}static from(t){if(!s.Dl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return J(t.sku)&&(e.sku=t.sku),J(t.category)&&(e.category=t.category),J(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,fl)),e}static Dl(t){return Ot(t)&&z(t.id)&&z(t.name)&&le(parseFloat(t.price))&&be(parseInt(t.quantity,10))&&(!J(t.sku)||z(t.sku))&&(!J(t.category)||z(t.category))&&(!J(t.merchant)||z(t.merchant))}}return s})(),gl=(()=>{class s extends lt{constructor(t,e,i){super(),this.I=t,this.Op=e,this.X=i,this.xl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.xl,t=>{this.he=t.transaction,this.wr=t.transactionItems,this.sendTransaction()}),this.xl=[]}onStop(){}addTransaction(t){let e=this.I.anonymizeFields(t,["id"]);this.he=pr.from(e)}getTransaction(){return this.he}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.xl,{transaction:this.he,transactionItems:[...this.wr]}),this.clear();return}if(!(this.Op===null||this.X===null)&&(this.X.refreshSession(),!!this.X.isSessionValid())){if(!this.he.hasValidRevenue()){V.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Op.send()}}addItem(t){if(Xt(t))throw new Error(`Command misuse: ${un[1]}`);let e=this.I.anonymizeFields(t,["id","name","sku","category"]),i=xm.from(e);i!==null&&csArray.prototype.push.call(this.wr,i)}getItems(){return this.wr}clear(){this.he=pr.from({revenue:NaN}),this.wr=[]}getRequestParameters(){let t={id:this.he.id?`${this.he.id}`:"",revenue:`${this.he.revenue}`};return J(this.he.tax)&&(t.tax=`${this.he.tax}`),J(this.he.shipping)&&(t.shipping=`${this.he.shipping}`),J(this.he.currency)&&(t.cu=`${this.he.currency}`),t.items=window.csJSON.stringify(this.wr),t}}return s})(),Lm=(()=>{class s extends lt{constructor(t,e){super(),this.FS=t,this.X=e,this.Te=null,this.Ll=[]}onStart(){csArray.prototype.forEach.call(this.Ll,t=>{this.Te=t,this.Np()}),this.Ll=[]}onStop(){}addToCart(t){let e={};z(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Dm)),z(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,fl)),(e.sku||e.merchant)&&(this.Te=e,this.Np())}getCartItem(){return this.Te}Np(){if(!this.isStarted&&this.Te!==null){csArray.prototype.push.call(this.Ll,this.Te),this.clear();return}this.X.refreshSession(),this.X.isSessionValid()&&this.FS.send()}clear(){this.Te=null}getRequestParameters(){if(!this.Te)return{};let t={};return z(this.Te.sku)&&this.Te.sku.length>0&&(t.sku=this.Te.sku),z(this.Te.merchant)&&this.Te.merchant.length>0&&(t.me=this.Te.merchant),t}}return s})(),ml=["ecommerce:addToCart","ec:cart:add"],Br=["ecommerce:addTransaction","ec:transaction:create"],un=["ecommerce:addItem","ec:transaction:items:add"],Fr=["ecommerce:send","ec:transaction:send"],Um=(()=>{class s{constructor(t,e,i,r,o,c,l){this.h=t,this.Q=e,this.R=i,this.f=r,this.I=o,this.X=c,this.A=l}init(){let t=new Ds(this.h.getTrackerUri(),"transaction"),e=new Ds(this.h.getTrackerUri(),"addtocart");this.Je=new gl(this.I,t,this.X),this.Ko=new Lm(e,this.X);let i=new mi(this.Q,this.R,this.A,this.Je);t.setRequestParametersProviders(i),t.after(()=>{this.Je.clear()});let r=new mi(this.Q,this.R,this.A,this.Ko);e.setRequestParametersProviders(r),e.after(()=>{this.Ko.clear()}),this.f.register(Br,o=>{this.Je.addTransaction(o)}),this.f.register(un,o=>this.Je.addItem(o)),this.f.register(Fr,()=>this.Je.sendTransaction()),this.f.register(ml,o=>{this.Ko.addToCart(o)})}onStartTracking(){this.Je.start(),this.Ko.start()}}return s})(),Vm=(()=>{class s{constructor(t){this.Qo=t.performance}getRequestParameters(){if(this.$S())return{};let t=this.zS();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}zS(){let t=this.Qo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}$S(){return!(this.Qo&&this.Qo.timing&&this.Qo.timing.loadEventEnd>0)}}return s})(),q=(()=>{let s;return function(n){n[n.RESIZE=0]="RESIZE",n[n.SCROLL=1]="SCROLL",n[n.MOUSEMOVE=2]="MOUSEMOVE",n[n.MOUSEDOWN=3]="MOUSEDOWN",n[n.MOUSEUP=4]="MOUSEUP",n[n.CLICK=5]="CLICK",n[n.MOUSEOVER=6]="MOUSEOVER",n[n.MOUSEOUT=7]="MOUSEOUT",n[n.CHANGE=10]="CHANGE",n[n.FOCUSIN=11]="FOCUSIN",n[n.FOCUSOUT=12]="FOCUSOUT",n[n.TAP=14]="TAP",n[n.KEYDOWN=15]="KEYDOWN",n[n.KEYUP=16]="KEYUP",n[n.COMMAND=17]="COMMAND",n[n.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",n[n.PERFORMANCE=19]="PERFORMANCE",n[n.DRAG=20]="DRAG",n[n.FLICK=21]="FLICK",n[n.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",n[n.ZOOM=23]="ZOOM",n[n.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",n[n.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",n[n.DEAD_CLICK=30]="DEAD_CLICK",n[n.DEAD_ZOOM=31]="DEAD_ZOOM",n[n.PAGE_RELOAD=32]="PAGE_RELOAD",n[n.THRASHED_CURSOR=33]="THRASHED_CURSOR",n[n.BLANK_PAGE=34]="BLANK_PAGE",n[n.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",n[n.SUBMIT=36]="SUBMIT"}(s||(s={})),s})(),Bn=(()=>{let s;return function(n){n.SUCCESS="success",n.FAILURE="failure",n.ATTEMPT="attempt"}(s||(s={})),s})();function jm(s){return s.tgtHM!==void 0}function yl(s){return s.tgt!==void 0}function Hm(s){return s.tgtLk!==void 0}function Bm(s){return s.x!==void 0&&s.y!==void 0}function Fm(s){return s===Bn.SUCCESS||s===Bn.FAILURE||s===Bn.ATTEMPT}var Ht=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(r,o)=>o.enhanceAnalysisEvent(t,r),e)}}return s})(),El=(()=>{class s{constructor(t,e,i){this.ee=t,this.Dt=e,this.Et=i}processGesture(t,e){switch(t.type){case wt.TAP:this.qS(e);break;case wt.FLICK:this.GS(t,e);break;case wt.DRAG:this.WS(t,e);break;default:break}}qS(t){let e={type:q.TAP,ts:0,x:0,y:0,tgt:""},i=Ht.build(t,e,this.ee);i.tgt!==pe.INVALID_ELEMENT&&this.O(i)}WS(t,e){var i,r;let o={type:q.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.Et)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ht.build(e,o,this.ee);c.tgt!==pe.INVALID_ELEMENT&&this.O(c)}GS(t,e){var i,r;let o={type:q.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.Et)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ht.build(e,o,this.ee);c.tgt!==pe.INVALID_ELEMENT&&this.O(c)}onEvent(t){this.O=t}start(){this.Dt.subscribe(s.Mp,(t,e)=>this.processGesture(t,e))}stop(){this.Dt.unsubscribe(s.Mp)}}return s.Mp="AnalysisGestureTracker",H([Tt()],s.prototype,"processGesture",null),s})(),vl=(()=>{class s{constructor(t,e,i,r=["submit"]){this.ee=t,this.ut=e,this.xt=i,this.YS=r,this.kp="select, select *, input, textarea",this.XS="select, select *, input, textarea",this.Dp="a, a *, button, button *, select, select *, input, textarea",this._r="input, select, textarea",this.KS="form",this.Jo=150,this.QS=400,this.xp=!1,this.br=dr((o,c)=>this.scrollListener(o,c),this.Jo),this.Lp=dr(o=>this.resizeListener(o),this.Jo),this.JS=on(o=>this.mouseMoveListener(o),this.QS),this.ZS=[{boundElement:window,type:"resize",listener:()=>this.Lp()},{boundElement:document,type:"scroll",listener:o=>this.br(o)},{boundElement:window,type:"mousemove",listener:o=>{this.JS(mf(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.Up=[{type:"change",listener:this.xt.on(this.XS,o=>this.changeListener(o))},{type:"submit",listener:this.xt.on(this.KS,o=>this.submitListener(o))}],this.tw=[{boundElement:document,type:"mouseover",listener:this.xt.on(this.Dp,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.xt.on(this.Dp,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.xt.on(this.kp,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.xt.on(this.kp,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.xt.on(this._r,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.xt.on(this._r,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.xt.on(this._r,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.xt.on(this._r,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.xt.on(this._r,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.Up,o=>({...o,boundElement:document}))],this.D={},this.Lc=(o,c)=>{switch(c){case"initial":case"added":this.hi(o);break;case"removed":this.pi(o);break}},this.ie=new Fs(this.Lc),this.bc()}hi(t){if(Yi(t)){let e=this.Vp();csArray.prototype.forEach.call(e,i=>It(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{It({...i,boundElement:t})})}}pi(t){if(Yi(t)){let e=this.Vp();csArray.prototype.forEach.call(e,i=>Pt(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{Pt({...i,boundElement:t})})}}onEvent(t){this.O=t}start(){this.ie.observe(),this.hi(document),this.resizeListener()}stop(){this.pi(document),this.ie.disconnect()}flushPendingDebouncedListeners(){this.br.flushPending(),this.Lp.flushPending()}Hp(t){return csArray.prototype.some.call(this.YS,e=>e===t)}jp(){return this.xt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Up,t=>!this.Hp(t.type)):(V.warn("Element.matches is not implemented yet"),[])}Vp(){let t=[];return csArray.prototype.push.call(t,...this.ZS),this.xt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.tw):V.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Hp(e.type))}resizeListener(t){let e=Is.getScrollContainer(),i=Ei(e);i&&(this.xp=!0);let r={type:q.RESIZE,ts:0,x:i?e.clientWidth:vt.windowWidth(),y:i?e.clientHeight:vt.windowHeight()};t!==void 0&&(r.d=t),this.O(r)}scrollListener(t,e){let i=Is.isEventOnScrollContainer(e);!this.xp&&i&&this.resizeListener();let r={type:q.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:vt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:vt.windowOffsetY(),d:t},o=Ht.build(e,r,this.ee);this.O(o)}mouseMoveListener(t){let e={type:q.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ht.build(t,e,this.ee);this.O(i)}mouseDownListener(t){let e={type:q.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.ee);this.ue(i)}mouseUpListener(t){let e={type:q.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.ee);this.ue(i)}clickListener(t){let e={type:q.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.ee);this.ue(i)}mouseOverListener(t){let e={type:q.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.ee);this.ue(i)}mouseOutListener(t){let e={type:q.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.ut.getEventTargetPath(t)},i=Ht.build(t,e,this.ee);this.ue(i)}focusInListener(t){let e={type:q.FOCUSIN,ts:0,tgt:this.ut.getEventTargetPath(t)},i=Ht.build(t,e,this.ee);this.ue(i)}focusOutListener(t){let e={type:q.FOCUSOUT,ts:0,tgt:this.ut.getEventTargetPath(t)},i=Ht.build(t,e,this.ee);this.ue(i)}changeListener(t){let e={type:q.CHANGE,ts:0,tgt:""},i=Ht.build(t,e,this.ee);this.ue(i)}submitListener(t){let e={type:q.SUBMIT,ts:0,tgt:""},i=Ht.build(t,e,this.ee);this.ue(i)}copyListener(t){let e={type:q.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:Cs.COPY};this.ue(e)}cutListener(t){let e={type:q.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:Cs.CUT};this.ue(e)}pasteListener(t){let e={type:q.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:Cs.PASTE};this.ue(e)}keyUpListener(t){let e={type:q.KEYUP,ts:0,tgt:this.ut.getEventTargetPath(t),key:this.Bp(t)};this.ue(e)}keyDownListener(t){let e={type:q.KEYDOWN,ts:0,tgt:this.ut.getEventTargetPath(t),key:this.Bp(t)};this.ue(e)}Bp(t){let e=this.D[t.key];return e===void 0?Y.ALPHANUMERICAL:e}ue(t){yl(t)&&t.tgt!==pe.INVALID_ELEMENT&&this.O(t)}bc(){this.D[" "]=Y.SPACE,this.D.Spacebar=Y.SPACE,this.D.Enter=Y.ENTER,this.D.Backspace=Y.BACKSPACE,this.D.Delete=Y.DELETE,this.D.ArrowUp=Y.ARROWUP,this.D.ArrowDown=Y.ARROWDOWN,this.D.ArrowLeft=Y.ARROWLEFT,this.D.ArrowRight=Y.ARROWRIGHT,this.D.Up=Y.ARROWUP,this.D.Down=Y.ARROWDOWN,this.D.Left=Y.ARROWLEFT,this.D.Right=Y.ARROWRIGHT,this.D.CapsLock=Y.CAPSLOCK,this.D.Shift=Y.SHIFT,this.D.Tab=Y.TAB}}return H([D("Event handler type: resize")],s.prototype,"resizeListener",null),H([D("Event handler type: scroll")],s.prototype,"scrollListener",null),H([D("Event handler type: mouseMove"),Tt()],s.prototype,"mouseMoveListener",null),H([D("Event handler type: mouseDown"),Tt()],s.prototype,"mouseDownListener",null),H([D("Event handler type: mouseUp"),Tt()],s.prototype,"mouseUpListener",null),H([D("Event handler type: click"),Tt()],s.prototype,"clickListener",null),H([D("Event handler type: mouseOver"),Tt()],s.prototype,"mouseOverListener",null),H([D("Event handler type: mouseOut"),Tt()],s.prototype,"mouseOutListener",null),H([D("Event handler type: focusIn")],s.prototype,"focusInListener",null),H([D("Event handler type: focusOut")],s.prototype,"focusOutListener",null),H([D("Event handler type: change")],s.prototype,"changeListener",null),H([D("Event handler type: submit"),Tt()],s.prototype,"submitListener",null),H([D("Event handler type: copy")],s.prototype,"copyListener",null),H([D("Event handler type: cut")],s.prototype,"cutListener",null),H([D("Event handler type: paste")],s.prototype,"pasteListener",null),H([D("Event handler type: keyup")],s.prototype,"keyUpListener",null),H([D("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),$m=(()=>{class s{constructor(){this.Fp=100,this.Ar=0,this.Tr=vt.documentHeight(),this.$p={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Ar=this.Ul(Is.getScrollContainer()).maxScrollRate}onEvent(t){this.O=t}start(){It(this.$p)}stop(){Pt(this.$p)}reset(){let t=Is.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Ul(t);this.Tr=i,this.Ar=e,this.O()}Ul(t){let e=0,i=0;if(t===null)i=vt.documentHeight(),e=this.ew(i);else{let r=this.iw(t);i=this.zp(t,r),e=this.nw(t,r)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Is.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:r}=this.Ul(e);(i>this.Ar||r>this.Tr)&&(this.Ar=i,r>this.Tr&&(this.Tr=r),this.O())}ew(t){let e=Math.round(this.rw()/t*100);return Math.min(e,this.Fp)}rw(){let t=vt.windowHeight();return vt.windowOffsetY()+t}nw(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,r=this.zp(t,e),o=Math.round(i/r*100);return Math.min(o,this.Fp)}iw(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}zp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Ar}`,mdh:`${this.Tr}`}}}return H([D("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})();var zm=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,E,y,S,A,C,R,_,j,b,x,B){this.h=t,this.zs=e,this.Dt=i,this.Xi=r,this.Vl=o,this.Be=c,this.Ze=l,this.qp=h,this.X=p,this.Wt=u,this.W=E,this.jl=y,this.Ue=S,this.U=A,this.Zo=C,this.ys=R,this.Es=_,this.Hl=j,this.Ri=b,this.Ci=x,this.Ii=B,this.Ds=new xr,this.ta=!1}init(){var t,e,i,r,o,c,l;this.zs.onEvent(h=>this.It(h)),this.Dt.onEvent(h=>this.It(h)),this.Xi.onEvent(()=>{let h=this.Xi.getRequestParameters();this.U.setQueryParams(h),this.Ze.setQueryParams(h)}),this.jl.onEvent(h=>this.Fe(h)),this.Bl(),(t=this.Zo)===null||t===void 0||t.onEvent(h=>this.It(h)),(e=this.Ri)===null||e===void 0||e.onEvent(h=>this.It(h)),(i=this.ys)===null||i===void 0||i.onEvent(h=>this.It(h)),(r=this.Es)===null||r===void 0||r.onEvent(h=>this.It(h)),this.ow(),(o=this.Hl)===null||o===void 0||o.onEvent(h=>this.Fe(h)),(c=this.Ci)===null||c===void 0||c.onEvent(h=>this.Fe(h)),(l=this.Ii)===null||l===void 0||l.onEvent(h=>this.Fe(h))}ow(){this.Ze.onBeaconSuccess(()=>{this.Be.clearEvents()}),this.Ze.onBeaconFailure(t=>{this.aw(t)})}initStates(){let t=this.qp.getRequestParameters(),e=this.Vl.getRequestParameters(),i=this.Xi.getRequestParameters();this.U.setQueryParams(t),this.U.setQueryParams(e),this.U.setQueryParams(i),this.Ze.setQueryParams(t),this.Ze.setQueryParams(e),this.Ze.setQueryParams(i),this.Fl()}clearStates(t){var e,i;this.zs.flushPendingDebouncedListeners(),(e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.$l(),this.sendLastMessageBeacon()):this.sendEvents(),this.Xi.reset(),this.U.removeQueryParams()}start(t){var e,i,r,o,c,l,h;t||(e=this.Hl)===null||e===void 0||e.start(),this.Ue.start(),this.zs.start(),this.Xi.start(),this.Dt.start(),(i=this.Zo)===null||i===void 0||i.start(),(r=this.Es)===null||r===void 0||r.start(),t||this.jl.start(),(o=this.ys)===null||o===void 0||o.start(),(c=this.Ri)===null||c===void 0||c.start(),(l=this.Ci)===null||l===void 0||l.start(),(h=this.Ii)===null||h===void 0||h.start()}collectInitialEvents(){var t;(t=this.Zo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Fe(t)}onIframeAnalysisUserEvent(t){this.It(t)}onExternalEvent(t){this.G(t)}Fe(t){this.X.isCurrentPageviewValid()&&this.G(t)}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.G(t)}G(t){this.Be.addEvent(this.lw(t)),this.Be.isFull()&&this.sendEvents(),this.h.emitDebugEvents&&this.Ds.emit("analysisEvent",{...t,typeName:q[t.type]})}lw(t){return t.ts=this.Pi(),t}$l(){this.Ze.setQueryParams({hlm:"true"}),this.ta=!0}sendLastMessageBeacon(){this.Ze.setQueryParams(this.Vl.getRequestParameters()),this.Ze.send(this.Be.stringifyEvents()),this.Ze.removeQueryParams(["hlm"]),this.ta=!1}sendEvents(){this.Be.isEmpty()||(this.U.setQueryParams(this.qp.getRequestParameters()),this.U.setQueryParams(this.Vl.getRequestParameters()),this.U.send(this.Be.getEvents()),this.Be.clearEvents())}stop(){var t,e,i,r,o,c,l;this.Ue.stop(),this.zs.stop(),this.Xi.stop(),this.Dt.stop(),this.jl.stop(),(t=this.Zo)===null||t===void 0||t.stop(),(e=this.ys)===null||e===void 0||e.stop(),(i=this.Es)===null||i===void 0||i.stop(),(r=this.Ri)===null||r===void 0||r.stop(),this.Be.empty(),(o=this.Hl)===null||o===void 0||o.stop(),(c=this.Ci)===null||c===void 0||c.stop(),(l=this.Ii)===null||l===void 0||l.stop()}Fl(){this.es=O.now()}Pi(){return O.now()-this.es}Bl(){this.Ue.onEvent(t=>{var e,i;t!==Gt.Visible&&((e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Gt.PagehideVisible?this.$l():t===Gt.PagehideHidden?(this.$l(),this.sendLastMessageBeacon()):(!this.Be.isEmpty()||this.ta)&&this.sendLastMessageBeacon())})}aw(t){try{(!this.Be.isEmpty()||this.ta)&&this.Wt.save({requestParameters:t,events:this.Be.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Fm(t)||!Ei(e))throw new Error(`Command misuse: ${Ml}`);let i={status:t,type:q.SUBMIT_COMMAND,ts:0,tgt:this.W.getElementPath(e)};i.tgt!==pe.INVALID_ELEMENT&&this.Fe(i)}}return s})(),qm=(()=>{class s{constructor(t,e){this.Wt=t,this.U=e,this.Gp=()=>{document.visibilityState==="visible"&&this.Wp()}}start(){this.Wp(),this.jc()}stop(){this.Hc()}getRecoveryStorage(){return this.Wt}Wp(){let t=this.Wt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.U.send(i,e)}}jc(){document.addEventListener("visibilitychange",this.Gp)}Hc(){document.removeEventListener("visibilitychange",this.Gp)}}return s})(),Gm=(()=>{class s{constructor(t){this.$i=t}save(t){localStorage.setItem(this.$i,csJSON.stringify(t))}clear(){localStorage.removeItem(this.$i)}recover(){let t=localStorage.getItem(this.$i);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{V.error(`Invalid item in localStorage.
         (key:${this.$i}; value:${t})`)}finally{this.clear()}return e}}return s})(),Wm=(()=>{class s{constructor(t){this.Ki=t,this.Qi=e=>this.processMetric(e),this.N=!1}onEvent(t){this.O=t}start(){this.N||(this.N=!0,this.Ki.onFCP(this.Qi),this.Ki.onCLS(this.Qi),this.Ki.onFID(this.Qi),this.Ki.onLCP(this.Qi),this.Ki.onTTFB(this.Qi),this.Ki.onINP(this.Qi))}stop(){this.N=!1}processMetric(t){if(!this.N)return;let e={type:q.PERFORMANCE,name:t.name,val:t.value,ts:0};this.O(e)}}return H([D("Performance metric handler")],s.prototype,"processMetric",null),s})(),Xe,pi,Sl,Ji,fr,wl=-1,ys=function(s){addEventListener("pageshow",function(n){n.persisted&&(wl=n.timeStamp,s(n))},!0)},$r=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},dn=function(){var s=$r();return s&&s.activationStart||0},Qt=function(s,n){var t=$r(),e="navigate";return wl>=0?e="back-forward-cache":t&&(document.prerendering||dn()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:n===void 0?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:e}},zs=function(s,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var e=new PerformanceObserver(function(i){Promise.resolve().then(function(){n(i.getEntries())})});return e.observe(Object.assign({type:s,buffered:!0},t||{})),e}}catch{}},Jt=function(s,n,t,e){var i,r;return function(o){n.value>=0&&(o||e)&&((r=n.value-(i||0))||i===void 0)&&(i=n.value,n.delta=r,n.rating=function(c,l){return c>l[1]?"poor":c>l[0]?"needs-improvement":"good"}(n.value,t),s(n))}},zr=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},pn=function(s){var n=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||s(t)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},qr=function(s){var n=!1;return function(t){n||(s(t),n=!0)}},Rs=-1,ya=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Zi=function(s){document.visibilityState==="hidden"&&Rs>-1&&(Rs=s.type==="visibilitychange"?s.timeStamp:0,Ym())},Ea=function(){addEventListener("visibilitychange",Zi,!0),addEventListener("prerenderingchange",Zi,!0)},Ym=function(){removeEventListener("visibilitychange",Zi,!0),removeEventListener("prerenderingchange",Zi,!0)},Gr=function(){return Rs<0&&(Rs=ya(),Ea(),ys(function(){setTimeout(function(){Rs=ya(),Ea()},0)})),{get firstHiddenTime(){return Rs}}},bi=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},va=[1800,3e3],_l=function(s,n){n=n||{},bi(function(){var t,e=Gr(),i=Qt("FCP"),r=zs("paint",function(o){o.forEach(function(c){c.name==="first-contentful-paint"&&(r.disconnect(),c.startTime<e.firstHiddenTime&&(i.value=Math.max(c.startTime-dn(),0),i.entries.push(c),t(!0)))})});r&&(t=Jt(s,i,va,n.reportAllChanges),ys(function(o){i=Qt("FCP"),t=Jt(s,i,va,n.reportAllChanges),zr(function(){i.value=performance.now()-o.timeStamp,t(!0)})}))})},Sa=[.1,.25],Xm=function(s,n){n=n||{},_l(qr(function(){var t,e=Qt("CLS",0),i=0,r=[],o=function(l){l.forEach(function(h){if(!h.hadRecentInput){var p=r[0],u=r[r.length-1];i&&h.startTime-u.startTime<1e3&&h.startTime-p.startTime<5e3?(i+=h.value,r.push(h)):(i=h.value,r=[h])}}),i>e.value&&(e.value=i,e.entries=r,t())},c=zs("layout-shift",o);c&&(t=Jt(s,e,Sa,n.reportAllChanges),pn(function(){o(c.takeRecords()),t(!0)}),ys(function(){i=0,e=Qt("CLS",0),t=Jt(s,e,Sa,n.reportAllChanges),zr(function(){return t()})}),setTimeout(t,0))}))},oi={passive:!0,capture:!0},Km=new Date,wa=function(s,n){Xe||(Xe=n,pi=s,Sl=new Date,Al(removeEventListener),bl())},bl=function(){if(pi>=0&&pi<Sl-Km){var s={entryType:"first-input",name:Xe.type,target:Xe.target,cancelable:Xe.cancelable,startTime:Xe.timeStamp,processingStart:Xe.timeStamp+pi};Ji.forEach(function(n){n(s)}),Ji=[]}},Qm=function(s){if(s.cancelable){var n=(s.timeStamp>1e12?new Date:performance.now())-s.timeStamp;s.type=="pointerdown"?function(t,e){var i=function(){wa(t,e),o()},r=function(){o()},o=function(){removeEventListener("pointerup",i,oi),removeEventListener("pointercancel",r,oi)};addEventListener("pointerup",i,oi),addEventListener("pointercancel",r,oi)}(n,s):wa(n,s)}},Al=function(s){["mousedown","keydown","touchstart","pointerdown"].forEach(function(n){return s(n,Qm,oi)})},_a=[100,300],Jm=function(s,n){n=n||{},bi(function(){var t,e=Gr(),i=Qt("FID"),r=function(l){l.startTime<e.firstHiddenTime&&(i.value=l.processingStart-l.startTime,i.entries.push(l),t(!0))},o=function(l){l.forEach(r)},c=zs("first-input",o);t=Jt(s,i,_a,n.reportAllChanges),c&&pn(qr(function(){o(c.takeRecords()),c.disconnect()})),c&&ys(function(){var l;i=Qt("FID"),t=Jt(s,i,_a,n.reportAllChanges),Ji=[],pi=-1,Xe=null,Al(addEventListener),l=r,Ji.push(l),bl()})})},Tl=0,Fn=1/0,Hi=0,Zm=function(s){s.forEach(function(n){n.interactionId&&(Fn=Math.min(Fn,n.interactionId),Hi=Math.max(Hi,n.interactionId),Tl=Hi?(Hi-Fn)/7+1:0)})},Rl=function(){return fr?Tl:performance.interactionCount||0},ty=function(){"interactionCount"in performance||fr||(fr=zs("event",Zm,{type:"event",buffered:!0,durationThreshold:0}))},ba=[200,500],Cl=0,Aa=function(){return Rl()-Cl},ce=[],$n={},Ta=function(s){var n=ce[ce.length-1],t=$n[s.interactionId];if(t||ce.length<10||s.duration>n.latency){if(t)t.entries.push(s),t.latency=Math.max(t.latency,s.duration);else{var e={id:s.interactionId,latency:s.duration,entries:[s]};$n[e.id]=e,ce.push(e)}ce.sort(function(i,r){return r.latency-i.latency}),ce.splice(10).forEach(function(i){delete $n[i.id]})}},ey=function(s,n){n=n||{},bi(function(){var t;ty();var e,i=Qt("INP"),r=function(c){c.forEach(function(p){p.interactionId&&Ta(p),p.entryType==="first-input"&&!ce.some(function(u){return u.entries.some(function(E){return p.duration===E.duration&&p.startTime===E.startTime})})&&Ta(p)});var l,h=(l=Math.min(ce.length-1,Math.floor(Aa()/50)),ce[l]);h&&h.latency!==i.value&&(i.value=h.latency,i.entries=h.entries,e())},o=zs("event",r,{durationThreshold:(t=n.durationThreshold)!==null&&t!==void 0?t:40});e=Jt(s,i,ba,n.reportAllChanges),o&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),pn(function(){r(o.takeRecords()),i.value<0&&Aa()>0&&(i.value=0,i.entries=[]),e(!0)}),ys(function(){ce=[],Cl=Rl(),i=Qt("INP"),e=Jt(s,i,ba,n.reportAllChanges)}))})},Ra=[2500,4e3],zn={},sy=function(s,n){n=n||{},bi(function(){var t,e=Gr(),i=Qt("LCP"),r=function(l){var h=l[l.length-1];h&&h.startTime<e.firstHiddenTime&&(i.value=Math.max(h.startTime-dn(),0),i.entries=[h],t())},o=zs("largest-contentful-paint",r);if(o){t=Jt(s,i,Ra,n.reportAllChanges);var c=qr(function(){zn[i.id]||(r(o.takeRecords()),o.disconnect(),zn[i.id]=!0,t(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return setTimeout(c,0)},!0)}),pn(c),ys(function(l){i=Qt("LCP"),t=Jt(s,i,Ra,n.reportAllChanges),zr(function(){i.value=performance.now()-l.timeStamp,zn[i.id]=!0,t(!0)})})}})},Ca=[800,1800],iy=function s(n){document.prerendering?bi(function(){return s(n)}):document.readyState!=="complete"?addEventListener("load",function(){return s(n)},!0):setTimeout(n,0)},ny=function(s,n){n=n||{};var t=Qt("TTFB"),e=Jt(s,t,Ca,n.reportAllChanges);iy(function(){var i=$r();if(i){var r=i.responseStart;if(r<=0||r>performance.now())return;t.value=Math.max(r-dn(),0),t.entries=[i],e(!0),ys(function(){t=Qt("TTFB",0),(e=Jt(s,t,Ca,n.reportAllChanges))(!0)})}})},ry=(()=>{class s{onFCP(t){_l(t,{reportAllChanges:!0})}onCLS(t){Xm(t,{reportAllChanges:!0})}onFID(t){Jm(t,{reportAllChanges:!0})}onLCP(t){sy(t,{reportAllChanges:!0})}onTTFB(t){ny(t,{reportAllChanges:!0})}onINP(t){ey(t,{reportAllChanges:!0})}}return s})(),oy=50,ay=(()=>{class s{constructor(t=[]){this.Nt=t}stringifyEvents(){return csJSON.stringify(this.Nt)}addEvent(t){csArray.prototype.push.call(this.Nt,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Nt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=oy}isEmpty(){return this.Nt.length===0}getEvents(){return this.Nt}}return s})();var fn=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),cy=(()=>{class s extends fn{constructor(){super(...arguments),this.supportedEventTypes=[q.CHANGE],this.xw=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=St(t);return en(i)&&csArray.prototype.indexOf.call(this.xw,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Il=(()=>{class s extends fn{constructor(t){super(),this.ut=t,this.supportedEventTypes=[q.MOUSEDOWN,q.MOUSEUP,q.CLICK,q.MOUSEOVER,q.TAP,q.DRAG,q.FLICK,q.SUBMIT,q.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.ut.getEventTargetPath(t)),e}}return s})(),Ia=65535,ly=(()=>{let s;return function(n){function t(e){let i=St(e);if(!i||!ct(i)||!Xt(i.getBoundingClientRect)||!Ot(e.pageX)||!Ot(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let r=i.getBoundingClientRect(),o=e.pageX-r.left-vt.windowOffsetX(),c=e.pageY-r.top-vt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,r.width),h=Math.max(i.scrollHeight,r.height),p=Math.round(o/l*Ia),u=Math.round(c/h*Ia);return{xRel:p,yRel:u,valid:!0}}n.getRelativePosition=t}(s||(s={})),s})(),hy=(()=>{class s extends fn{constructor(t,e){super(),this.Ps=t,this.ut=e,this.supportedEventTypes=[q.MOUSEMOVE,q.CLICK],this.Jl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:r,yRel:o}=ly.getRelativePosition(t);if(i){let c=this.ut.getEventTargetPath(t);c!==pe.INVALID_ELEMENT&&(e.xRel=r,e.yRel=o,e.type===q.MOUSEMOVE&&(c!==this.Jl||this.Ps.iframesTracking?(this.Jl=c,e.tgtHM=c):e.tgtHM=""))}else e.type===q.MOUSEMOVE&&(this.Jl="");return e}}return s})(),xt=(()=>{let s;return function(n){n[n.ANONYMIZED=0]="ANONYMIZED",n[n.CAPTURED=1]="CAPTURED",n[n.MASKED=2]="MASKED",n[n.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Pa=100,Pl=(()=>{class s extends fn{constructor(t,e,i){super(),this.h=t,this.de=e,this.I=i,this.supportedEventTypes=[q.TAP,q.CLICK,q.SUBMIT]}Lw(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),r=i.nextNode();for(;r;){if(e+=r.textContent,Ar(r.parentElement)||br(r.parentElement)||this.de.getElementSensitiveStatus(r.parentElement)!==xt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Pa)break;r=i.nextNode()}return!1}Uw(t){let e=rr(t,"button,a");return e||(this.h.collectTargetText===er.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Ei(csEventtarget.apply(t))){let i=this.Uw(csEventtarget.apply(t));if(i&&z(i.textContent)&&!this.Lw(i)&&!this.I.hasPII(i.textContent,this.h.anonymizeDigits)){let r=at.truncate(csString.prototype.trim.call(i.textContent),Pa);r.length>0&&(e.text=r)}}return e}}return s})();function Ol(s,n,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new hy(s,n)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Pl(s,t,new gs)),csArray.prototype.push.call(e,new cy,new Il(n)),e}function Nl(s,n,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Pl(s,t,new gs)),csArray.prototype.push.call(e,new Il(n)),e}var uy="csAnalysisEventsPersisted",Oa="v2/events",Ml=["submit"],dy=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,E,y){this.h=t,this.Q=e,this.R=i,this.W=r,this.xt=o,this.f=c,this.X=l,this.Dt=h,this.it=p,this.vt=u,this.J=E,this.de=y}init(){let t=new ay,e=this.vt.create(`${this.h.getTrackerUri()}/${Oa}`,!0,"base64");this.ra=this.Vw(e),this.ke=this.jw(t,this.ra.getRecoveryStorage(),e),this.ke.init(),this.J.addListener(this.ke),this.it.addListener(this.ke),this.f.register(Ml,(i,r)=>{this.ke.pushSubmitCommandEvent(i,r)})}onStartTracking(t){this.ra.start(),this.ke.start(t)}onAfterNaturalPageView(){this.ke.initStates()}onAfterArtificialPageView(){this.ke.initStates(),this.ke.collectInitialEvents()}onArtificialPageViewEnd(){this.ke.clearStates(!0)}onBeforeSessionRenewal(){this.ke.clearStates(),this.ke.stop(),this.ra.stop()}onOptout(){this.ke.stop(),this.ra.stop()}jw(t,e,i){var r;let o=new Vm(window),c=new $m,l=Ol(this.h,this.W,this.de),h=[];this.h.collectSubmit||csArray.prototype.push.call(h,"submit");let p=new vl(l,this.W,this.xt,h),u=Nl(this.h,this.W,this.de),E=new El(u,this.Dt),y=new Wm(new ry),S=new Mc,A,C,R,_=new Vc(`${this.h.getTrackerUri()}/${Oa}`),j=new mi(this.Q,this.R),b,x,B,G;return new zm(this.h,p,E,c,o,t,_,j,this.X,e,this.W,y,S,i,A,C,R,b,x,B,G)}Vw(t){return new qm(new Gm(uy),t)}}return s})(),Gi=(()=>{let s;return function(n){n.Artificial="a",n.Renewal="r",n.Natural="n"}(s||(s={})),s})(),py=(()=>{class s extends lt{constructor(t,e,i,r,o){super(),this.E=t,this.J=e,this.Zl=i,this.A=r,this.Ke=o}init(){this.Hw()}onStart(t){t?this.Bw():this.Fw()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.mf(t,e):Ot(t)&&this.A.overridePath(t,e),this.isStarted||(this.J.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}Fw(){this.Ke.setPageViewType(Gi.Natural),this.E.emitBeforeNaturalPageView(),this.Zl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterNaturalPageView()}Bw(){this.Ke.setPageViewType(Gi.Renewal),this.E.emitBeforeNaturalPageView(),this.Zl.send(),this.E.emitAfterNaturalPageView()}mf(t,e){this.Ke.setPageViewType(Gi.Artificial),this.E.emitArtificialPageViewEnd(),Ot(t)&&this.A.overridePath(t,e),this.E.emitBeforeArtificialPageView(),this.Zl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterArtificialPageView()}Hw(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.mf()})}}return s})(),fy=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function gy(){return{la:fy}}var my=(()=>{class s{constructor(t,e){this.K=t,this.lt=e,this.th=!1}getRequestParameters(){return{dr:this.eh()}}addUrlMaskingPattern(t){this.lt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.th=!0}disableRemoveQueryString(){this.th=!1}eh(){let t=this.th?this.K.removeQueryString(this.yf()):this.yf();return this.K.anonymizeUrl(t,{maskingPatterns:this.lt.getUrlMaskingPatterns()})}yf(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),yy=99999,Ey=(()=>{class s{constructor(t){this.w=t,this.$w=this.zw()&&window.CSCurrentScript}qw(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Gw(e)?null:Math.round(e.responseEnd-e.fetchStart)}Gw(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.$w||this.Ww()!==1)return{};let t=this.qw();return t===null?{}:{dt:`${Math.min(t,yy)}`}}Ww(){var t;return((t=this.w.getSession())===null||t===void 0?void 0:t.pageNumber)||null}zw(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),kl=":";function Na(s){let n=[],t=vy(s),e=csString.prototype.split.call(t,"/");for(let i of e)Ae(i,kl)?csArray.prototype.push.call(n,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(n,{key:i,value:null});return n}function vy(s){let n=s;return Ae(s,"/")&&(n=csString.prototype.substring.call(n,1)),Si(s,"/")&&(n=csString.prototype.slice.call(n,0,-1)),n}var Wr=(()=>{class s{constructor(){this.Ef=new Set,this.vf=[],this.ih=new Set,this.nh=[]}addUrlMaskingPattern(t){if(this.Ef.has(t))return;this.Ef.add(t);let e=Na(t);csArray.prototype.push.call(this.vf,e)}getUrlMaskingPatterns(){return this.vf}resetPartialUrlMaskingPatterns(){this.ih.clear(),this.nh=[]}addPartialUrlMaskingPattern(t){if(this.ih.has(t))return;this.ih.add(t);let e=Na(t);csArray.prototype.push.call(this.nh,e)}getPartialUrlMaskingPatterns(){return this.nh}}return s})(),Yr=["trackPageview"],gr=["setPath"],mr=["setQuery"],Ma=["referrer:maskUrl"],Sy=["referrer:removeQueryString"],wy=["referrer:keepQueryString"],_y=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,E,y,S,A,C){this.h=t,this.f=e,this.E=i,this.Me=r,this.R=o,this.w=c,this.pe=l,this.wt=h,this.K=p,this.A=u,this.Zt=E,this.Ke=y,this.J=S,this.Gs=A,this.nn=C}init(){var t;let e=new Ds(this.h.getTrackerUri(),"pageview");this.rn=new py(this.E,this.J,e,this.A,this.Ke);let i=new my(this.K,new Wr);this.rn.init();let r=new mi(this.Me,this.R,vt,i,this.A,this.pe,wr,this.wt,this.Ke,new Ey(this.w),this.Zt);this.Gs&&r.addProvider(this.Gs),this.nn&&r.addProvider(this.nn);let o=this.h.isCsCrosswritingHeap();if(o||this.h.isCsSideloadingHeap()||this.h.isHeapSideloadsCs()){let c=(t=this.h.heapEnvironment)===null||t===void 0?void 0:t.env_id;r.addProvider({getRequestParameters(){let l={cw:o?"1":"2"};return c&&(l.happid=c),l}})}e.setRequestParametersProviders(r),this.f.register(Yr,(c,l)=>{if(!z(c)){this.rn.triggerArtificialPageView();return}this.rh(l)?this.rn.triggerArtificialPageView(c,l):this.rn.triggerArtificialPageView(c)}),this.f.register(gr,(c,l)=>{if(!z(c))throw new Error(`Command misuse: ${gr[0]}`);this.rh(l)?this.A.overridePath(c,l):this.A.overridePath(c)}),this.f.register(mr,(c,l)=>{if(!z(c))throw new Error(`Command misuse: ${mr[0]}`);this.rh(l)?this.A.overrideQuery(c,l):this.A.overrideQuery(c)}),this.f.register(Ma,c=>{if(!z(c))throw new Error(`Command misuse: ${Ma[0]}`);i.addUrlMaskingPattern(c)}),this.f.register(Sy,()=>i.enableRemoveQueryString()),this.f.register(wy,()=>i.disableRemoveQueryString())}start(t){this.rn.start(t)}onBeforeSessionRenewal(){this.rn.stop()}rh(t){return Yt(t)&&t!==null}}return s})(),Dl=(()=>{class s{constructor(t){this.ut=t}on(t,e){return i=>{this.ut.hasValidEventTarget(i)&&this.Yw(i,t)&&e(i)}}Yw(t,e){let i=St(t);return Kt.call(i,e)}isMatchesSelectorSupported(){return!!Kt}}return s})(),xl=(()=>{class s{constructor(){}onLoad(t){this.Vi=t}onLoadCallbackExecute(){this.Vi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.Xw(t)}Xw(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return H([D("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),by=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.w=i,this.es=O.now()}resetStartTime(){this.es=O.now()}getSessionData(){let{projectId:t}=this.h,e=this.R.getVisitor();e==null&&V.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:r}=e!=null?e:{},o=this.w.getSession();o===null&&V.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:r,pageNumber:c,relativeTimestamp:O.now()-this.es}}}return s})(),Ll=["clearSession"],Ul=["extendSession"];var Ay=["getSessionData"],Vl=["session:start:newVisitor"],Ty=["session:clear:visitor"],Ry=(()=>{class s{constructor(t,e,i,r){this.h=t,this.R=e,this.w=i,this.f=r}init(){this.oh=new by(this.h,this.R,this.w),this.f.register(Ll,()=>this.w.removeSession()),this.f.register(Ul,()=>this.w.extendSessionPeriodically(),{disableApplyPending:!0}),this.f.register(Ay,()=>this.oh.getSessionData(),{disableApplyPending:!0}),this.f.register(Vl,()=>this.R.renewVisitor()),this.f.register(Ty,()=>{this.R.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onBeforeArtificialPageView(){this.w.abortQuotaServiceRequest(),this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onAfterNaturalPageView(){this.oh.resetStartTime()}onAfterArtificialPageView(){this.oh.resetStartTime()}onOptout(){this.R.removeVisitor(),this.w.removeSession()}onCollectStateChange(t,e){this.w.updateCollectState(t,e)}}return s})(),Cy=60*1e3,Iy=30*1e3,Py=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.ah=!1,this.Kw=on(()=>this.w.refreshSession(),Iy)}onSessionExpired(t){this.Qw=t}isSessionValid(){return this.ah?!0:!(!this.w.hasValidSession()||this.w.pollCacheRefreshEvent()&&this.R.isSessionRenewed())}isCurrentPageviewValid(){let t=this.w.hasValidSession();return this.w.pollCacheRefreshEvent(!1)?!this.R.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.Kw():this.Jw()&&(this.Sf=O.now(),this.renewSession())}renewSession(){this.ah=!0,this.Qw(),this.ah=!1}Jw(){return!J(this.Sf)||O.now()-this.Sf>Cy}}return s})();var ps;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(ps||(ps={}));function jl(s){return s.tagDeploymentMode===ps.DualCollectionReview||s.tagDeploymentMode===ps.DualCollection}function Oy(s){return jl(s)||s.tagDeploymentMode===ps.LoadClicktalePtc}var ka=(()=>{let s;return function(n){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}n.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}n.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}n.triggerLogicalPageView=i;function r(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}n.sendPageEvent=r;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}n.sendEventTriggerRecording=o}(s||(s={})),s})();var Ny="@ETP@",Da="@user-identifier@",My=(()=>{class s extends lt{constructor(t,e,i,r){super(),this.h=t,this.L_=e,this.le=i,this.J=r,this.lh=[],this.gi=[]}onStart(){csArray.prototype.forEach.call(this.lh,t=>this.Df(t)),this.lh=[],csArray.prototype.forEach.call(this.gi,t=>this.xf(t)),this.gi=[]}onStop(){}Df(t){this.U_(t)?ds.isSupported()&&this.V_(t):this.j_(t)}trackPageEvent(t){if(!s.Lf(t))throw new Error(`Command misuse: ${Xr[0]}`);this.isStarted?this.Df(t):csArray.prototype.push.call(this.lh,t)}U_(t){return Ae(t,Da)}async V_(t){if(!this.h.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,Da.length);if(e.length>ds.MAX_DIGEST_INPUT_SIZE){V.warn("UserIdentifier event: invalid user identifier");return}let i=await ds.digest(e);i?(this.vn={eventName:i,isETR:!1,isCustomHashId:!0},this.da()):V.warn("Page event: unable to compute customHashId"),this.h.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)}j_(t){this.J.emitPageEvent(t),this.vn={eventName:t,isETR:!1,isCustomHashId:!1},this.da(),this.h.tagDeploymentMode===ps.LoadClicktalePtc&&ka.sendPageEvent(t)}xf(t){this.h.malkaEtrEnabled?this.H_(t):this.B_(t)}trackEventTriggerRecording(t){if(!s.Lf(t))throw new Error(`Command misuse: ${Kr[0]}`);this.isStarted?this.xf(t):csArray.prototype.push.call(this.gi,t)}H_(t){Ae(t,Ny)?this.J.emitEventTriggerRecording(t,Qe.ETR_PAGE):this.J.emitEventTriggerRecording(t,Qe.ETR_SESSION),this.vn={eventName:t,isETR:!0,isCustomHashId:!1},this.da()}B_(t){Oy(this.h)&&(this.J.emitEventTriggerRecording(t,Qe.ETR_LEGACY),this.vn={eventName:t,isETR:!0,isCustomHashId:!1},this.da(),this.h.tagDeploymentMode===ps.LoadClicktalePtc&&ka.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.le.compressSync(this.vn.eventName,"base64"),ct:this.le.algorithm,isETR:`${this.vn.isETR}`,isCustomHashId:`${this.vn.isCustomHashId}`}}da(){this.L_.send()}static Lf(t){return z(t)&&!!csString.prototype.trim.call(t)}}return s})(),Xr=["trackPageEvent"],Kr=["trackEventTriggerRecording"],ky=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.f=e,this.le=i,this.Me=r,this.J=o}init(){let t=new Ds(this.h.getTrackerUri(),"pageEvent");this.pa=new My(this.h,t,this.le,this.J),t.setRequestParametersProviders(this.pa,this.Me),this.f.register(Xr,e=>{this.pa.trackPageEvent(e)}),this.f.register(Kr,e=>{this.pa.trackEventTriggerRecording(e)})}onStartTracking(){this.pa.start()}}return s})(),Qr=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Hl=(()=>{class s extends Qr{constructor(){super(),this.F=new Zc(t=>this.errorListener(t))}onStartTracking(){this.F.observe()}onStopTracking(){this.F.disconnect()}errorListener(t){let e=this.F_(t);for(let i in this.subscriptions){let r=this.subscriptions[i];r(e)}}$_(t){return t=t!=null?t:"[NO ERROR MESSAGE]",at.truncate(t,s.wl,at.ELLIPSIS)}z_(t){return!t||$t(t)?"":at.truncate(t,s._l,at.ELLIPSIS)}F_(t){return{errorType:"jsError",message:this.$_(t.message),filename:this.z_(t.filename),lineno:t.lineno,colno:t.colno}}}return s.wl=1024,s._l=150,H([D("Event handler type: error")],s.prototype,"errorListener",null),s})(),Dy=(()=>{class s{constructor(t){this.f=t}init(){this.Uf(s.q_,fc),this.Uf(s.G_,pc)}Uf(t,e){this.f.register([t],(i,r)=>{!z(i)||!(z(r)||Je(r))||V.error(r,`${e}${i}`)})}}return s.G_="logSnippetError",s.q_="logImplementationSnippetError",s})(),xy=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.Y=e,this.Fs=i,this.de=r,this.it=o}init(){this.Y.onChildMessage((t,e,i)=>this.it.emitIframeEvent(t,e,i)),this.Y.setSentiveStatusCallback(()=>this.de.getSensitiveStatus()),this.Y.setRecordingContextCallback(()=>this.Fs.getRecordingContext())}onStartTracking(){this.h.iframesTracking&&this.Y.start()}onOptout(){this.h.iframesTracking&&this.Y.stop()}onSensitiveStatusChange(){if(this.h.iframesTracking){let t=this.de.getSensitiveStatus();this.Y.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.h.iframesTracking){let t=this.Fs.getRecordingContext();this.Y.onRecordingContextChange(t)}}}return s})(),Bl=(()=>{class s extends lt{constructor(t){super(),this.h=t,this.hh=0,this.Ce=new Map,this.Vf={boundElement:window,type:"message",listener:e=>this.uh(e)}}onChildMessage(t){this.jf=t}setRecordingContextCallback(t){this.W_=t}setSentiveStatusCallback(t){this.Y_=t}onSensitiveStatusChange(t){let e=st.buildBaseMessage(I.SensitiveStatus,Ft.Parent,this.h.projectId);e.content=t;let i=st.buildBaseMessage(I.SensitiveStatus,Ft.Parent,this.h.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Ce.forEach(r=>{if(r.port){let o=this.fa(r)?i:e;this.ph(r,o)}})}onRecordingContextChange(t){let e=st.buildBaseMessage(I.RecordingContext,Ft.Parent,this.h.projectId);e.content=t,this.Ce.forEach(i=>{!this.fa(i)&&i.port&&this.ph(i,e)})}sendToChildren(t,e){let i=st.buildBaseMessage(t,Ft.Parent,this.h.projectId);i.content=e,this.X_(i)}onStart(){It(this.Vf,!1),this.Hf()}onStop(){this.K_(),Pt(this.Vf,!1),this.Q_()}Hf(){let t=this.J_();this.Z_(t),csArray.prototype.forEach.call(t,e=>{if(this.tb(e)===null){let r={iframe:e};this.Ce.set(this.hh,r),this.hh+=1}}),this.eb()}J_(){return csArray.prototype.filter.call(yt.findAllElements("iframe"),t=>this.sb(t))}Z_(t){this.Ce.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.ib(i,e)})}ib(t,e){e.port&&st.closeChannelPort(e.port),this.Ce.delete(t)}Q_(){this.Ce.forEach(t=>{t.port&&st.closeChannelPort(t.port)}),this.Ce.clear()}tb(t){let e=null;return this.Ce.forEach((i,r)=>{e===null&&i.iframe===t&&(e=r)}),e}sb(t){return t.id!==$a&&(!t.src||Re(t.src,"about:")||Mr(mc(t.src),this.h.hostnames))}X_(t){this.Ce.forEach(e=>{this.ph(e,t)})}ph(t,e){let i=e.type===I.SensitiveStatus||e.type===I.RecordingContext;t.port&&(!i||t.initialStatusSent)&&st.sendChannelMessage(t.port,e)}eb(){this.Ce.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.nb(e);st.sendPostMessage(t.iframe.contentWindow,"*",i)}})}K_(){let t=this.rb();this.Ce.forEach(e=>{e.port?st.sendChannelMessage(e.port,t):e.iframe.contentWindow&&st.sendPostMessage(e.iframe.contentWindow,"*",t)})}nb(t){return st.buildBaseMessage(I.Discovery,Ft.Parent,this.h.projectId,t)}rb(){return st.buildBaseMessage(I.Stop,Ft.Parent,this.h.projectId)}ob(t,e){let i=this.Ce.get(t);if(i===void 0){V.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.hh})`);return}i.port=e,i.port.onmessage=r=>{this.fh(r,i)}}ab(t){if(!t.port)return;let e=st.buildBaseMessage(I.SensitiveStatus,Ft.Parent,this.h.projectId),i=this.Y_();this.fa(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,st.sendChannelMessage(t.port,e)}cb(t){if(!t.port)return;let e=st.buildBaseMessage(I.RecordingContext,Ft.Parent,this.h.projectId),i=this.W_();this.fa(t)&&(i.isRecording=!1),e.content=i,st.sendChannelMessage(t.port,e)}fh(t,e){if(e===void 0){V.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,r=t.data.content;i===I.EndOfBufferedMessages?(this.ab(e),this.cb(e),e.initialStatusSent=!0):this.jf(e.iframe,i,r)}uh(t){if(st.isMessageValid(t,Ft.Child,this.h.projectId,this.h.hostnames))switch(t.data.type){case I.Discovery:if(t.data.id===void 0){this.Hf();return}if(t.ports&&t.ports.length===1&&this.Ce.has(t.data.id)){this.ob(t.data.id,t.ports[0]);return}V.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case I.ChildLogMessage:this.jf(null,I.ChildLogMessage,t.data.content);break;default:V.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}fa(t){return k.isMaskedElement(t.iframe)||k.isMaskedElementChild(t.iframe)}}return s})(),Ly=(()=>{class s{constructor(t){this.lb=t}buildApiErrors(t,e){let i=this.lb.collectDataPoints(t,e);if(i===null)return null;let r=this.hb(t,i);if(e){let o=this.db(t,i);return{apiError:r,detailedApiError:o}}return{apiError:r}}db(t,e){let i=this.Bf(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Bf(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}hb(t,e){let i=this.Bf(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),Fl=(()=>{class s extends Qr{constructor(t,e,i){super(),this.ga=t,this.ma=e,this.pb=i,this.gh=0,this.fb=new Ly(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.gh++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.gh--,super.unsubscribe(t)}init(){let t=this.pb.computeApiErrorCollectionOptions();this.ga.setCollectionOptions(t),this.ga.onEvent(e=>this.Ff(e)),this.ma.setCollectionOptions(t),this.ma.onEvent(e=>this.Ff(e))}onStartTracking(){this.ga.start(),this.ma.start()}onStopTracking(){this.ga.stop(),this.ma.stop()}Ff(t){let e=this.fb.buildApiErrors(t,this.gh!==0);if(e)for(let i in this.subscriptions){let r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?e.detailedApiError&&r(e.detailedApiError):r(e.apiError)}}}return s})(),$l=(()=>{class s{constructor(t,e,i=!1){this.lt=t,this.K=e,this.Dr=i}addUrlMaskingPattern(t){this.lt.addUrlMaskingPattern(t)}anonymize(t){let e=this.K.removeQueryString(t.url),i={maskingPatterns:this.lt.getUrlMaskingPatterns(),partialMaskingPatterns:this.lt.getPartialUrlMaskingPatterns(),maskNames:this.Dr};return{...t,url:this.K.anonymizeUrl(e,i),library:t.library?this.K.anonymizeUrl(t.library,i):void 0}}}return s})(),Uy="CS_ANONYMIZED_VALUE",zl=(()=>{class s{constructor(t,e){this.I=t,this.A=e}anonymize(t){return z(t.message)&&(t.message=this.gb(t.message),t.message=this.I.anonymizePII(t.message)),z(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}gb(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${Uy}'`)}}return s})(),ql=(()=>{class s extends Qr{constructor(t){super(),this.mb=t,this.xs=[{boundElement:document,type:"touchstart",listener:e=>this.G(e)},{boundElement:document,type:"touchmove",listener:e=>this.G(e)},{boundElement:document,type:"touchend",listener:e=>this.G(e)}],this.xr=new hr,this.xr.onGesture((e,i)=>this.Sl(e,i))}Sl(t,e){for(let i in this.subscriptions){let r=this.subscriptions[i];r(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.xs,t=>It(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.xs,t=>Pt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}G(t){this.mb.tryToExecute("process gesture event",()=>{if(this.xr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.xr.processActionDown(t);break;case"touchmove":this.xr.processActionMove();break;case"touchend":this.xr.processActionUp(t);break}})()}static isSwipe(t){return t.type===wt.FLICK||t.type===wt.DRAG}}return s})(),Vy=(()=>{class s extends lt{constructor(t,e){super(),this.U=t,this.mh=e,this.$f=0}onStart(){V.isPerfLoggingActive()&&(this.Nr=window.csSetInterval(()=>this.zf(),s.yb))}onStop(){V.isPerfLoggingActive()&&(this.zf(),csClearInterval(this.Nr))}zf(){if(Fi.isEmpty||this.$f>=s.Eb)return;this.$f++;let t={a:s.vb,l:s.Sb,...this.mh.getRequestParameters()},e=[];Fi.forEach(i=>{csArray.prototype.forEach.call(i,r=>{csArray.prototype.push.call(e,{...r,...t})})}),this.U.send(e),Fi.clear()}}return s.vb="uxa",s.Sb="perf",s.yb=5e3,s.Eb=5,s})(),jy=(()=>{class s{constructor(t,e,i){this.h=t,this.mh=e,this.vt=i}init(){this.qf=new Vy(this.vt.create(this.h.getLoggerUri(),!0),this.mh)}onStartTracking(){this.qf.start()}onOptout(){this.qf.stop()}}return s})(),Hy=(()=>{class s{constructor(t){this.de=t,this.Gf=!1}enableRecordingContext(t,e,i){this.Gf=!0,this.Yi=t,this.w=e,this.Ai=i}getRecordingContext(){var t,e,i,r;if(!this.Gf)return{isRecording:!1,recordingStartTimestamp:0,etrState:Rt.ETR_OFF,etrStatus:kt.ETR_DISABLED,collectState:M.ANALYTICS_ONLY};let o=this.w.getSession();return{isRecording:this.Yi.isRecording(),useAnonymization:this.de.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Yi.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Yi.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Yi.getRecordingStartTimestamp(),10),etrState:(i=o==null?void 0:o.etrState)!==null&&i!==void 0?i:Rt.ETR_OFF,etrStatus:this.Ai.getEtrStatus(o),collectState:(r=o==null?void 0:o.collectState)!==null&&r!==void 0?r:M.ANALYTICS_ONLY}}}return s})(),Vs=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),By=(()=>{class s extends lt{constructor(t,e,i,r){super(),this.at=t,this.yh=e,this.Q=i,this.ce=r,this.ya=[],this.ks=0}init(){this.at.init()}initStates(){this.Eh(),this.ya=[],this.ks=0,this.Fl()}Fl(){this.es=O.now()}Pi(){return O.now()-this.es}onStart(){this.at.subscribe(s.Mt,t=>this.G(t))}onStop(){this.at.unsubscribe(s.Mt)}onIframeApiError(t){this.G(t)}G(t){this.isStarted&&this.ks<s.mr&&(t.relativeTime=this.Pi(),csArray.prototype.push.call(this.ya,this.ce.anonymize(t)),this.Lr(),rt.counters.networkRequests.count("collected"))}Eh(){this.yh.removeQueryParams(),this.yh.setQueryParams(this.Q.getRequestParameters())}Lr(){this.yh.send({errors:this.ya}),this.ya=[],this.ks+=1}}return s.Mt="ApiErrorsService",s.mr=20,s})(),Fy="api-errors",tn=["api-errors:maskUrl"],$y=(()=>{class s{constructor(t,e,i,r,o,c,l){this.at=t,this.ce=e,this.h=i,this.Q=r,this.it=o,this.f=c,this.vt=l}init(){let t=this.vt.create(`${this.h.getTrackerUri()}/${Fy}`,!0);this.Ni=new By(this.at,t,this.Q,this.ce),this.Ni.init(),this.it.addListener(this.Ni),this.ht()}ht(){this.f.register(tn,t=>{if(!z(t))throw new Error(`Command misuse: ${tn[0]}`);this.ce.addUrlMaskingPattern(t)})}onStartTracking(){this.Ni.start()}onAfterNaturalPageView(){this.Ni.initStates()}onAfterArtificialPageView(){this.Ni.initStates()}onBeforeSessionRenewal(){this.Ni.stop()}onOptout(){this.Ni.stop()}}return s})(),zy=20,qy="Custom Error:",Gy="https://cserror.com/texterror.js",Wy=(()=>{class s extends lt{constructor(t,e,i,r,o,c){super(),this._s=t,this.vh=e,this.Q=i,this.ae=r,this.$s=o,this.A=c,this.Ea=[],this.Si=0,this.Mi=[]}initStates(){this.es=O.now(),this.vh.removeQueryParams(),this.vh.setQueryParams(this.Q.getRequestParameters()),this.Ea=[],this.Si=0}onStart(){this._s.subscribe(s.Mt,t=>this.G(t)),this.Sh()}onStop(){this._s.unsubscribe(s.Mt)}onIframeJavascriptError(t){this.G(t)}trackCustomError(t){let e={errorType:"jsError",message:`${qy} ${t}`,lineno:1,colno:1,filename:Gy};this.Ur(e)}Ur(t){if(this.isStarted){let e=this.G(t);e&&this.$s.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.Mi,t)}Sh(){this.isStarted&&(csArray.prototype.forEach.call(this.Mi,t=>this.Ur(t)),this.Mi=[])}G(t){if(this.isStarted&&this.Si<zy){let e={...t,pageUrl:this.A.getAnonymizedUrl(),rt:this.Pi()};return this.ae.anonymize(e),csArray.prototype.push.call(this.Ea,e),this.Lr(),e}return null}Pi(){return O.now()-this.es}Lr(){this.vh.send({errors:this.Ea}),this.Ea=[],this.Si+=1}}return s.Mt="JavaScriptErrorsService",s})(),qs=["trackError"],Yy="errors",Xy=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this._s=t,this.ae=e,this.h=i,this.Q=r,this.it=o,this.f=c,this.$s=l,this.A=h,this.vt=p}init(){let t=this.vt.create(`${this.h.getTrackerUri()}/${Yy}`,!0);this.ki=new Wy(this._s,t,this.Q,this.ae,this.$s,this.A),this.it.addListener(this.ki),this.ht()}ht(){this.h.jsCustomErrorsEnabled&&!this.h.customErrors.enabled&&this.f.register(qs,t=>{this.ki.trackCustomError(t)})}onStartTracking(){this.ki.start()}onAfterNaturalPageView(){this.ki.initStates()}onAfterArtificialPageView(){this.ki.initStates()}onBeforeSessionRenewal(){this.ki.stop()}onOptout(){this.ki.stop()}}return s})(),Gl=(()=>{let s;return function(n){function o(h,p,u=!1){let y={message:at.truncate(h,300,at.ELLIPSIS),errorType:"customError"};return(u||l(p))&&(c(p),y.attributes=p),y}n.buildCustomErrorEvent=o;function c(h){for(let p in h){let u=h[p];if(typeof u=="string"&&u.length>30&&(u=at.truncate(u,30,at.ELLIPSIS),h[p]=u),p.length>30){let E=at.truncate(p,30,at.ELLIPSIS);delete h[p],h[E]=u}}}function l(h){let p=Object.keys(h).length;return p>0&&p<=5}}(s||(s={})),s})(),Ky=20,Qy=(()=>{class s extends lt{constructor(t,e,i,r,o){super(),this._h=t,this.Q=e,this.Xs=i,this.J=r,this.bs=o,this.va=[],this.wi=0,this.Mi=[]}initStates(){var t;this.Eh(),this.es=O.now(),this.va=[],this.wi=0,(t=this.bs)===null||t===void 0||t.onEvent(e=>this.G(e))}trackCustomError(t,e={}){if(!(z(t)&&Yt(e)&&Ot(e)))throw new Error(`Command misuse: ${qs[0]}`);let i=Gl.buildCustomErrorEvent(t,e);this.Ur(i)}onIframeCustomError(t){this.G(t)}onStart(){var t;this.Sh(),(t=this.bs)===null||t===void 0||t.start()}onStop(){var t;(t=this.bs)===null||t===void 0||t.stop()}Sh(){this.isStarted&&(csArray.prototype.forEach.call(this.Mi,t=>this.Ur(t)),this.Mi=[])}Ur(t){if(this.isStarted){let e=this.G(t);e&&this.J.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.Mi,t)}G(t){if(this.isStarted&&this.wi<Ky){let e=this.wb(t);return csArray.prototype.push.call(this.va,e),this.Lr(),e}return null}wb(t){let e={...t,rt:this.Pi()};return e.message=this.Xs.anonymize(t.message),e}Eh(){this._h.removeQueryParams(),this._h.setQueryParams(this.Q.getRequestParameters())}Pi(){return O.now()-this.es}Lr(){this._h.send({errors:this.va}),this.va=[],this.wi+=1}}return s})(),Jy="custom-errors",Zy=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.Xs=t,this.h=e,this.Q=i,this.f=r,this.$s=o,this.vt=c,this.it=l,this.bs=h}init(){let t=this.vt.create(`${this.h.getTrackerUri()}/${Jy}`,!0);this.Di=new Qy(t,this.Q,this.Xs,this.$s,this.bs),this.it.addListener(this.Di),this.ht()}ht(){this.f.register(qs,(t,e)=>{this.Di.trackCustomError(t,e)})}onStartTracking(){this.Di.start()}onAfterNaturalPageView(){this.Di.initStates()}onAfterArtificialPageView(){this.Di.initStates()}onBeforeSessionRenewal(){this.Di.stop()}onOptout(){this.Di.stop()}}return s})(),tE=(()=>{class s{constructor(){this.bh=Gi.Natural}setPageViewType(t){this.bh=t}getPageViewType(){return this.bh}getRequestParameters(){return{pvt:this.bh}}}return s})(),eE=(()=>{class s{constructor(t){this.X=t}onAfterVisitorRenewal(){this.X.renewSession()}}return s})();var Wl=(()=>{let s;return function(n){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,r=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",r)}n.generate=t;function e(i){let r=0;for(let o=0;o<i.length;o+=1)r=csString.prototype.charCodeAt.call(i,o)+(r<<6)+(r<<16)-r;return Math.abs(r)}}(s||(s={})),s})();var Ee;(function(s){s.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",s.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",s.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",s.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"})(Ee||(Ee={}));var re;(function(s){s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(re||(re={}));var Jr=(()=>{class s{constructor(t,e,i,r){this.pe=t,this.h=e,this.A=i,this.Sa=r}init(){this.Vb()}shouldMaskNonTextElements(){return this.h.isSMB&&this.h.anonymisationMethod===Ee.replayRecordingMaskedUrlRegexRules&&this.shouldUseAnonymization()}shouldUseAnonymization(){if(this.pe.isReplayUnanonymizedAllowedByConsent()){switch(this.h.anonymisationMethod){case null:case Ee.replayRecordingMaskedUrlRegex:return!!(this.h.replayRecordingMaskedUrlRegex&&this.h.replayRecordingMaskedUrlRegex.test(this.A.getAnonymizedUrl()));case Ee.replayRecordingMaskedUrlRegexRules:return this.Sa.evaluateUrl(this.A.getAnonymizedUrl())}return!1}else{switch(this.h.anonymisationMethod){case null:case Ee.replayRecordingUnmaskedUrlRegex:return!(this.h.replayRecordingUnmaskedUrlRegex&&this.h.replayRecordingUnmaskedUrlRegex.test(this.A.getAnonymizedUrl()));case Ee.replayRecordingUnmaskedUrlRegexRules:return!this.Sa.evaluateUrl(this.A.getAnonymizedUrl())}return!0}}Vb(){this.h.anonymisationMethod===Ee.replayRecordingMaskedUrlRegexRules&&this.h.replayRecordingMaskedUrlRegexRules?this.Sa.setRegexRules(this.h.replayRecordingMaskedUrlRegexRules):this.h.anonymisationMethod===Ee.replayRecordingUnmaskedUrlRegexRules&&this.h.replayRecordingUnmaskedUrlRegexRules&&this.Sa.setRegexRules(this.h.replayRecordingUnmaskedUrlRegexRules)}}return s})(),Zr=(()=>{class s{constructor(){this.Jf=[]}setRegexRules(t){this.Jf=csArray.prototype.map.call(t,e=>this.jb(e))}evaluateUrl(t){return csArray.prototype.some.call(this.Jf,e=>{var i,r;let o=this.Hb(t,e);return e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):(r=e.regex)===null||r===void 0?void 0:r.test(o)})}Hb(t,e){let i=kr(t);return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}wa(t){return t.ignoreCaseSensitivity?"i":""}jb(t){switch(t.operator){case re.NOT_START:t.notOperator=!0;case re.START:t.regex=new csRegExp(`^${t.value}`,this.wa(t));break;case re.NOT_END:t.notOperator=!0;case re.END:t.regex=new csRegExp(`${t.value}$`,this.wa(t));break;case re.NOT_CONTAIN:t.notOperator=!0;case re.CONTAIN:t.regex=new csRegExp(`${t.value}`,this.wa(t));break;case re.NOT_EXACT:t.notOperator=!0;case re.EXACT:t.regex=new csRegExp(`^${t.value}$`,this.wa(t));break;default:V.warn(`buildRegexWithRule, unknown type: ${t.operator}`)}return t}}return s})(),sE=0,Yl=(()=>{class s{constructor(){this.Bb=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.Ih=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return tr(this.Bb,r=>Ae(i,r))}canCollect(t,e){return this.Fb(t,e)&&this.$b(e)}Fb(t,e){return t>=400||t>=200&&t<300&&this.Ih.statusCodes.has(t)&&this.Ph(e)}Ph(t){return tr(this.Ih.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}$b(t){return Qd(this.Ih.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),Xl=(()=>{class s extends Yl{constructor(){super(),this.Ft=csSymbol("ApiCall"),this.N=!1,this.bn=null,this.An=null,this._a=null,this.zb=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.qb=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.Gb=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.O=t}start(){this.N||(this.Oh(),this.bn&&this.bn.activate(),this.An&&this.An.activate(),this._a&&this._a.activate(),this.N=!0)}stop(){this.N&&(this.bn&&this.bn.deactivate(),this.An&&this.An.deactivate(),this.N=!1)}Oh(){this.bn||(this.bn=ee({target:XMLHttpRequest.prototype,methodName:"open",hook:this.zb,options:{withCallerName:!0}})),this.An||(this.An=ee({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.qb})),this._a||(this._a=ee({target:XMLHttpRequest.prototype,methodName:"send",hook:this.Gb}))}interceptOpen(t,e,i){if(!e[1]||!z(e[1]))return;let[r,o]=csString.prototype.split.call(e[1],"?");t[this.Ft]={library:i,requestTime:O.now(),method:e[0],url:fe(r),queryParameters:o,statusCode:sE,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.Ft]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.Ft].url)&&(t[this.Ft].responseTime=O.now(),t[this.Ft].statusCode=t.status,t[this.Ft].responseHeaders=this.Wb(t.getAllResponseHeaders()),super.isValidBodyType(t[this.Ft].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.Ft].responseBody=t.responseText),this.O(t[this.Ft]))}interceptSetRequestHeader(t,e){if(!t[this.Ft])return;let i=e[0],r=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||r.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.Ft].requestHeaders[i]?t[this.Ft].requestHeaders[i]+=`, ${r}`:t[this.Ft].requestHeaders[i]=r)}interceptSend(t,e){t[this.Ft]&&super.isValidBodyType(t[this.Ft].requestHeaders)&&typeof e[0]=="string"&&(t[this.Ft].requestBody=e[0])}Wb(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[r,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(o))}),e}}return H([D("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),H([D("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),H([D("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),H([D("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),Kl=(()=>{class s extends Yl{constructor(){super(),this.N=!1,this.Tn=null,this.Yb=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.O=t}start(){this.N||this.Xb()&&(this.Kb(),this.Tn&&this.Tn.activate(),this.N=!0)}stop(){this.N&&(this.Tn&&this.Tn.deactivate(),this.N=!1)}Xb(){return!!window.fetch&&typeof window.fetch=="function"}Qb(t){if(t[0]&&typeof t[0].clone=="function"){let e=Ms(t);return e[0]=t[0].clone(),e}return t}Kb(){this.Tn||(this.Tn=ee({target:window,methodName:"fetch",hook:this.Yb,hookPrepareArgs:this.Qb,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let r=e[0],o=e[1],c=new Request(r,o);if(!z(c.url))return;let l=O.now(),h;try{h=await t}catch(y){if(this.Jb(y)||this.Zf(y)||this.Zb(y)||this.tA(y))return;throw y}let[p,u]=csString.prototype.split.call(c.url,"?"),E=fe(p);if(h&&super.canCollect(h.status,E)){let y={library:i,method:c.method,url:E,queryParameters:u,requestTime:l,responseTime:O.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.tg(c.headers),responseHeaders:this.tg(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(y.responseHeaders))try{y.responseBody=await h.clone().text()}catch(S){if(this.Zf(S))return}super.isValidBodyType(y.requestHeaders)&&(y.requestBody=await c.text()),this.O(y)}}Jb(t){return t instanceof TypeError}Zf(t){return t instanceof DOMException&&t.name==="AbortError"}tA(t){return t instanceof DOMException&&t.name==="TimeoutError"}Zb(t){return t instanceof DOMException&&csArray.prototype.some.call(s.eA,e=>e===t.name)}tg(t){let e={};return t.forEach((i,r)=>{i&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(i))}),e}}return s.eA=["NoModificationAllowedError","InvalidStateError","OperationError"],H([D("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),iE=(()=>{class s{constructor(){this.sA=64e3,this.iA=5e3,this.nA=2e3,this.eg=8e3,this.ms=!!self.TextEncoder,this.ms&&(this.rA=new TextEncoder)}Hr(t){return this.rA.encode(t).byteLength}sg(t,e,i){let r=0;t[e]&&(r+=this.Hr(t[e]),r>this.eg&&(r=0,t[e]=at.ELLIPSIS)),t[i]&&(r+=this.Hr(csJSON.stringify(t[i])),r>this.eg&&(t[i]=s.truncatedObjectMarker))}oA(t){t.queryParameters&&this.Hr(t.queryParameters)>this.nA&&(t.queryParameters=at.ELLIPSIS)}aA(t){t.requestBody&&this.Hr(t.requestBody)>this.sA&&(t.requestBody=at.ELLIPSIS),t.responseBody&&this.Hr(t.responseBody)>this.iA&&(t.responseBody=at.ELLIPSIS)}truncate(t){this.ms?(this.oA(t),this.aA(t),this.sg(t,"customResponseHeaders","plainCustomResponseHeaders"),this.sg(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[at.ELLIPSIS]:at.ELLIPSIS},s})(),nE=(()=>{let s;return function(n){function t(r){let o="[",c="]",l=[];for(let h=0;h<r.length;++h)if(r[h]===o)csArray.prototype.push.call(l,r[h]);else if(r[h]===c)if(csString.prototype.indexOf.call(r,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(r){if(!r)return!0;if(!t(r))return!1;let o=csString.prototype.split.call(r,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let p=csString.prototype.split.call(c,".");return p[0].length===0&&csArray.prototype.shift.call(p),csArray.prototype.every.call(p,u=>{let E=/^\-?\d+$/.exec(u);return E?parseInt(E[0],10)>=0:u==="$"||/\w+/.test(u)})})}n.isValidJSONPath=e;function i(r,o){if(!r)return;let c=csString.prototype.split.call(r,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,p=>{if(p[0]==="'"||p[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(p,1,p.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(p,"."),u=>u.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let p of l)if(h[p]!==void 0)h=h[p];else return;return h}n.getJSONPathValue=i}(s||(s={})),s})(),rE=(()=>{class s{constructor(){this.cA=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.cA.has(t)}}return s})(),Ql=(()=>{class s{constructor(){this.lA=64e3,this.hA=100,this.L={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.ig=new rE}uA(t){return t.length<=this.lA}dA(t){let e=t["content-type"];return e!==void 0&&(Re(e,"application/json")||Re(e,"application/graphql"))}pA(t,e){return t&&this.uA(t)&&this.dA(e)}ba(t,e,i,r){let o=r==="request"?this.fA:this.gA;if(o!==void 0||this.pA(e,i)){if(o===void 0)try{o=csJSON.parse(e),r==="request"?this.fA=o:this.gA=o}catch{return}let c=nE.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!Yt(c))){let l=z(c)?c:csJSON.stringify(c);return at.truncate(l,this.hA,at.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,r;return(e.type==="request-response"||e.type==="response")&&(i=this.ba(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(r=this.ba(e.path,t.requestBody,t.requestHeaders,"request")),J(i)||J(r)}collectBodyAttribute(t,e,i){let r;(e.type==="request-response"||e.type==="response")&&(r=this.ba(e.path,t.responseBody,t.responseHeaders,"response"),r&&(e.encrypted?this.L.responseBodyAttributes[e.path]=r:(r=i(r),this.L.plainResponseBodyAttributes[e.path]=r))),(e.type==="request-response"||e.type==="request")&&(r=this.ba(e.path,t.requestBody,t.requestHeaders,"request"),r&&(e.encrypted?r&&(this.L.requestBodyAttributes[e.path]=r):(r=i(r),this.L.plainRequestBodyAttributes[e.path]=r)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.L.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.L.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let r=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[r]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.L.customResponseHeaders[r]=t.responseHeaders[r]:this.L.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),t.requestHeaders[r]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.L.customRequestHeaders[r]=t.requestHeaders[r]:this.L.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))}collectStandardHeaders(t){if(!(Object.keys(this.L.standardRequestHeaders).length>0||Object.keys(this.L.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.ig.isValidStandardHeader(e)&&(this.L.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.ig.isValidStandardHeader(e)&&(this.L.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.L.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.L.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.L.collectRequestBody=!0)}getCollectedDataPoints(){return this.L}}return s})(),_e=(()=>{let s;return function(n){n.CONTENTSQUARE="contentsquare.net",n.CLICKTALE="clicktale.net",n.FAKE_TRACKER="fake-tracker.content-square.fr"}(s||(s={})),s})(),Jl=(()=>{class s{computeApiErrorCollectionOptions(){let t=new Set,e=[];if(this.rules)for(let r of this.rules)r.statusCode!==void 0&&t.add(r.statusCode),r.url!==void 0&&csArray.prototype.indexOf.call(e,r.url)===-1&&csArray.prototype.push.call(e,r.url);let i=[_e.CONTENTSQUARE,_e.CLICKTALE];return csArray.prototype.push.call(i,_e.FAKE_TRACKER),{statusCodes:t,urls:e,excludedDomains:i}}}return s})(),Zl=(()=>{class s extends Jl{constructor(t,e){super(),this.Tt=t,this.I=e,this.rules=t.collectionRules}collectDataPoints(t,e){this.L=new Ql;let i=!1;if(this.Tt.collectionRules)for(let r of this.Tt.collectionRules)this.mA(r,t)&&this.yA(r,t)&&this.EA(r,t)&&(i=!0,this.vA(t,r,e));return i||(i=this.SA(t)),i&&e&&this.Tt.collectStandardHeaders&&this.L.collectStandardHeaders(t),i?this.L.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Tt.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[_e.CONTENTSQUARE,_e.CLICKTALE];return csArray.prototype.push.call(r,_e.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}mA(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}yA(t,e){return t.bodyContent?this.L.isBodyContentMatching(e,t.bodyContent):!0}EA(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,r=>r.primary);return i===void 0?!0:this.L.isBodyAttributeValueFound(e,i)}SA(t){return t.statusCode>=400}vA(t,e,i){e.bodyContent&&this.L.collectBodyContent(e.bodyContent);let r=we(e.bodyAttributePaths,o=>o.primary===1);if(r&&this.L.collectBodyAttribute(t,r,o=>this.I.anonymizePII(o)),i){this.L.setCollectQueryParam(e.collectQueryParam),this.L.setCollectResponseBody(e.collectResponseBody),this.L.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.L.collectCustomHeaders(t,c,l=>this.I.anonymizePII(l));let o=Ir(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.L.collectBodyAttribute(t,c,l=>this.I.anonymizePII(l))}}}return s})(),th=(()=>{class s extends Jl{constructor(t,e){super(),this.Tt=t,this.I=e,this.rules=t.configurableApiErrorRules}collectDataPoints(t,e){this.L=new Ql;let i=this.wA(t,this.Tt.configurableApiErrorRules);return i.isMatching?(i.matchingBodyContents.length>0&&this.L.collectBodyContent(i.matchingBodyContents[0]),e&&this._A(t),this.L.getCollectedDataPoints()):null}computeApiErrorCollectionOptions(){let t=this.Tt.configurableApiErrorRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[_e.CONTENTSQUARE,_e.CLICKTALE];return csArray.prototype.push.call(r,_e.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}wA(t,e){if(t.statusCode>=400)return{isMatching:!0,matchingBodyContents:[]};if(e){for(let i of e)if(this.bA(t,i))return{isMatching:!0,matchingBodyContents:i.bodyContent?[i.bodyContent]:[]}}return{isMatching:!1,matchingBodyContents:[]}}bA(t,e){return!!(t.statusCode===e.statusCode&&csString.prototype.indexOf.call(t.url,e.url)!==-1&&(!e.bodyContent||this.L.isBodyContentMatching(t,e.bodyContent)))}_A(t){this.Tt.collectStandardHeaders&&this.L.collectStandardHeaders(t),this.Tt.validCustomHeaders&&this.ng(t,this.Tt.validCustomHeaders,1),this.Tt.plainCustomHeaders&&this.ng(t,this.Tt.plainCustomHeaders,0),this.Ph(t.url,this.Tt.validUrls)&&(this.Tt.collectQueryParam&&this.L.setCollectQueryParam(Number(this.Tt.collectQueryParam)),this.Tt.collectResponseBody&&this.L.setCollectResponseBody(Number(this.Tt.collectResponseBody)),this.Tt.collectRequestBody&&this.L.setCollectRequestBody(Number(this.Tt.collectRequestBody)))}ng(t,e,i){for(let r of e)this.L.collectCustomHeaders(t,{headerName:r,encrypted:i,type:"request-response"},o=>this.I.anonymizePII(o))}Ph(t,e){return e?csArray.prototype.some.call(e,i=>csString.prototype.indexOf.call(t,i)!==-1):!1}}return s})();function oE(s){return W.traverse(s,n=>{if(n.nodeType===11){let t=W.getProperty(n,"styles");t&&(n.adoptedStyleSheets=t)}}),s}function aE(s){if(s!=null&&s.length)return de(s,n=>lE(n))}function cE(){zt(document).visitAll(s=>{var n;if(Ns(s)&&((n=s.adoptedStyleSheets)===null||n===void 0?void 0:n.length)>0){let t=aE(s.adoptedStyleSheets);W.setProperty(s,"styles",t)}})}function lE(s){let n=[];try{n=de(s.cssRules,t=>t.cssText)}catch{}return{cssRules:n}}var eh=(()=>{class s extends ge{constructor(t){super(),this.V=null,this.Aa=null,this.P=null,this.js=null,this.rg=["value","checked","src","data","alt"],this.Ta={state:k.MaskedElementState.Child},this.TA=e=>{for(let i of e){if(k.isMaskedElement(i.target)||k.isMaskedElementChild(i.target))for(let r=0;r<i.addedNodes.length;r+=1){let o=i.addedNodes[r];k.isMaskedElement(o)||k.isMaskedElementChild(o)||ct(o)&&this.og(o)}for(let r=0;r<i.removedNodes.length;r+=1){let o=i.removedNodes[r];yt.isConnected(o)||this.ag(o)}}},this.RA=t}setMaskedElementSettings(t){this.As=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,r;this.As||(ut.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.As={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.As;(t=this.js)!==null&&t!==void 0||(this.js=this.CA()),o.length!==0&&((e=this.V)!==null&&e!==void 0||(this.V=this.IA()),this.V.observe(o)),c.length!==0&&((i=this.Aa)!==null&&i!==void 0||(this.Aa=this.PA(l)),this.Aa.observe(c)),(r=this.P)!==null&&r!==void 0||(this.P=new Ie(this.TA,(h,p)=>p==="added"&&this.OA(h))),this.P.observe(),csSetTimeout(this.RA)}onStop(){var t,e,i;this.V&&(this.ag(document),this.V.disconnect()),(t=this.Aa)===null||t===void 0||t.disconnect(),(e=this.P)===null||e===void 0||e.disconnect(),(i=this.js)===null||i===void 0||i.disconnect()}CA(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}IA(){return new Us(t=>{csArray.prototype.forEach.call(t,e=>{this.NA(e)?this.og(e):(this.MA(e),this.kA(e))})})}PA(t){return new Us(e=>{csArray.prototype.forEach.call(e,i=>this.DA(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=k.getMaskedElementDetails(t.target);if(i.state!==k.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let r={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t.target,r),this.produceEvent({type:"ResizeMaskedElement",target:it(t.target),width:e.width,height:e.height})}kA(t){!this.js||!ct(t)||sn(t)||this.js.observe(t)}NA(t){let e=csNodeparentNode.apply(t);return e?k.isMaskedElement(e)||k.isMaskedElementChild(e):Ns(t)?k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host):!1}OA(t){(k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host))&&k.setMaskedElementProperty(t,this.Ta)}ag(t){zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{k.unsetMaskedElementProperty(i)})}MA(t){let e=t.getBoundingClientRect(),i={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t,i),this.xA(t),zt(t).visitAll(r=>r!=t&&k.setMaskedElementProperty(r,this.Ta))}og(t){k.setMaskedElementProperty(t,this.Ta),zt(t).visitAll(e=>e!=t&&k.setMaskedElementProperty(e,this.Ta))}xA(t){var e;let i=(e=W.getProperty(t,k.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let r=0;r<this.rg.length;r+=1){let o=this.rg[r];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&k.setMaskedAttributeProperty(t,i)}DA(t,e){var i;let r=(i=W.getProperty(t,k.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(r.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Kt.call(t,l.selector))&&csArray.prototype.push.call(r.attributes,c)}r.attributes.length!==0&&k.setMaskedAttributeProperty(t,r)}}return Ce([D()],s.prototype,"resizeObserverCallback",null),s})(),sh=(()=>{class s{constructor(){this.Nh=0,this.N=!1,this.cg="data-cs-capture",this.Ys=t=>{for(let e of t){if(ae.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];ae.isWhitelistedElement(r)||ct(r)&&this.lg(r)}for(let i=0;i<e.removedNodes.length;i+=1){let r=e.removedNodes[i];yt.isConnected(r)||this.hg(r)}}}}start(){this.Nh++,!this.N&&(this.N=!0,this.LA())}LA(){this.V||(this.V=new Us(e=>X(e,i=>this.lg(i))));let t=this.Mh?`[${this.cg}], ${this.Mh}`:`[${this.cg}]`;this.V.observe(t),this.P||(this.P=new Ie(this.Ys,(e,i)=>i==="added"&&this.UA(e))),this.P.observe()}stop(){this.N&&(this.Nh--,this.Nh===0&&(this.N=!1,this.VA()))}VA(){this.V&&(this.hg(document),this.V.disconnect()),this.P&&this.P.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Ps(t))this.Mh=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Mh}lg(t){zt(t).visitAll(e=>{ae.whitelistElement(e)})}UA(t){ae.isWhitelistedElement(t.host)&&ae.whitelistElement(t)}hg(t){zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{ae.removeWhitelistElement(i)})}}return s})(),ih=(()=>{class s{constructor(){this.V=null,this.P=null,this.N=!1,this.Ys=t=>{for(let e of t)if(Se.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];if(!Se.isEditableNode(r)){if(Wi(r)||gd(r)){Se.markEditableNode(r);continue}ct(r)&&this.ug(r)}}}}start(){this.N||(this.N=!0,this.V=new Us(t=>X(t,e=>{this.ug(e)})),this.V.observe("[contenteditable]"),this.P=new Ie(this.Ys,(t,e)=>e==="added"&&this.jA(t)),this.P.observe())}stop(){var t,e;this.N&&(this.N=!1,(t=this.V)===null||t===void 0||t.disconnect(),this.V=null,(e=this.P)===null||e===void 0||e.disconnect(),this.P=null)}ug(t){zt(t).visitAll(e=>{Se.markEditableNode(e)})}jA(t){Se.isEditableNode(t.host)&&Se.markEditableNode(t)}}return s})();var hE=s=>{let n=s*60*1e3;return`${Math.floor(csDate.now()/n)}`},uE=5e3,dE=(()=>{class s extends ac{constructor(t,e,i){super(t,e),this.Rn=null,this.BA=(i==null?void 0:i.type)||"json",this.pg=i==null?void 0:i.cacheMinutes,this.Fn=i==null?void 0:i.timeout}onLoad(t){this.Vi=t}onError(t){this.Bn=t}onTimeout(t,e){this.ai=t,this.Fn=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,r=>r());let t=this.retrieveParameters();this.ic(t);let e=gi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.eh(i,this.BA)}abort(){this.Rn&&(this.Rn.abort(),this.Rn=null)}isInProgress(){return this.Rn!==null}eh(t,e){var i;let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onerror=()=>{var o;return(o=this.Bn)===null||o===void 0?void 0:o.call(this,r)},r.ontimeout=()=>{var o;return(o=this.ai)===null||o===void 0?void 0:o.call(this,r)},r.onload=()=>{var o,c;r.status>=200&&r.status<400?((o=this.Vi)===null||o===void 0||o.call(this,this.FA(r,e)?r.response:r.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Bn)===null||c===void 0||c.call(this,r)},r.onloadend=()=>{this.Rn=null},r.timeout=(i=this.Fn)!==null&&i!==void 0?i:uE,this.Rn=r,r.send()}FA(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}ic(t){let e;this.pg?e=`${hE(this.pg)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var pE=["identify"],fE=["getIdentity"],gE=["resetIdentity"];var mE=(()=>{class s{constructor(t,e,i,r,o){this.ot=t,this.mt=e,this.ge=i,this.Ot=r,this.tt=o}getSensitiveStatus(){var t,e;return{started:this.ge.isStarted,useAnonymization:this.ot.shouldUseAnonymization(),capturedElementSelector:this.Ot.getWhitelistedElementsSelector(),maskedElementSettings:this.mt.getMaskedElementSettings((t=this.ot)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.ge.isStarted,i=this.ot.shouldUseAnonymization();return e?k.isMaskedElement(t)||k.isMaskedElementChild(t)?xt.MASKED:Fc.shouldEncrypt(t)?xt.ENCRYPTED:Se.isEditableNode(t)?xt.ANONYMIZED:i?ae.isWhitelistedElement(t)?xt.CAPTURED:xt.ANONYMIZED:xt.CAPTURED:xt.ANONYMIZED}}return s})(),nh=["setEncryptionSelectors"],gn=["setPIISelectors"],to=["setCapturedElementsSelector"],yE=(()=>{class s{constructor(t,e,i,r,o,c,l){this.E=t,this.f=e,this.mt=i,this.ge=r,this.Ot=o,this.tt=c,this.Pn=l}init(){var t,e;this.Pn&&this.tt&&((t=this.Pn)===null||t===void 0||t.addSelector((e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.ge.start(),this.E.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.ge.start(),this.E.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onOptout(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.E.emitSensitiveStatusChange()}ht(){this.f.register(gn,t=>{this.mt.setMaskedElementSettingsFromCommand(t),this.E.emitSensitiveStatusChange()}),this.f.register(to,t=>{this.Ot.setWhitelistedElementsSelector(t),this.E.emitSensitiveStatusChange()}),this.f.register(nh,t=>{var e,i;(e=this.tt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Pn)===null||i===void 0||i.addSelector(t)})}}return s})(),eo=(()=>{class s extends lt{constructor(t,e,i,r,o,c){super(),this.jt=t,this.mt=e,this.Ot=i,this.Pn=r,this.On=o,this.ot=c}onStart(){var t,e,i;this.Ot.start(),this.jt.setMaskedElementSettings(this.mt.getMaskedElementSettings((t=this.ot)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.jt.startIdentifier(),(e=this.Pn)===null||e===void 0||e.start(),(i=this.On)===null||i===void 0||i.start()}onStop(){var t,e;this.Ot.stop(),this.jt.stopIdentifier(),(t=this.Pn)===null||t===void 0||t.stop(),(e=this.On)===null||e===void 0||e.stop()}}return s})(),so=["networkRequest:maskUrls"],io=["networkRequest:maskUrls:reset"],EE=(()=>{class s{constructor(t,e){this.yg=t,this.lt=e}init(){this.yg.register(so,t=>{if(z(t)){this.lt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)z(e)&&this.lt.addPartialUrlMaskingPattern(e)}),this.yg.register(io,()=>this.lt.resetPartialUrlMaskingPatterns())}}return s})(),vE=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,SE="$1$4CS_ANONYMIZED_NAME$3$6",wE=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,_E="CS_ANONYMIZED_PHONE",rh=(()=>{class s{constructor(t,e){this.I=t,this.K=e}anonymize(t){return this.K?csArray.prototype.join.call(csArray.prototype.map.call(Mf(t),({content:e,isUrl:i})=>{var r;return i?(r=this.K)===null||r===void 0?void 0:r.anonymizeUrl(e,{maskNames:!0}):this.Eg(e)}),""):this.Eg(t)}Eg(t){t=this.I.anonymizePII(t);let e=t;t=this.Dr(t),t!==e&&(rt.counters.redactedPII.count("name"),rt.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.eT(t),t!==i&&(rt.counters.redactedPII.count("phone"),rt.counters.redactedPII.count("phone-in-custom-error")),t}Dr(t){return csString.prototype.replace.call(t,vE,SE)}eT(t){return csString.prototype.replace.call(t,wE,_E)}}return s})(),xa=(()=>{let s;return function(n){function t(u,E){for(let y of u)if(i(y,E))return!0;return!1}n.isUrlMatching=t;function e(u,E){if(z(E)){for(let y of u)if(i(y,E))return!0}else if(Qn(E)){for(let y of u)if(i(y,csString(E)))return!0}return!1}n.isMatching=e;function i(u,E){let y=r(u,E);return u.negate?!y:y}function r(u,E){switch(u.rule_type==="date"&&(u.match_operation==="less_than"||u.match_operation==="greater_than")&&(E=(new csDate(E).valueOf()/1e3).toFixed(0)),u.match_operation){case"exact":switch(u.rule_type){case"string":return z(u.pattern)?csString.prototype.toLowerCase.call(E)===csString.prototype.toLowerCase.call(u.pattern):!1;case"boolean":return E===u.pattern||E===csString(u.pattern);case"number":return Ot(E)?Number(E)===Number(u.pattern):!1;default:return E===u.pattern}case"starts_with":return z(u.pattern)?csString.prototype.indexOf.call(E,u.pattern)===0:!1;case"ends_with":return z(u.pattern)?Si(E,u.pattern):!1;case"contains":return z(u.pattern)?csString.prototype.indexOf.call(E,u.pattern)!==-1:!1;case"regex":if(!z(u.pattern))return!1;try{return new csRegExp(u.pattern).test(E)}catch(y){return V.warn(`targeting.matchOperation.regex invalid ${y==null?void 0:y.message}`),!1}case"simple":return z(u.pattern)?p(E)===p(u.pattern):!1;case"greater_than":return Number(E)>Number(u.pattern);case"less_than":return Number(E)<Number(u.pattern);case"exact_date":{let y=Number(u.pattern);if(!le(y))return!1;let S=new csDate(y*1e3);return new csDate(E).toDateString()===S.toDateString()}case"exact_days_ago":return o(u,E);case"more_than_days_ago":return c(u,E);case"less_than_days_ago":return l(u,E);case"unknown":return h(E);default:return V.warn(`targeting.matchOperation.regex not managed operation ${u.match_operation}`),!1}}function o(u,E){let y=new csDate,S=y.setDate(y.getDate()-Number(u.pattern)),A=new csDate(S);return new csDate(E).toDateString()===A.toDateString()}function c(u,E){let y=Number(u.pattern);if(!le(y))return!1;let S=Number(y)+1,A=new csDate,C=new csDate(A);return C.setDate(A.getDate()-S),new csDate(E).getTime()<=C.getTime()}function l(u,E){let y=Number(u.pattern);if(!le(y))return!1;if(y===0)return o(u,E);let S=new csDate,A=new csDate(S);return A.setDate(S.getDate()-y),new csDate(E).getTime()>=A.getTime()}function h(u){return Ot(u)?z(u)?csString.prototype.trim.call(u)==="":Qn(u)?u===!0:le(u)?u!==0:!1:!0}function p(u){let E=Re(u,"http://")||Re(u,"https://")?u:`https://${u}`,y=kr(E);return y!==null?csString.prototype.replace.call(y.host,/^www./,""):u}}(s||(s={})),s})(),bE=(()=>{class s{constructor(){this.vg=[],this.Sg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.vg,e):e.component==="trigger"&&csArray.prototype.push.call(this.Sg,e)}matchUrl(t){return xa.isUrlMatching(this.vg,t)}matchTrigger(t){return xa.isMatching(this.Sg,t)}}return s})(),AE=(()=>{class s extends lt{constructor(t,e,i){super(),this.Ca=t,this.jh=e,this.A=i}init(){this.Hh=new bE,this.Ca&&this.Hh.setTargetingRules(this.Ca)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.Bh(t,"url")&&this.jh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Bh(t,"url")&&this.jh()}onExternalEvent(t){this.isStarted&&this.Bh(t.name,"trigger")&&this.jh()}Bh(t,e){var i,r;return e==="url"&&z(t)&&(!((i=this.Hh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((r=this.Hh)===null||r===void 0)&&r.matchTrigger(t)))}}return s})(),TE=(()=>{class s{constructor(t,e,i,r,o,c){this.Ca=t,this.sT=e,this.E=i,this.et=r,this.J=o,this.A=c}init(){this.Br=new AE(this.Ca,this.sT,this.A),this.J.addListener(this.Br),this.Br.init()}start(){this.Br.start()}stop(){this.Br.stop()}checkInitialUrlTargetingRules(){this.Br.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.et.getInitialCollectState();t===M.ANALYTICS_ONLY?this.E.emitCollectStateChange(M.ANALYTICS_ONLY_RULES_TARGETING,Rt.ETR_OFF):t===M.RECORDING_GLOBAL_SAMPLING&&this.E.emitCollectStateChange(M.RECORDING_RULES_TARGETING,Rt.ETR_OFF)}}return s})();var RE=["addUserProperties"];var CE=(()=>{let s;return function(n){n.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),IE=(()=>{class s{constructor(){}static init(t){(!this.Fh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Fh=new Map,i){let r=csString.prototype.split.call(i,".");for(let o=0;o<r.length;o++){let[c,l]=csString.prototype.split.call(r[o],"=");this.Fh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Fh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(CE.COMPRESSION_DISABLED)}static Log(t){return(e,i,r)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=r.value;PE(s.getString("debugLog"),t)&&(r.value=function(...p){return console.log(l,...p),h.bind(this)(...p)})}}}return s})();function PE(s,n){var t;return s==null?!1:s===n||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+n+")(,|$)")))===null||t===void 0)&&t.length)}function La(){function i(a){let f=a.length;for(;--f>=0;)a[f]=0}let r=0,o=1,c=2,l=3,h=258,p=29,u=256,E=u+1+p,y=30,S=19,A=2*E+1,C=15,R=16,_=7,j=256,b=16,x=17,B=18,G=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),et=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),dt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),pt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=512,N=new Array((E+2)*2);i(N);let L=new Array(y*2);i(L);let F=new Array(v);i(F);let tt=new Array(h-l+1);i(tt);let ft=new Array(p);i(ft);let Nt=new Array(y);i(Nt);function Pe(a,f,g,m,d){this.static_tree=a,this.extra_bits=f,this.extra_base=g,this.elems=m,this.max_length=d,this.has_stree=a&&a.length}let es,yn,Es;function Oe(a,f){this.dyn_tree=a,this.max_code=0,this.stat_desc=f}let Gs=a=>a<256?F[a]:F[256+(a>>>7)],me=(a,f)=>{a.pending_buf[a.pending++]=f&255,a.pending_buf[a.pending++]=f>>>8&255},_t=(a,f,g)=>{a.bi_valid>R-g?(a.bi_buf|=f<<a.bi_valid&65535,me(a,a.bi_buf),a.bi_buf=f>>R-a.bi_valid,a.bi_valid+=g-R):(a.bi_buf|=f<<a.bi_valid&65535,a.bi_valid+=g)},Ut=(a,f,g)=>{_t(a,g[f*2],g[f*2+1])},Ws=(a,f)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--f>0);return g>>>1},En=a=>{a.bi_valid===16?(me(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},vn=(a,f)=>{let g=f.dyn_tree,m=f.max_code,d=f.stat_desc.static_tree,T=f.stat_desc.has_stree,w=f.stat_desc.extra_bits,P=f.stat_desc.extra_base,Q=f.stat_desc.max_length,$,Bt,je,ot,os,ws,ki=0;for(ot=0;ot<=C;ot++)a.bl_count[ot]=0;for(g[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<A;$++)Bt=a.heap[$],ot=g[g[Bt*2+1]*2+1]+1,ot>Q&&(ot=Q,ki++),g[Bt*2+1]=ot,!(Bt>m)&&(a.bl_count[ot]++,os=0,Bt>=P&&(os=w[Bt-P]),ws=g[Bt*2],a.opt_len+=ws*(ot+os),T&&(a.static_len+=ws*(d[Bt*2+1]+os)));if(ki!==0){do{for(ot=Q-1;a.bl_count[ot]===0;)ot--;a.bl_count[ot]--,a.bl_count[ot+1]+=2,a.bl_count[Q]--,ki-=2}while(ki>0);for(ot=Q;ot!==0;ot--)for(Bt=a.bl_count[ot];Bt!==0;)je=a.heap[--$],!(je>m)&&(g[je*2+1]!==ot&&(a.opt_len+=(ot-g[je*2+1])*g[je*2],g[je*2+1]=ot),Bt--)}},Ys=(a,f,g)=>{let m=new Array(C+1),d=0,T,w;for(T=1;T<=C;T++)m[T]=d=d+g[T-1]<<1;for(w=0;w<=f;w++){let P=a[w*2+1];P!==0&&(a[w*2]=Ws(m[P]++,P))}},ao=()=>{let a,f,g,m,d,T=new Array(C+1);for(g=0,m=0;m<p-1;m++)for(ft[m]=g,a=0;a<1<<G[m];a++)tt[g++]=m;for(tt[g-1]=m,d=0,m=0;m<16;m++)for(Nt[m]=d,a=0;a<1<<et[m];a++)F[d++]=m;for(d>>=7;m<y;m++)for(Nt[m]=d<<7,a=0;a<1<<et[m]-7;a++)F[256+d++]=m;for(f=0;f<=C;f++)T[f]=0;for(a=0;a<=143;)N[a*2+1]=8,a++,T[8]++;for(;a<=255;)N[a*2+1]=9,a++,T[9]++;for(;a<=279;)N[a*2+1]=7,a++,T[7]++;for(;a<=287;)N[a*2+1]=8,a++,T[8]++;for(Ys(N,E+1,T),a=0;a<y;a++)L[a*2+1]=5,L[a*2]=Ws(a,5);es=new Pe(N,G,u+1,E,C),yn=new Pe(L,et,0,y,C),Es=new Pe(new Array(0),dt,0,S,_)},co=a=>{let f;for(f=0;f<E;f++)a.dyn_ltree[f*2]=0;for(f=0;f<y;f++)a.dyn_dtree[f*2]=0;for(f=0;f<S;f++)a.bl_tree[f*2]=0;a.dyn_ltree[j*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},lo=a=>{a.bi_valid>8?me(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Lh=(a,f,g,m)=>{lo(a),m&&(me(a,g),me(a,~g)),a.pending_buf.set(a.window.subarray(f,f+g),a.pending),a.pending+=g},ho=(a,f,g,m)=>{let d=f*2,T=g*2;return a[d]<a[T]||a[d]===a[T]&&m[f]<=m[g]},Sn=(a,f,g)=>{let m=a.heap[g],d=g<<1;for(;d<=a.heap_len&&(d<a.heap_len&&ho(f,a.heap[d+1],a.heap[d],a.depth)&&d++,!ho(f,m,a.heap[d],a.depth));)a.heap[g]=a.heap[d],g=d,d<<=1;a.heap[g]=m},uo=(a,f,g)=>{let m,d,T=0,w,P;if(a.last_lit!==0)do m=a.pending_buf[a.d_buf+T*2]<<8|a.pending_buf[a.d_buf+T*2+1],d=a.pending_buf[a.l_buf+T],T++,m===0?Ut(a,d,f):(w=tt[d],Ut(a,w+u+1,f),P=G[w],P!==0&&(d-=ft[w],_t(a,d,P)),m--,w=Gs(m),Ut(a,w,g),P=et[w],P!==0&&(m-=Nt[w],_t(a,m,P)));while(T<a.last_lit);Ut(a,j,f)},wn=(a,f)=>{let g=f.dyn_tree,m=f.stat_desc.static_tree,d=f.stat_desc.has_stree,T=f.stat_desc.elems,w,P,Q=-1,$;for(a.heap_len=0,a.heap_max=A,w=0;w<T;w++)g[w*2]!==0?(a.heap[++a.heap_len]=Q=w,a.depth[w]=0):g[w*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=Q<2?++Q:0,g[$*2]=1,a.depth[$]=0,a.opt_len--,d&&(a.static_len-=m[$*2+1]);for(f.max_code=Q,w=a.heap_len>>1;w>=1;w--)Sn(a,g,w);$=T;do w=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Sn(a,g,1),P=a.heap[1],a.heap[--a.heap_max]=w,a.heap[--a.heap_max]=P,g[$*2]=g[w*2]+g[P*2],a.depth[$]=(a.depth[w]>=a.depth[P]?a.depth[w]:a.depth[P])+1,g[w*2+1]=g[P*2+1]=$,a.heap[1]=$++,Sn(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],vn(a,f),Ys(g,Q,a.bl_count)},po=(a,f,g)=>{let m,d=-1,T,w=f[0*2+1],P=0,Q=7,$=4;for(w===0&&(Q=138,$=3),f[(g+1)*2+1]=65535,m=0;m<=g;m++)T=w,w=f[(m+1)*2+1],!(++P<Q&&T===w)&&(P<$?a.bl_tree[T*2]+=P:T!==0?(T!==d&&a.bl_tree[T*2]++,a.bl_tree[b*2]++):P<=10?a.bl_tree[x*2]++:a.bl_tree[B*2]++,P=0,d=T,w===0?(Q=138,$=3):T===w?(Q=6,$=3):(Q=7,$=4))},fo=(a,f,g)=>{let m,d=-1,T,w=f[0*2+1],P=0,Q=7,$=4;for(w===0&&(Q=138,$=3),m=0;m<=g;m++)if(T=w,w=f[(m+1)*2+1],!(++P<Q&&T===w)){if(P<$)do Ut(a,T,a.bl_tree);while(--P!==0);else T!==0?(T!==d&&(Ut(a,T,a.bl_tree),P--),Ut(a,b,a.bl_tree),_t(a,P-3,2)):P<=10?(Ut(a,x,a.bl_tree),_t(a,P-3,3)):(Ut(a,B,a.bl_tree),_t(a,P-11,7));P=0,d=T,w===0?(Q=138,$=3):T===w?(Q=6,$=3):(Q=7,$=4)}},Uh=a=>{let f;for(po(a,a.dyn_ltree,a.l_desc.max_code),po(a,a.dyn_dtree,a.d_desc.max_code),wn(a,a.bl_desc),f=S-1;f>=3&&a.bl_tree[pt[f]*2+1]===0;f--);return a.opt_len+=3*(f+1)+5+5+4,f},Vh=(a,f,g,m)=>{let d;for(_t(a,f-257,5),_t(a,g-1,5),_t(a,m-4,4),d=0;d<m;d++)_t(a,a.bl_tree[pt[d]*2+1],3);fo(a,a.dyn_ltree,f-1),fo(a,a.dyn_dtree,g-1)},jh=a=>{let f=4093624447,g;for(g=0;g<=31;g++,f>>>=1)if(f&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<u;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},go=!1,Hh=a=>{go||(ao(),go=!0),a.l_desc=new Oe(a.dyn_ltree,es),a.d_desc=new Oe(a.dyn_dtree,yn),a.bl_desc=new Oe(a.bl_tree,Es),a.bi_buf=0,a.bi_valid=0,co(a)},mo=(a,f,g,m)=>{_t(a,(r<<1)+(m?1:0),3),Lh(a,f,g,!0)},Bh=a=>{_t(a,o<<1,3),Ut(a,j,N),En(a)},Fh=(a,f,g,m)=>{let d,T,w=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=jh(a)),wn(a,a.l_desc),wn(a,a.d_desc),w=Uh(a),d=a.opt_len+3+7>>>3,T=a.static_len+3+7>>>3,T<=d&&(d=T)):d=T=g+5,g+4<=d&&f!==-1?mo(a,f,g,m):a.strategy===4||T===d?(_t(a,(o<<1)+(m?1:0),3),uo(a,N,L)):(_t(a,(c<<1)+(m?1:0),3),Vh(a,a.l_desc.max_code+1,a.d_desc.max_code+1,w+1),uo(a,a.dyn_ltree,a.dyn_dtree)),co(a),m&&lo(a)},$h=(a,f,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=f>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=f&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,f===0?a.dyn_ltree[g*2]++:(a.matches++,f--,a.dyn_ltree[(tt[g]+u+1)*2]++,a.dyn_dtree[Gs(f)*2]++),a.last_lit===a.lit_bufsize-1);var zh=Hh,qh=mo,Gh=Fh,Wh=$h,Yh=Bh,Xh={_tr_init:zh,_tr_stored_block:qh,_tr_flush_block:Gh,_tr_tally:Wh,_tr_align:Yh},yo=(a,f,g,m)=>{let d=a&65535|0,T=a>>>16&65535|0,w=0;for(;g!==0;){w=g>2e3?2e3:g,g-=w;do d=d+f[m++]|0,T=T+d|0;while(--w);d%=65521,T%=65521}return d|T<<16|0};let Kh=()=>{let a,f=[];for(var g=0;g<256;g++){a=g;for(var m=0;m<8;m++)a=a&1?3988292384^a>>>1:a>>>1;f[g]=a}return f},Qh=new Uint32Array(Kh());var Ne=(a,f,g,m)=>{let d=Qh,T=m+g;a^=-1;for(let w=m;w<T;w++)a=a>>>8^d[(a^f[w])&255];return a^-1},Ai={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Eo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Jh,_tr_stored_block:Zh,_tr_flush_block:tu,_tr_tally:Me,_tr_align:eu}=Xh,{Z_NO_FLUSH:ss,Z_PARTIAL_FLUSH:su,Z_FULL_FLUSH:iu,Z_FINISH:ke,Z_BLOCK:vo,Z_OK:se,Z_STREAM_END:So,Z_STREAM_ERROR:qt,Z_DATA_ERROR:nu,Z_BUF_ERROR:_n,Z_DEFAULT_COMPRESSION:ru,Z_FILTERED:ou,Z_HUFFMAN_ONLY:Ti,Z_RLE:au,Z_FIXED:cu,Z_DEFAULT_STRATEGY:lu,Z_UNKNOWN:hu,Z_DEFLATED:Ri}=Eo,uu=9,du=15,pu=8,bn=256+1+29,fu=30,gu=19,mu=2*bn+1,yu=15,K=3,De=258,Zt=De+K+1,Eu=32,Ci=42,An=69,Ii=73,Pi=91,Oi=103,is=113,Xs=666,Et=1,Ks=2,ns=3,vs=4,vu=3,xe=(a,f)=>(a.msg=Ai[f],f),wo=a=>(a<<1)-(a>4?9:0),Le=a=>{let f=a.length;for(;--f>=0;)a[f]=0},Ue=(a,f,g)=>(f<<a.hash_shift^g)&a.hash_mask,Ve=a=>{let f=a.state,g=f.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(f.pending_buf.subarray(f.pending_out,f.pending_out+g),a.next_out),a.next_out+=g,f.pending_out+=g,a.total_out+=g,a.avail_out-=g,f.pending-=g,f.pending===0&&(f.pending_out=0))},bt=(a,f)=>{tu(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,f),a.block_start=a.strstart,Ve(a.strm)},Z=(a,f)=>{a.pending_buf[a.pending++]=f},Qs=(a,f)=>{a.pending_buf[a.pending++]=f>>>8&255,a.pending_buf[a.pending++]=f&255},Su=(a,f,g,m)=>{let d=a.avail_in;return d>m&&(d=m),d===0?0:(a.avail_in-=d,f.set(a.input.subarray(a.next_in,a.next_in+d),g),a.state.wrap===1?a.adler=yo(a.adler,f,d,g):a.state.wrap===2&&(a.adler=Ne(a.adler,f,d,g)),a.next_in+=d,a.total_in+=d,d)},_o=(a,f)=>{let g=a.max_chain_length,m=a.strstart,d,T,w=a.prev_length,P=a.nice_match,Q=a.strstart>a.w_size-Zt?a.strstart-(a.w_size-Zt):0,$=a.window,Bt=a.w_mask,je=a.prev,ot=a.strstart+De,os=$[m+w-1],ws=$[m+w];a.prev_length>=a.good_match&&(g>>=2),P>a.lookahead&&(P=a.lookahead);do if(d=f,!($[d+w]!==ws||$[d+w-1]!==os||$[d]!==$[m]||$[++d]!==$[m+1])){m+=2,d++;do;while($[++m]===$[++d]&&$[++m]===$[++d]&&$[++m]===$[++d]&&$[++m]===$[++d]&&$[++m]===$[++d]&&$[++m]===$[++d]&&$[++m]===$[++d]&&$[++m]===$[++d]&&m<ot);if(T=De-(ot-m),m=ot-De,T>w){if(a.match_start=f,w=T,T>=P)break;os=$[m+w-1],ws=$[m+w]}}while((f=je[f&Bt])>Q&&--g!==0);return w<=a.lookahead?w:a.lookahead},rs=a=>{let f=a.w_size,g,m,d,T,w;do{if(T=a.window_size-a.lookahead-a.strstart,a.strstart>=f+(f-Zt)){a.window.set(a.window.subarray(f,f+f),0),a.match_start-=f,a.strstart-=f,a.block_start-=f,m=a.hash_size,g=m;do d=a.head[--g],a.head[g]=d>=f?d-f:0;while(--m);m=f,g=m;do d=a.prev[--g],a.prev[g]=d>=f?d-f:0;while(--m);T+=f}if(a.strm.avail_in===0)break;if(m=Su(a.strm,a.window,a.strstart+a.lookahead,T),a.lookahead+=m,a.lookahead+a.insert>=K)for(w=a.strstart-a.insert,a.ins_h=a.window[w],a.ins_h=Ue(a,a.ins_h,a.window[w+1]);a.insert&&(a.ins_h=Ue(a,a.ins_h,a.window[w+K-1]),a.prev[w&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=w,w++,a.insert--,!(a.lookahead+a.insert<K)););}while(a.lookahead<Zt&&a.strm.avail_in!==0)},wu=(a,f)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(rs(a),a.lookahead===0&&f===ss)return Et;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let m=a.block_start+g;if((a.strstart===0||a.strstart>=m)&&(a.lookahead=a.strstart-m,a.strstart=m,bt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-Zt&&(bt(a,!1),a.strm.avail_out===0))return Et}return a.insert=0,f===ke?(bt(a,!0),a.strm.avail_out===0?ns:vs):(a.strstart>a.block_start&&(bt(a,!1),a.strm.avail_out===0),Et)},Tn=(a,f)=>{let g,m;for(;;){if(a.lookahead<Zt){if(rs(a),a.lookahead<Zt&&f===ss)return Et;if(a.lookahead===0)break}if(g=0,a.lookahead>=K&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-Zt&&(a.match_length=_o(a,g)),a.match_length>=K)if(m=Me(a,a.strstart-a.match_start,a.match_length-K),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=K){a.match_length--;do a.strstart++,a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+1]);else m=Me(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(m&&(bt(a,!1),a.strm.avail_out===0))return Et}return a.insert=a.strstart<K-1?a.strstart:K-1,f===ke?(bt(a,!0),a.strm.avail_out===0?ns:vs):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?Et:Ks},Ss=(a,f)=>{let g,m,d;for(;;){if(a.lookahead<Zt){if(rs(a),a.lookahead<Zt&&f===ss)return Et;if(a.lookahead===0)break}if(g=0,a.lookahead>=K&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=K-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-Zt&&(a.match_length=_o(a,g),a.match_length<=5&&(a.strategy===ou||a.match_length===K&&a.strstart-a.match_start>4096)&&(a.match_length=K-1)),a.prev_length>=K&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-K,m=Me(a,a.strstart-1-a.prev_match,a.prev_length-K),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=Ue(a,a.ins_h,a.window[a.strstart+K-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=K-1,a.strstart++,m&&(bt(a,!1),a.strm.avail_out===0))return Et}else if(a.match_available){if(m=Me(a,0,a.window[a.strstart-1]),m&&bt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return Et}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(m=Me(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<K-1?a.strstart:K-1,f===ke?(bt(a,!0),a.strm.avail_out===0?ns:vs):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?Et:Ks},_u=(a,f)=>{let g,m,d,T,w=a.window;for(;;){if(a.lookahead<=De){if(rs(a),a.lookahead<=De&&f===ss)return Et;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=K&&a.strstart>0&&(d=a.strstart-1,m=w[d],m===w[++d]&&m===w[++d]&&m===w[++d])){T=a.strstart+De;do;while(m===w[++d]&&m===w[++d]&&m===w[++d]&&m===w[++d]&&m===w[++d]&&m===w[++d]&&m===w[++d]&&m===w[++d]&&d<T);a.match_length=De-(T-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=K?(g=Me(a,1,a.match_length-K),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=Me(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(bt(a,!1),a.strm.avail_out===0))return Et}return a.insert=0,f===ke?(bt(a,!0),a.strm.avail_out===0?ns:vs):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?Et:Ks},bu=(a,f)=>{let g;for(;;){if(a.lookahead===0&&(rs(a),a.lookahead===0)){if(f===ss)return Et;break}if(a.match_length=0,g=Me(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(bt(a,!1),a.strm.avail_out===0))return Et}return a.insert=0,f===ke?(bt(a,!0),a.strm.avail_out===0?ns:vs):a.last_lit&&(bt(a,!1),a.strm.avail_out===0)?Et:Ks};function ie(a,f,g,m,d){this.good_length=a,this.max_lazy=f,this.nice_length=g,this.max_chain=m,this.func=d}let Js=[new ie(0,0,0,0,wu),new ie(4,4,8,4,Tn),new ie(4,5,16,8,Tn),new ie(4,6,32,32,Tn),new ie(4,4,16,16,Ss),new ie(8,16,32,32,Ss),new ie(8,16,128,128,Ss),new ie(8,32,128,256,Ss),new ie(32,128,258,1024,Ss),new ie(32,258,258,4096,Ss)],Au=a=>{a.window_size=2*a.w_size,Le(a.head),a.max_lazy_match=Js[a.level].max_lazy,a.good_match=Js[a.level].good_length,a.nice_match=Js[a.level].nice_length,a.max_chain_length=Js[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=K-1,a.match_available=0,a.ins_h=0};function Tu(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ri,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(mu*2),this.dyn_dtree=new Uint16Array((2*fu+1)*2),this.bl_tree=new Uint16Array((2*gu+1)*2),Le(this.dyn_ltree),Le(this.dyn_dtree),Le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(yu+1),this.heap=new Uint16Array(2*bn+1),Le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*bn+1),Le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let bo=a=>{if(!a||!a.state)return xe(a,qt);a.total_in=a.total_out=0,a.data_type=hu;let f=a.state;return f.pending=0,f.pending_out=0,f.wrap<0&&(f.wrap=-f.wrap),f.status=f.wrap?Ci:is,a.adler=f.wrap===2?0:1,f.last_flush=ss,Jh(f),se},Ao=a=>{let f=bo(a);return f===se&&Au(a.state),f},Ru=(a,f)=>!a||!a.state||a.state.wrap!==2?qt:(a.state.gzhead=f,se),To=(a,f,g,m,d,T)=>{if(!a)return qt;let w=1;if(f===ru&&(f=6),m<0?(w=0,m=-m):m>15&&(w=2,m-=16),d<1||d>uu||g!==Ri||m<8||m>15||f<0||f>9||T<0||T>cu)return xe(a,qt);m===8&&(m=9);let P=new Tu;return a.state=P,P.strm=a,P.wrap=w,P.gzhead=null,P.w_bits=m,P.w_size=1<<P.w_bits,P.w_mask=P.w_size-1,P.hash_bits=d+7,P.hash_size=1<<P.hash_bits,P.hash_mask=P.hash_size-1,P.hash_shift=~~((P.hash_bits+K-1)/K),P.window=new Uint8Array(P.w_size*2),P.head=new Uint16Array(P.hash_size),P.prev=new Uint16Array(P.w_size),P.lit_bufsize=1<<d+6,P.pending_buf_size=P.lit_bufsize*4,P.pending_buf=new Uint8Array(P.pending_buf_size),P.d_buf=1*P.lit_bufsize,P.l_buf=3*P.lit_bufsize,P.level=f,P.strategy=T,P.method=g,Ao(a)},Cu=(a,f)=>To(a,f,Ri,du,pu,lu),Iu=(a,f)=>{let g,m;if(!a||!a.state||f>vo||f<0)return a?xe(a,qt):qt;let d=a.state;if(!a.output||!a.input&&a.avail_in!==0||d.status===Xs&&f!==ke)return xe(a,a.avail_out===0?_n:qt);d.strm=a;let T=d.last_flush;if(d.last_flush=f,d.status===Ci)if(d.wrap===2)a.adler=0,Z(d,31),Z(d,139),Z(d,8),d.gzhead?(Z(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),Z(d,d.gzhead.time&255),Z(d,d.gzhead.time>>8&255),Z(d,d.gzhead.time>>16&255),Z(d,d.gzhead.time>>24&255),Z(d,d.level===9?2:d.strategy>=Ti||d.level<2?4:0),Z(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(Z(d,d.gzhead.extra.length&255),Z(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=Ne(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=An):(Z(d,0),Z(d,0),Z(d,0),Z(d,0),Z(d,0),Z(d,d.level===9?2:d.strategy>=Ti||d.level<2?4:0),Z(d,vu),d.status=is);else{let w=Ri+(d.w_bits-8<<4)<<8,P=-1;d.strategy>=Ti||d.level<2?P=0:d.level<6?P=1:d.level===6?P=2:P=3,w|=P<<6,d.strstart!==0&&(w|=Eu),w+=31-w%31,d.status=is,Qs(d,w),d.strstart!==0&&(Qs(d,a.adler>>>16),Qs(d,a.adler&65535)),a.adler=1}if(d.status===An)if(d.gzhead.extra){for(g=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Ne(a.adler,d.pending_buf,d.pending-g,g)),Ve(a),g=d.pending,d.pending===d.pending_buf_size));)Z(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>g&&(a.adler=Ne(a.adler,d.pending_buf,d.pending-g,g)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=Ii)}else d.status=Ii;if(d.status===Ii)if(d.gzhead.name){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Ne(a.adler,d.pending_buf,d.pending-g,g)),Ve(a),g=d.pending,d.pending===d.pending_buf_size)){m=1;break}d.gzindex<d.gzhead.name.length?m=d.gzhead.name.charCodeAt(d.gzindex++)&255:m=0,Z(d,m)}while(m!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Ne(a.adler,d.pending_buf,d.pending-g,g)),m===0&&(d.gzindex=0,d.status=Pi)}else d.status=Pi;if(d.status===Pi)if(d.gzhead.comment){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Ne(a.adler,d.pending_buf,d.pending-g,g)),Ve(a),g=d.pending,d.pending===d.pending_buf_size)){m=1;break}d.gzindex<d.gzhead.comment.length?m=d.gzhead.comment.charCodeAt(d.gzindex++)&255:m=0,Z(d,m)}while(m!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Ne(a.adler,d.pending_buf,d.pending-g,g)),m===0&&(d.status=Oi)}else d.status=Oi;if(d.status===Oi&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&Ve(a),d.pending+2<=d.pending_buf_size&&(Z(d,a.adler&255),Z(d,a.adler>>8&255),a.adler=0,d.status=is)):d.status=is),d.pending!==0){if(Ve(a),a.avail_out===0)return d.last_flush=-1,se}else if(a.avail_in===0&&wo(f)<=wo(T)&&f!==ke)return xe(a,_n);if(d.status===Xs&&a.avail_in!==0)return xe(a,_n);if(a.avail_in!==0||d.lookahead!==0||f!==ss&&d.status!==Xs){let w=d.strategy===Ti?bu(d,f):d.strategy===au?_u(d,f):Js[d.level].func(d,f);if((w===ns||w===vs)&&(d.status=Xs),w===Et||w===ns)return a.avail_out===0&&(d.last_flush=-1),se;if(w===Ks&&(f===su?eu(d):f!==vo&&(Zh(d,0,0,!1),f===iu&&(Le(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),Ve(a),a.avail_out===0))return d.last_flush=-1,se}return f!==ke?se:d.wrap<=0?So:(d.wrap===2?(Z(d,a.adler&255),Z(d,a.adler>>8&255),Z(d,a.adler>>16&255),Z(d,a.adler>>24&255),Z(d,a.total_in&255),Z(d,a.total_in>>8&255),Z(d,a.total_in>>16&255),Z(d,a.total_in>>24&255)):(Qs(d,a.adler>>>16),Qs(d,a.adler&65535)),Ve(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?se:So)},Pu=a=>{if(!a||!a.state)return qt;let f=a.state.status;return f!==Ci&&f!==An&&f!==Ii&&f!==Pi&&f!==Oi&&f!==is&&f!==Xs?xe(a,qt):(a.state=null,f===is?xe(a,nu):se)},Ou=(a,f)=>{let g=f.length;if(!a||!a.state)return qt;let m=a.state,d=m.wrap;if(d===2||d===1&&m.status!==Ci||m.lookahead)return qt;if(d===1&&(a.adler=yo(a.adler,f,g,0)),m.wrap=0,g>=m.w_size){d===0&&(Le(m.head),m.strstart=0,m.block_start=0,m.insert=0);let Q=new Uint8Array(m.w_size);Q.set(f.subarray(g-m.w_size,g),0),f=Q,g=m.w_size}let T=a.avail_in,w=a.next_in,P=a.input;for(a.avail_in=g,a.next_in=0,a.input=f,rs(m);m.lookahead>=K;){let Q=m.strstart,$=m.lookahead-(K-1);do m.ins_h=Ue(m,m.ins_h,m.window[Q+K-1]),m.prev[Q&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=Q,Q++;while(--$);m.strstart=Q,m.lookahead=K-1,rs(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=K-1,m.match_available=0,a.next_in=w,a.input=P,a.avail_in=T,m.wrap=d,se};var Nu=Cu,Mu=To,ku=Ao,Du=bo,xu=Ru,Lu=Iu,Uu=Pu,Vu=Ou,ju="pako deflate (from Nodeca project)",Zs={deflateInit:Nu,deflateInit2:Mu,deflateReset:ku,deflateResetKeep:Du,deflateSetHeader:xu,deflate:Lu,deflateEnd:Uu,deflateSetDictionary:Vu,deflateInfo:ju};let Hu=(a,f)=>Object.prototype.hasOwnProperty.call(a,f);var Bu=function(a){let f=Array.prototype.slice.call(arguments,1);for(;f.length;){let g=f.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let m in g)Hu(g,m)&&(a[m]=g[m])}}return a},Fu=a=>{let f=0;for(let m=0,d=a.length;m<d;m++)f+=a[m].length;let g=new Uint8Array(f);for(let m=0,d=0,T=a.length;m<T;m++){let w=a[m];g.set(w,d),d+=w.length}return g},Ro={assign:Bu,flattenChunks:Fu};let Co=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Co=!1}let ti=new Uint8Array(256);for(let a=0;a<256;a++)ti[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ti[254]=ti[254]=1;var $u=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let f,g,m,d,T,w=a.length,P=0;for(d=0;d<w;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<w&&(m=a.charCodeAt(d+1),(m&64512)===56320&&(g=65536+(g-55296<<10)+(m-56320),d++)),P+=g<128?1:g<2048?2:g<65536?3:4;for(f=new Uint8Array(P),T=0,d=0;T<P;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<w&&(m=a.charCodeAt(d+1),(m&64512)===56320&&(g=65536+(g-55296<<10)+(m-56320),d++)),g<128?f[T++]=g:g<2048?(f[T++]=192|g>>>6,f[T++]=128|g&63):g<65536?(f[T++]=224|g>>>12,f[T++]=128|g>>>6&63,f[T++]=128|g&63):(f[T++]=240|g>>>18,f[T++]=128|g>>>12&63,f[T++]=128|g>>>6&63,f[T++]=128|g&63);return f};let Io=(a,f=a.length)=>{if(f<65534&&a.subarray&&Co)return String.fromCharCode.apply(null,a.length===f?a:a.subarray(0,f));let g="";for(let m=0;m<f;m++)g+=String.fromCharCode(a[m]);return g};var zu=(a,f)=>{let g=f||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,f));let m,d,T=new Array(g*2);for(d=0,m=0;m<g;){let w=a[m++];if(w<128){T[d++]=w;continue}let P=ti[w];if(P>4){T[d++]=65533,m+=P-1;continue}for(w&=P===2?31:P===3?15:7;P>1&&m<g;)w=w<<6|a[m++]&63,P--;if(P>1){T[d++]=65533;continue}w<65536?T[d++]=w:(w-=65536,T[d++]=55296|w>>10&1023,T[d++]=56320|w&1023)}return Io(T,d)},qu=(a,f)=>{f=f||a.length,f>a.length&&(f=a.length);let g=f-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?f:g+ti[a[g]]>f?g:f},Po={string2buf:$u,buf2string:zu,utf8border:qu};function Gu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Wu=Gu;let Oo=Object.prototype.toString,{Z_NO_FLUSH:Yu,Z_SYNC_FLUSH:Xu,Z_FULL_FLUSH:Ku,Z_FINISH:Qu,Z_OK:Ni,Z_STREAM_END:Ju,Z_DEFAULT_COMPRESSION:Zu,Z_DEFAULT_STRATEGY:td,Z_DEFLATED:ed}=Eo;function Mi(a){this.options=Ro.assign({level:Zu,method:ed,chunkSize:16384,windowBits:15,memLevel:8,strategy:td},a||{});let f=this.options;f.raw&&f.windowBits>0?f.windowBits=-f.windowBits:f.gzip&&f.windowBits>0&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Wu,this.strm.avail_out=0;let g=Zs.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(g!==Ni)throw new Error(Ai[g]);if(f.header&&Zs.deflateSetHeader(this.strm,f.header),f.dictionary){let m;if(typeof f.dictionary=="string"?m=Po.string2buf(f.dictionary):Oo.call(f.dictionary)==="[object ArrayBuffer]"?m=new Uint8Array(f.dictionary):m=f.dictionary,g=Zs.deflateSetDictionary(this.strm,m),g!==Ni)throw new Error(Ai[g]);this._dict_set=!0}}Mi.prototype.push=function(a,f){let g=this.strm,m=this.options.chunkSize,d,T;if(this.ended)return!1;for(f===~~f?T=f:T=f===!0?Qu:Yu,typeof a=="string"?g.input=Po.string2buf(a):Oo.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(m),g.next_out=0,g.avail_out=m),(T===Xu||T===Ku)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(d=Zs.deflate(g,T),d===Ju)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),d=Zs.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===Ni;if(g.avail_out===0){this.onData(g.output);continue}if(T>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},Mi.prototype.onData=function(a){this.chunks.push(a)},Mi.prototype.onEnd=function(a){a===Ni&&(this.result=Ro.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function sd(a,f){f=f||{};let g=new Mi(f);if(g.push(a,!0),g.err)throw g.msg||Ai[g.err];return g.result}function id(a,f){return f=f||{},f.gzip=!0,sd(a,f)}return(a,f,g)=>{let m=id(a);return f==="base64"?m=btoa(Io(m)):m=m.buffer,g&&g(m),m}}var OE=(()=>{class s extends yc{constructor(t){super(t),this.algorithm=rn.GZIP,this.bg=La(),this.nT=(i,r,o)=>{let c=this.bg(i,r);o(c)},this.compress=Ua(),typeof CompressionStream!="undefined"&&vf||(this.compress=this.nT,this.getCompressorSourceCode=()=>La.toString())}compressSync(t,e){return this.bg(t,e)}getCompressorSourceCode(){return Ua.toString()}}return s})();function Ua(){let s=n=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([n]))});return(n,t,e)=>{let i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();if(t==="base64"){r.then(o=>s(o)).then(o=>e(o));return}r.then(o=>e(o))}}var NE=(()=>{class s extends yc{constructor(){super(...arguments),this.algorithm=rn.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),oh=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!IE.isCompressionEnabled()?new NE(t):this.instance=new OE(t)}}return s})();var ME=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,E,y,S,A,C,R,_,j,b,x,B,G,et,dt,pt,v,N,L,F){this.Q=t,this.le=e,this.R=i,this.w=r,this.E=o,this.f=c,this.zh=l,this.h=h,this.qh=p,this.Qs=u,this.$r=E,this.pe=y,this.I=S,this.W=A,this.K=C,this.A=R,this.hT=_,this.J=j,this.it=b,this.wt=x,this.Tg=B,this.Zt=G,this.uT=et,this.C=dt,this.vt=pt,this.M=v,this.Bt=N,this.et=L,this.mt=F,this.dT=(tt=!1)=>{let ft=this.w.getSession();ft===null?(this.Nn=new TE(this.h.recordTargetingRules,this.Rg,this.E,this.et,this.J,this.A),this.Nn.init(),this.Nn.start()):(ft.collectState===M.RECORDING_RULES_TARGETING||ft.collectState===M.ANALYTICS_ONLY_RULES_TARGETING)&&this.Rg(tt)},this.Rg=(tt=!1)=>{this.Mn.onLoad(()=>{var ft,Nt;(ft=this.Nn)===null||ft===void 0||ft.emitTargetingCollectState(),(Nt=this.Nn)===null||Nt===void 0||Nt.stop(),this.E.emitStartTracking(tt)}),this.Na(tt)},this.Na=(tt=!1)=>{this.Qs.isActive()||(this.mt.init(),this.Gh.start(tt),this.Mn.start())},this.pT=()=>{this.E.emitBeforeSessionRenewal(),this.kn(!0),this.E.emitAfterSessionRenewal()},this.fT=()=>{this.E.emitBeforeSessionRenewal(),this.et.refreshQuota(),this.et.onQuotaReady(tt=>{tt!==M.QUOTA_REACHED&&(this.kn(!0),this.E.emitAfterSessionRenewal())})}}start(){var t;if(this.qh.init(),this.Qs.init(),this.Qs.isActive())return;let e,i,r,o,c,l,h,p,u,E,y,S,A,C,R,_,j,b,x,B;this.C.schedule(()=>{A=new Py(this.w,this.R),_=new eE(A),S=new Dl(this.W),C=new eh(()=>{}),j=new sh,B=new ih;let G=new eo(C,this.mt,j,x,B,this.Wh());R=new mE(this.Wh(),this.mt,G,j,b);let et=new yE(this.E,this.f,this.mt,G,j,b,x);et.init(),this.E.addListener(et),e=new dy(this.h,this.Q,this.R,this.W,S,this.f,A,new ql(V),this.it,this.vt,this.J,R),i=new km(this.f,this.w,this.h,this.Q,this.le,this.I),y=new Hy(R);let dt=new Bl(this.h);E=new xy(this.h,dt,y,R,this.it),E.init();let pt=new tE;r=new Cm(this.R,this.w,this.f,this.it,dt,this.h,pt,y),o=new Um(this.h,this.Q,this.R,this.f,this.I,A,this.A);let v;this.Gh=new _y(this.h,this.f,this.E,this.Q,this.R,this.w,this.pe,this.wt,this.K,this.A,this.Zt,pt,this.J,this.Gs,v),this.Cg=new Ry(this.h,this.R,this.w,this.f),h=new ky(this.h,this.f,this.le,this.Q,this.J),p=new Dy(this.f),u=new jy(this.h,new dc(this.h,this.I),this.vt),this.Mn=new xl}),this.h.apiErrors.enabled&&this.C.schedule(()=>{this.lt=new Wr,this.gT=new EE(this.f,this.lt),this.gT.init()}),this.h.apiErrors.enabled&&this.C.schedule(()=>{var G,et,dt;let pt;!((G=this.h.apiErrors.collectionRules)===null||G===void 0)&&G.length?pt=new Zl(this.h.apiErrors,this.I):pt=new th(this.h.apiErrors,this.I),this.at=new Fl(new Xl,new Kl,pt),this.ce=new $l(this.lt,this.K,!!(!((dt=(et=this.h)===null||et===void 0?void 0:et.experimental)===null||dt===void 0)&&dt.anonymizeNameInUrls)),this.Bi=new iE;let v=new $y(this.at,this.ce,this.h,this.Q,this.it,this.f,this.vt);v.init(),this.E.addListener(v)}),this.h.customErrors.enabled&&this.C.schedule(()=>{var G,et,dt;let pt;this.Xs=new rh(this.I,!((dt=(et=this.h)===null||et===void 0?void 0:et.experimental)===null||dt===void 0)&&dt.anonymizeNameInUrls?this.K:void 0);let v=new Zy(this.Xs,this.h,this.Q,this.f,this.J,this.vt,this.it,pt);v.init(),this.E.addListener(v)}),this.h.jsErrorsEnabled&&this.C.schedule(()=>{this._s=new Hl,this.ae=new zl(this.I,this.A);let G=new Xy(this._s,this.ae,this.h,this.Q,this.it,this.f,this.J,this.A,this.vt);G.init(),this.E.addListener(G)}),this.C.schedule(()=>{this.$r.init()}),this.C.schedule(()=>{r.init()}),this.C.schedule(()=>{i.init()}),this.C.schedule(()=>{o.init()}),this.C.schedule(()=>{this.Tg.init()}),this.C.schedule(()=>{this.Gh.init()}),this.C.schedule(()=>{this.Cg.init()}),this.C.schedule(()=>{h.init()}),this.C.schedule(()=>{this.hT.init()}),this.C.schedule(()=>{p.init()}),this.C.schedule(()=>{u.init()}),this.C.schedule(()=>{this.uT.init()}),this.C.schedule(()=>{this.E.addListener(this.Cg),this.E.addListener(this.zh),this.E.addListener(e),this.E.addListener(this.$r),this.E.addListener(r),this.E.addListener(o),this.E.addListener(this.Tg),this.E.addListener(this.Gh),this.E.addListener(h),this.E.addListener(i),this.E.addListener(E),this.E.addListener(u),this.E.addListener(_)}),Vs.isRecordingSupported()&&this.C.schedule(()=>{let G=new wm(y,this.w,this.h,this.Q,this.f,this.I,A,C,this.ae,this.at,this.ce,this.lt,this.E,this.J,this.it,this.Zt,this.vt,this.K,this.Bi,this.Wh(),this.Xs,b);G.init(),this.E.addListener(G),r.setRecordingService(G.recordingService)}),this.C.schedule(()=>{e.init()}),this.C.schedule(()=>{this.h.isQuotaEnabled()?A.onSessionExpired(()=>{this.fT()}):A.onSessionExpired(()=>{this.pT()}),this.kn()})}kn(t=!1){var e;if(this.h.hasTargetingRules()){this.dT(t),this.f.start(),this.Nn&&this.Nn.checkInitialUrlTargetingRules();return}this.f.start(),this.Mn.onLoad(()=>{this.E.emitStartTracking(t)}),(!jl(this.h)||t)&&this.Na(t)}Wh(){if(this.ot)return this.ot;let t=new Zr;return this.ot=new Jr(this.pe,this.h,this.A,t),this.ot.init(),this.ot.shouldUseAnonymization()&&rt.counters.pageAnonymisation.count("anonymized-on-start"),this.ot}}return s})(),kE=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.h=t,this.R=e,this.qe=i,this.Ig=r,this.mT=o,this.yT=c,this.ET=l,this.Yh=h}compute(t){var e,i;this.h.crossDomainTracking&&!this.h.cookielessTrackingEnabled?this.h.crossDomainSingleIframeTracking?(e=this.ET)===null||e===void 0||e.start(()=>this.Xh(t)):(i=this.yT)===null||i===void 0||i.applyUpToDate(()=>this.Xh(t)):this.Xh(t)}Xh(t){this.mT.handle(),this.Ig.clear(),this.vT()?(this.Ig.restoreClearedVisitor(),t(!0)):(this.qe.exclude(this.h),t(!1))}vT(){let t=Te.boolean(this.h.sampleRate);return this.Yh.isForceIncluded()||!this.qe.isExcluded()&&this.R.doesVisitorExist()||!this.qe.isExcluded()&&t}}return s})(),DE=(()=>{class s{constructor(t,e,i,r){this.h=t,this.nt=e,this.E=i,this.w=r,this.ST=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.wT(),(t=this.w)===null||t===void 0||t.removeSession()),this._T(e),this.setVisitor(e)}wT(){return{id:Wl.generate(),visitsCount:0,appliedTrackingDraw:this.h.lastTrackingDraw,creationTimestamp:jo(),lastVisitTimestamp:0,hitTimestamp:0,expires:O.now()+this.h.visitorCookieTimeout,allowSubdomains:this.h.allowSubdomains,identityPrint:null}}_T(t){let e=jo();this.w&&!this.w.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.h.lastTrackingDraw,this.Pg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.nt.get()}setVisitor(t){this.nt.set(t)}doesVisitorExist(){return this.nt.get()!==null}resetVisitor(){this.Og(),this.E.emitAfterVisitorCleared()}removeVisitor(){this.nt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.h.allowSubdomains:!1}handleSubdomainChange(){this.nt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Pg===void 0?!1:t.visitsCount!==this.Pg}bT(){return!J(this.Ng)||O.now()-this.Ng>this.ST}renewVisitor(){this.bT()?(this.Ng=O.now(),this.Og(),this.E.emitAfterVisitorRenewal()):V.warn("session:start:newVisitor is trying to renew visitor under time limit")}Og(){this.E.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),no=60*1e3,xE=60*no,LE=4*xE-no,As=(()=>{let s;return function(n){n[n.NO=0]="NO",n[n.WITHDRAWN=1]="WITHDRAWN",n[n.GRANTED=2]="GRANTED"}(s||(s={})),s})(),UE=(()=>{class s{constructor(t,e){this.ye=t,this.et=e,this.zr=null,this.Kh=0,this.qr=As.NO}setDynamicVariablesService(t){this.AT=t}createOrUpdateSession(){this.Qh(),this.TT=O.now(),this.Kh=0;let t=this.Mg();t===null?(t=this.RT(),this.kg(t),this.Ma(t)):(t=this.et.sanitizeSessionCollectState(t),this.kg(t),t.collectState=this.et.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.et.getInitialCollectState(),t.collectState=this.et.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.qr=As.GRANTED}withdrawnReplayRecording(t){t.collectState=this.et.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.qr=As.WITHDRAWN}Ma(t){this.qr===As.WITHDRAWN?(t.collectState=this.et.getRecordingConsentWithdrawn(),this.setSession(t)):this.qr===As.GRANTED?t.collectState=this.et.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.et.computeInitialCollectState(t),this.qr=As.NO}RT(){return{pageNumber:0,collectState:this.et.getInitialCollectState(),etrState:Rt.ETR_OFF,etrStatus:kt.ETR_NOT_SAVED_SESSION}}kg(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.et.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===M.RECORDING_TEMPORARILY}abortQuotaServiceRequest(){this.et.abortQuotaServiceRequest()}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.ye.get()}Mg(){return this.ye.get(!0)}doesSessionExist(){return this.ye.get()!==null}setSession(t){this.ye.set(t)}refreshSession(){let t=this.Mg();t&&this.setSession(t)}removeSession(){this.ye.remove()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==M.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===M.RECORDING_RULES_TARGETING?M.RECORDING_GLOBAL_SAMPLING:t.collectState),t.etrState===Rt.ETR_ON&&csArray.prototype.push.call(e,M.RECORDING_ETR_SAMPLING)),e}updateCollectState(t,e){let i=this.getSession();i!==null&&(i.collectState=t,i.etrState=e,this.setSession(i))}hasValidSession(){let t=this.ye.getRawSession();return this.ye.isValid(t)}handleSubdomainChange(){this.ye.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.ye.isCacheRefreshed();return e&&t&&this.ye.resetCacheRefreshed(),e}extendSessionPeriodically(){this.zr||this.Dg()}extendSession(){let t=this.getSession();return t===null?(V.warn("extendSession is trying to extend an expired session"),this.Qh(),!1):(this.ye.set(t,$i),!0)}Dg(){if(this.CT()){this.Qh();return}this.extendSession()&&(this.IT(),this.PT())}PT(){this.zr=window.csSetTimeout(()=>{this.Dg()},$i-no)}CT(){return LE-(O.now()+$i-this.TT)<0}Qh(){this.zr&&(window.csClearTimeout(this.zr),this.zr=null)}IT(){this.Kh+=1,this.AT.trackDynamicVariable("session_expiry_update",this.Kh)}}return s})(),VE=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.qe=i}clear(){this.OT()&&(this.xg=this.R.getVisitor(),this.R.removeVisitor()),this.NT()&&this.qe.removeExclusion()}OT(){return this.R.doesVisitorExist()&&this.R.getVisitor().appliedTrackingDraw!==this.h.lastTrackingDraw}NT(){return this.qe.getAppliedTrackingDraw()!==this.h.lastTrackingDraw}restoreClearedVisitor(){this.xg&&this.R.setVisitor(this.xg)}}return s})(),jE=(()=>{class s{constructor(t,e,i){this.R=t,this.w=e,this.MT=i}handle(){this.R.hasAllowSubdomainsChanged()&&(this.R.handleSubdomainChange(),this.w.handleSubdomainChange(),this.MT.handleSubdomainChange())}}return s})(),qe="_cs_c",cs=(()=>{let s;return function(n){n[n.NOT_REQUIRED=0]="NOT_REQUIRED",n[n.NOT_EXPRESSED=1]="NOT_EXPRESSED",n[n.GRANTED=2]="GRANTED",n[n.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),HE=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Bt=i}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Bt.getItem(qe):t=this.M.get(qe),t===null?t:Number(t)}set(t){this.h.cookielessTrackingEnabled?this.Bt.setItem(qe,csString(t)):this.M.set(qe,csString(t),Pr)}remove(){this.h.cookielessTrackingEnabled?this.Bt.removeItem(qe):this.M.delete(qe)}handleSubdomainChange(){this.h.cookielessTrackingEnabled||(this.h.allowSubdomains?this.M.delete(qe,nn.CURRENT_DOMAIN):this.M.delete(qe,this.M.getRootDomain()))}}return s})(),BE=(()=>{class s{constructor(t,e,i){this.h=t,this.w=e,this.E=i}grantReplayConsent(){if(!Ke.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.grantReplayRecordingBeforeSessionStart();return}Ke.isRecordingBlockedByConsent(t)&&(this.w.grantReplayRecording(t),this.E.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!Ke.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.withdrawnReplayRecordingBeforeSessionStart();return}Ke.isRecordingWithDrawn(t)||(this.w.withdrawnReplayRecording(t),this.E.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),ah=["replay:consent:unanonymized:granted","trackConsentGranted"],ch=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],lh=["replay:consent:startForSession:granted"],hh=["replay:consent:startForSession:withdrawn"],FE=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.f=e,this.pe=i,this.w=r,this.E=o}init(){this.Lg=new BE(this.h,this.w,this.E),this.pe.setInitialConsent(),this.ht()}ht(){this.f.register(ah,()=>{this.pe.grantReplayAnonymizationConsent()}),this.f.register(ch,()=>{this.pe.withdrawReplayAnonymizationConsent()}),this.f.register(lh,()=>{this.Lg.grantReplayConsent()}),this.f.register(hh,()=>{this.Lg.withdrawReplayConsent()})}onOptout(){this.pe.removeAllConsents()}onBeforeVisitorRenewal(){this.pe.removeAllConsents()}onAfterVisitorRenewal(){this.pe.setInitialConsent()}onAfterVisitorCleared(){this.pe.setInitialConsent()}}return s})(),$E=(()=>{class s{constructor(t,e,i){this.h=t,this.nt=e,this.E=i}setInitialConsent(){let t=this.nt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.h.consentRequired;return e&&t===cs.NOT_REQUIRED||!e&&t!==cs.NOT_REQUIRED}handleSubdomainChange(){this.nt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.h.consentRequired?cs.NOT_EXPRESSED:cs.NOT_REQUIRED;this.nt.set(t)}grantReplayAnonymizationConsent(){this.h.consentRequired&&(this.nt.set(cs.GRANTED),this.E.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.h.consentRequired&&(this.nt.set(cs.WITHDRAWN),this.E.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.nt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.h.consentRequired||this.nt.get()===cs.GRANTED}getRequestParameters(){return{uc:`${this.nt.get()}`}}}return s})(),zE=(()=>{class s{constructor(t,e,i,r,o,c,l){this.E=t,this.f=e,this.zh=i,this.qh=r,this.Qs=o,this.kT=c,this.$r=l}start(){this.E.addListener(this.kT),this.E.addListener(this.$r),this.E.addListener(this.zh),this.$r.init(),this.qh.init(),this.Qs.init(),!this.Qs.isActive()&&this.f.start()}}return s})(),qE=(()=>{class s{constructor(t,e){this.Rt=t,this.nt=e}exclude(t){this.nt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.nt.remove()}isExcluded(){return this.DT()||this.xT()}DT(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.nt.get()}xT(){return csString.prototype.indexOf.call(this.Rt.href,ye)>0}}return s})(),GE=(()=>{class s{constructor(t){this.Qe=t}onOptout(){this.Qe.removeExclusion()}}return s})(),qn=(()=>{let s;return function(n){n.SessionReplay="SR",n.None=""}(s||(s={})),s})(),WE=".^",YE=".*",uh=(()=>{class s{constructor(t){this.A=t,this.Jh=new csRegExp(`${WE}`)}setExcludeUrlForSessionReplay(t){try{this.Jh=new csRegExp(t)}catch{V.warn(`excludeURLforReplay - invalid regex '${t}'`),this.Jh=new csRegExp(`${YE}`)}}Ug(){return this.Jh.test(this.A.getAnonymizedUrl())?qn.SessionReplay:qn.None}isUrlExcludedForSessionReplay(){return this.Ug()===qn.SessionReplay}getRequestParameters(){return{ex:this.Ug()}}}return s})(),XE=["excludeURLforReplay"],dh=(()=>{class s{constructor(t,e){this.Qe=t,this.f=e}init(){this.f.register(XE,t=>{if(z(t))this.Qe.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),Gn="_cs_inc",KE=(()=>{class s{constructor(t,e){this.Rt=t,this.M=e}isForceIncluded(){return this.LT()||this.UT()}isForceReplayRecorded(){return this.VT(M.RECORDING_GLOBAL_SAMPLING)}LT(){return this.M.get(Gn)!==null}VT(t){return this.M.get(Gn)===t}UT(){return csString.prototype.indexOf.call(this.Rt.href,Gn)>0}}return s})(),ai="_cs_optout",QE=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Bt=i}get(){return this.h.cookielessTrackingEnabled?this.Bt.getItem(ai):this.M.get(ai)}set(t){this.h.cookielessTrackingEnabled?this.Bt.setItem(ai,t):this.M.set(ai,t,Pr)}}return s})(),Va="1",JE=(()=>{class s{constructor(t,e,i){this.E=t,this.Rt=e,this.nt=i}init(){!this.isActive()&&this.jT()&&this.activate()}isActive(){return this.nt.get()===Va}activate(){this.E.emitOptout(),this.nt.set(Va)}jT(){return csString.prototype.indexOf.call(this.Rt.href,ai)>0}}return s})(),ro=["optout"],ph=["optin"],ZE=(()=>{class s{constructor(t,e){this.f=t,this.Qs=e}init(){this.f.register(ro,()=>{this.Qs.activate()})}}return s})();var tv=(()=>{class s{constructor(t,e){this.f=t,this.it=e}init(){this.it.addListener(this.f)}onOptout(){this.f.stop()}onBeforeSessionRenewal(){this.f.stop()}}return s})();var yr=(()=>{let s;return function(n){n.UXA="_uxa",n.WVT="cs_wvt"}(s||(s={})),s})(),fh=(()=>{class s extends lt{constructor(t){super(),this.Zh=t,this.cs={}}register(t,e,i){for(let r of t){let o=(...c)=>{try{let l=e(...c);return rt.counters.commandApplied.count(r),l}catch(l){rt.counters.commandMisuse.count(r),V.warn(`Misused Command: ${r}; Args: ${csJSON.stringify(c)}; Error: ${Je(l)?l.stack:l}`)}};this.cs[r]={callback:o,configuration:i},this.cs}}onStart(){this.BT(),this.FT()}onStop(){for(let t of this.Zh)window[t]=[]}applyFromIntegration(t,e,i){this.Vg(t,e,`Commands.apply.from.integration: ${i}`),rt.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Vg(t,e,`Commands.apply.from.implementation: ${i}`),rt.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.$T(e.name,e.params,t.iframePath),rt.counters.commandsFromIframe.count(e.name)}Vg(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}V.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}$T(t,e,i){V.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}BT(){for(let t of this.Zh)window[t].forEach(([e,...i])=>this.jg(e,i,!1))}FT(){for(let t of this.Zh)window[t]={push:([e,...i])=>this.jg(e,i,!0)}}jg(t,e,i){var r,o;if(this.cs[t]){if(((r=this.cs[t].configuration)===null||r===void 0?void 0:r.disableApplyPending)&&!i||((o=this.cs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){rt.counters.commandError.count(t),V.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var ev=(()=>{class s{constructor(t,e,i,r){this.h=t,this.R=e,this.w=i,this.Xg=r}getRequestParameters(){var t;let e={...Or(),...this.h.getRequestParameters()},i=this.w.getSession();i&&(e.pn=`${i.pageNumber}`);let r=this.R.getVisitor();if(r&&(e.sn=`${r.visitsCount}`,e.uu=`${r.id}`),!((t=this.Xg)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Xg.getSubProjectId()}`),window.heap)try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}}return s})(),sv=(()=>{class s{constructor(t,e){this.f=t,this.Ps=e}init(){this.f.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ps.updateDynamicFields("emitDebugEvents",t)})}}return s})();function ja(s,n,t){if(!J(n)&&!J(t))return s.href;let e=J(n)?gh(n):s.pathname,i=J(t)?mh(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function gh(s){return Ae(s,"/")?s:`/${s}`}function mh(s){return Ae(s,"?")||s===""?s:`?${s}`}var Wn=(()=>{let s;return function(n){n[n.page=1]="page",n[n.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),yh=(()=>{class s{constructor(t,e){this.Rt=t,this.K=e,this.XT=10}overridePath(t,e){if(t===""){this.Dn=void 0;return}let i=this.Kg(e);i&&(this.su=i),this.Dn=e?this.Qg(t,e):t}overrideQuery(t,e){let i=this.Kg(e);i&&(this.iu=i),this.Wr=e?this.Qg(t,e):t}computeOverriddenUrl(t){return this.KT(t)?this.getAnonymizedUrl():t}QT(t){return(typeof t=="string"||typeof t=="number")&&t in Wn}KT(t){let e=this.Jg(this.Rt.href);return this.Jg(t)===e}Jg(t){return sp(t,"/")?csString.prototype.slice.call(t,0,-1):t}Kg(t){return J(t==null?void 0:t.lifespan)&&this.QT(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}JT(){return this.su&&this.su in Wn}ZT(){return this.iu&&this.iu in Wn}cleanupOverrideLifespan(){this.JT()&&(this.Dn=void 0,this.su=void 0),this.ZT()&&(this.Wr=void 0,this.iu=void 0)}getAnonymizedUrl(){let t=ja(this.Rt,this.Dn,this.Wr);return this.K.anonymizeUrl(t)}getUrl(){return ja(this.Rt,this.Dn,this.Wr)}getAnonymizedPathAndQuery(){let t=J(this.Dn)?gh(this.Dn):this.Rt.pathname,e=J(this.Wr)?mh(this.Wr):this.Rt.search;return this.K.anonymizeUrl(t+e)}getUrlProtocol(){return this.Rt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Qg(t,e){return this.t0(e)?this.e0(t):this.s0(e)?this.i0(t):t}s0(t){return!!t.decodeURI}i0(t){return this.Zg(t,1,!1)}t0(t){return!!t.decodeURIDeep}e0(t){return this.Zg(t,this.XT,!0)}Zg(t,e,i){let r=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(r);if(c===r)return r;r=c}catch{return r}return i&&V.warn(`decodeURIDeep limit reached: ${r}`),r}}return s})(),mn=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),iv=(()=>{class s extends mn{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:q.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),fi="|iframe|",Eh=(()=>{class s extends mn{constructor(t,e,i,r){super(),this.n0=t,this.r0=e,this.o0=i,this.a0=r}emitIframeEvent(t,e,i){if(this.c0(e)&&t===null){V.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case I.ChildLogMessage:this.l0(i);break;case I.AnalysisEvent:{let r=i,o=this.n0.transformEvent(t,r);o.isUserEvent?this.h0(o.event):this.u0(o.event);break}case I.RecordingEvent:{let r=i,o=this.a0.transformEvents(t,r);if(o.events.length===0)return;o.containsUserEvent?this.d0(o.events):this.p0(o.events);break}case I.JavascriptError:this.f0(i);break;case I.ApiError:this.g0(i);break;case I.DetailedApiError:this.m0(i);break;case I.CustomError:this.y0(i);break;case I.EmerchandisingMessage:{let r=this.o0.transformEvent(t,i);this.E0(r);break}case I.Commands:{let r=this.r0.transformEvent(t,i);this.v0(r);break}case I.IntegrationCallback:this.S0(i);break;case I.StaticResource:this.w0(i);break;case I.TrackingContextRequestMessage:this._0(i);break;default:V.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}c0(t){let e=[I.AnalysisEvent,I.RecordingEvent,I.EmerchandisingMessage,I.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}l0(t){let{message:e,errorCode:i,level:r}=t;switch(r){case nt.debug:V.debug(e,i);break;case nt.warn:V.warn(e,!0,i);break;case nt.implementation:V.implementation(e,i);break;case nt.error:V.error(e,i);break;case nt.critical:V.critical(e,i);break}}h0(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}u0(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}d0(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}p0(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}f0(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}g0(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}m0(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}E0(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}v0(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}S0(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}w0(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}_0(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}y0(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),nv=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),rv=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),oo=["setCustomVariable"],ov=(()=>{class s{constructor(t,e){this.f=t,this.wt=e}init(){this.f.register(oo,(t,e,i,r)=>{this.wt.set(t,e,i,r)})}onAfterArtificialPageView(){this.wt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.wt.deleteNextPageOnlyCustomVariables()}onOptout(){this.wt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.wt.removeCustomVariablesSession(),this.wt.removeCustomVariablesPage()}}return s})(),Ha=512,Ba=255,Yn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},av=(()=>{class s{constructor(t,e){this.I=t,this.nt=e,this.$t={},this.De={}}set(t,e,i,r){let o,c;if((le(t)||z(t))&&Number(t)>0&&Ot(e)&&Ot(i)&&!Xt(e)&&!Xt(i)&&this.b0(r)){let l=this.I.anonymizePII(csString(e)),h=this.I.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,Ha),csString.prototype.slice.call(h,0,Ba)],c=i!=="",!J(r)||csArray.prototype.indexOf.call(Yn.SESSION,r)>=0){let p=this.getCustomVariablesSession();c?p[t]=o:delete p[t],this.setCustomVariableSession(p)}(!J(r)||csArray.prototype.indexOf.call(Yn.PAGE,r)>=0)&&(c?this.$t[t]=o:delete this.$t[t]),J(r)&&csArray.prototype.indexOf.call(Yn.NEXT_PAGE_ONLY,r)>=0&&(c?this.De[t]=o:delete this.De[t])}else throw new Error(`Command misuse: ${oo[0]}`)}getCustomVariablesSession(){let t=this.nt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Yt(e)?e:{}}setCustomVariableSession(t){this.nt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.nt.remove()}removeCustomVariablesPage(){this.$t={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.De)this.De.hasOwnProperty(i)&&(this.$t[i]=this.De[i]);for(let i in this.$t)this.$t.hasOwnProperty(i)&&(t[i]=this.$t[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.tm(t)};return this.$t&&window.csJSON.stringify(this.$t).length>2&&(e.cvarp=this.tm(this.$t)),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.De).length>0)for(let t in this.De)this.De[t]===this.$t[t]&&(delete this.$t[t],delete this.De[t])}em(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),r=t[e],o=r[0],c=r[1];(!dd(i,1,20)||o.length>Ha||c.length>Ba)&&delete t[e]}}tm(t){this.em(t);let e=pd(t)?[]:t;return window.csJSON.stringify(e)}b0(t){return!J(t)||z(t)||le(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.De)this.De.hasOwnProperty(e)&&(this.$t[e]=this.De[e]);for(let e in this.$t)this.$t.hasOwnProperty(e)&&(t[e]=this.$t[e]);return this.em(t),t}}return s})(),cv=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,lv="$1CS_ANONYMIZED_NAME",vh=(()=>{class s{constructor(t){this.I=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],r=e.partialMaskingPatterns||[],o=this.I.anonymizePII(t);if(o=this.I.anonymizeJwt(o),e.maskNames){let h=o;o=this.Dr(o),o!==h&&(rt.counters.redactedPII.count("name"),rt.counters.redactedPII.count("name-in-url"))}let c=this.A0(o,i);if(c!==o)return rt.counters.redactedPII.count("url"),c;let l=this.T0(o,r);return l!==o&&rt.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.nu(t);return i!==""?`${e}?`:e}nu(t){let e=csString.prototype.indexOf.call(t,"?"),i,r="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),r=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:r}}A0(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.nu(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.R0(o,c);if(l!==null)return`${l}${r}`}return t}R0(t,e){if(t.length<e.length)return null;let i=[];for(let r=0;r<t.length;r++){let o=t[r];if(r>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[r].key;if(this.sm(c)){let l=e[r].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}T0(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.nu(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.C0(o,c);return`${csArray.prototype.join.call(o,"/")}${r}`}C0(t,e){let i=[],r=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],p=e[r].key;if(this.sm(p)&&l>=c){let u=e[r].value;csArray.prototype.push.call(i,h.length>0?u:""),r++,r===e.length&&(r=0);continue}if(h===p){csArray.prototype.push.call(i,h),r++,r===e.length&&(r=0);continue}for(let u=0;u<r;u++){let E=l-r+u;i[E]=t[E]}r=0,csArray.prototype.push.call(i,h)}for(let l=0;l<r;l++){let h=t.length-r+l;i[h]=t[h]}return i}sm(t){return Ae(t,kl)}Dr(t){return csString.prototype.replace.call(t,cv,lv)}}return s})(),hv=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],uv=1024,dv=1024,Sh=(()=>{class s{constructor(t,e){this.ut=t,this.h=e}getEventTargetPathAndHierarchy(t,e){let i=St(t),r={isNodeSensitive(o){return k.isMaskedElement(o)||k.isMaskedElementChild(o)},isAttributeSensitive(o,c){return k.isMaskedAttribute(o,c)},allWhitelistedAttributes:Hc(this.h.whitelistedAttributes),attributeIgnoreTokens:hv,useAnonymization:e,attrMaxLength:dv,hierarchyMaxLength:uv};return this.ut.getElementPathAndHierarchy(i,r,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPath(t){let e=St(t);return this.ut.getElementPath(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=St(t),{path:i,firstAnchorParent:r}=this.ut.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules}),o=this.I0(r)?r.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=St(t);return this.ut.isValidElement(e)}getElementPath(t){return this.ut.getElementPath(t,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}I0(t){var e;return t!==null&&t.hasAttribute("href")&&!Ae((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),wh=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){this.P0(t,e.event);let i=this.W.getElementPath(t);return this.O0(i,e.event),e}P0(t,e){if(Bm(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+vt.windowOffsetX()),e.y=Math.round(i.top+e.y+vt.windowOffsetY())}}O0(t,e){yl(e)&&(e.tgt=`${t}${fi}${e.tgt}`),jm(e)&&(e.tgtHM=`${t}${fi}${e.tgtHM}`),Hm(e)&&(e.tgtLk=`${t}${fi}${e.tgtLk}`)}}return s})(),_h=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){let i=this.W.getElementPath(t);return{iframePath:e.iframePath?`${i}${fi}${e.iframePath}`:i,commands:e.commands}}}return s})(),bh=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.W.getElementPath(t),r=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${fi}${o.targetPath}`}));return{...e,products:r}}}return s})(),Ah=(()=>{class s{constructor(){this.N0={clientX:2,clientY:3},this.M0={clientX:1,clientY:2},this.k0=[U.POINTER_DOWN,U.POINTER_MOVE,U.POINTER_UP],this.D0=[U.TOUCH_START,U.TOUCH_MOVE,U.TOUCH_END]}transformEvents(t,e){if(!yt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==U.VISIBILITY_CHANGE),e.events.length===0||(V.warn(`IframeRecordingEventsTransformer received event ${I.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=it(t),r=null;csArray.prototype.some.call(e.events,c=>this.im(c)||this.nm(c))&&(r=t.getBoundingClientRect());for(let c of e.events)this.im(c)?this.x0(r,c):this.nm(c)&&this.L0(r,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}L0(t,e){this.rm(this.M0,t,e)}x0(t,e){this.rm(this.N0,t,e)}rm(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}im(t){return csArray.prototype.indexOf.call(this.k0,t.type)!==-1}nm(t){return csArray.prototype.indexOf.call(this.D0,t.type)!==-1}}return s})(),pv=(()=>{class s{constructor(t){this.ru=t}start(){this.ru.onEvent(t=>this.G(t)),this.ru.start()}stop(){this.ru.stop()}G(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;V.warn(e)}}return s})(),fv=(()=>{class s{constructor(){this.Ut={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.ou,"localhost"),csArray.prototype.push.call(s.ou,"fake-tracker.content-square.fr")}start(){It(this.Ut)}stop(){Pt(this.Ut)}onEvent(t){this.O=t}U0(t){if(!t)return!1;let e=t.disposition;return z(t.sourceFile)&&csArray.prototype.some.call(s.ou,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.U0(t)&&this.O({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.ou=["contentsquare","cdnssl.clicktale.net"],H([D("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),gv=(()=>{class s{init(){this.om=new pv(new fv),this.om.start()}onOptout(){this.om.stop()}}return s})();var{toString:BS}=Object.prototype;function Th(s,n){if(typeof s!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");let t=function(...e){let i=n?n.apply(this,e):e[0],{cache:r}=t;if(r.has(i))return r.get(i);let o=s.apply(this,e);return t.cache=r.set(i,o)||r,o};return t.cache=new(Th.Cache||Map),t}Th.Cache=Map;var{hasOwnProperty:FS}=Object.prototype;var Rh=(()=>{class s{constructor(t){this.configuration=t}}return s})(),mv=(()=>{class s extends Rh{constructor(t,e,i){super(t),this.configuration=t,this.Jr=e,this.E=i,this.nR=M.RECORDING_GLOBAL_SAMPLING}refreshQuota(){this.Zr=void 0,this.Va()}onQuotaReady(t){this.Em=t}init(){this.rR()}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==M.QUOTA_REACHED}computeInitialCollectState(t){return this.Zr?(this.E.emitCollectStateChange(this.Zr,Rt.ETR_OFF),this.Zr):(V.warn("Quota file error computeInitialCollectState() called before quota answered"),M.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===M.QUOTA_REACHED?M.QUOTA_REACHED:!Vs.isRecordingSupported()&&this.isReplayRecorded(t)?M.ANALYTICS_ONLY:t.collectState===M.RECORDING_RULES_TARGETING?M.RECORDING_RULES_TARGETING:t.collectState===M.ANALYTICS_ONLY_RULES_TARGETING?M.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===M.RECORDING_GLOBAL_SAMPLING?M.RECORDING_GLOBAL_SAMPLING:M.ANALYTICS_ONLY}abortQuotaServiceRequest(){}isReplayRecorded(t){return t.collectState===M.RECORDING_GLOBAL_SAMPLING||t.collectState===M.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Zr||M.QUOTA_REACHED}setVisitorService(t){}computeInitialCollectStateFromRecordingConsentGranted(t){return M.ANALYTICS_ONLY}to(t){this.Zr=t,this.Em&&this.Em(t)}rR(){this.Jr.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Jr.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Jr.onLoad(t=>this.quotaFileHandler(t))}Va(){this.Jr.isInProgress()||this.Jr.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.oR(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;V.warn(e),this.to(this.nR)}oR(t){let e=!1,i=!1;for(let r of t.quotas)r.quotaType==="ANALYTICS"&&r.value?e=!0:r.quotaType==="RECORDING"&&r.value&&Te.boolean(Math.round(r.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?Vs.isRecordingSupported()?this.to(M.RECORDING_GLOBAL_SAMPLING):this.to(M.ANALYTICS_ONLY):e&&!i?this.to(M.ANALYTICS_ONLY):this.to(M.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return M.ANALYTICS_ONLY}}return H([D("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),H([D("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),yv=3e3,Ev=(()=>{class s extends Rh{constructor(t,e,i,r,o){super(t),this.configuration=t,this.eo=e,this.E=i,this.Yh=r,this.A=o,this.$e=[]}refreshQuota(){}onQuotaReady(t){}canCollect(t){return!0}init(){this.aR()}sanitizeSessionCollectState(t){return(t.collectState===M.QUOTA_REACHED||t.collectState===M.RECORDING_RULES_TARGETING||t.collectState===M.RECORDING_TEMPORARILY)&&(t.collectState=M.ANALYTICS_ONLY),t}computeInitialCollectState(t){return Ke.isReplayConsentNeeded(this.configuration)?M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Ma(t)}computeInitialCollectStateFromRecordingConsentGranted(t){return this.Ma(t)}Ma(t){return Vs.isRecordingSupported()?(this.$e=[],Te.percentage()<this.configuration.replayRecordingRate||this.Yh.isForceReplayRecorded()?csArray.prototype.push.call(this.$e,M.RECORDING_GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.$e,M.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.$e,M.RECORDING_ETR_SAMPLING),this.$e.length>0?(this.Va(t),M.RECORDING_TEMPORARILY):M.ANALYTICS_ONLY):M.ANALYTICS_ONLY}getEligibleCollectState(t){return Vs.isRecordingSupported()?Ke.isRecordingBlockedByConsent(t)?t.collectState===M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:M.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.collectState===M.RECORDING_GLOBAL_SAMPLING?M.RECORDING_GLOBAL_SAMPLING:(this.$e=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.$e,M.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.$e,M.RECORDING_ETR_SAMPLING)),this.$e.length>0?(this.Va(t),M.RECORDING_TEMPORARILY):(t.etrState===Rt.ETR_ON&&this.E.emitCollectStateChange(M.ANALYTICS_ONLY,Rt.ETR_ON),M.ANALYTICS_ONLY)):M.ANALYTICS_ONLY}Va(t){var e;let i=(e=this.R)===null||e===void 0?void 0:e.getVisitor();this.eo.send({recordingTypes:csArray.prototype.map.call(this.$e,Number),url:this.A.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(i==null?void 0:i.id)||"",sn:(i==null?void 0:i.visitsCount)||"",pn:(t==null?void 0:t.pageNumber)||""})}abortQuotaServiceRequest(){this.eo.abort()}isReplayRecorded(t){return Ke.isRecordingBlockedByConsent(t)?!1:t.collectState===M.RECORDING_TEMPORARILY||t.collectState===M.RECORDING_GLOBAL_SAMPLING||t.collectState===M.RECORDING_URL_SAMPLING||t.etrState===Rt.ETR_ON}aR(){this.eo.onError(()=>this.quotaServiceErrorHandler("NetworkError")),this.eo.onTimeout(()=>this.quotaServiceTimeoutHandler(),yv),this.eo.onLoad(t=>this.quotaServiceLoadHandler(t))}quotaServiceErrorHandler(t){this.vm(`error - ${t}`)}quotaServiceTimeoutHandler(){this.vm("timeout")}vm(t){let e=M.ANALYTICS_ONLY;this.Sm(this.$e)?(e=M.RECORDING_GLOBAL_SAMPLING,V.warn(`Quota Service: request ${t} - bypassed by GLOBAL_SAMPLING`)):V.warn(`Quota Service: request ${t}`),this.E.emitCollectStateChange(e,Rt.ETR_OFF)}quotaServiceLoadHandler(t){if(t.status!==200){this.quotaServiceErrorHandler(`Status code: ${t.status}`);return}let e;try{e=csJSON.parse(t.responseText)}catch{this.quotaServiceErrorHandler(`Unable to parse the quota service response: ${t.responseText}`);return}let i=e.allowedRecordingTypes==null?void 0:csArray.prototype.map.call(e.allowedRecordingTypes,csString);if(!i){this.quotaServiceErrorHandler("recording types missing from quota service response");return}let r=Rt.ETR_OFF,o=M.ANALYTICS_ONLY;this.Sm(i)?o=M.RECORDING_GLOBAL_SAMPLING:this.cR(i)&&(o=M.RECORDING_URL_SAMPLING),this.lR(i)&&(r=Rt.ETR_ON),this.E.emitCollectStateChange(o,r)}Sm(t){return csArray.prototype.some.call(t,e=>e===M.RECORDING_GLOBAL_SAMPLING)}cR(t){return csArray.prototype.some.call(t,e=>e===M.RECORDING_URL_SAMPLING)}lR(t){return csArray.prototype.some.call(t,e=>e===M.RECORDING_ETR_SAMPLING)}setVisitorService(t){this.R=t}getInitialCollectState(){return M.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return M.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return H([D("Quota Service: onerror")],s.prototype,"quotaServiceErrorHandler",null),H([D("Quota Service: ontimeout")],s.prototype,"quotaServiceTimeoutHandler",null),H([D("Quota Service: onload")],s.prototype,"quotaServiceLoadHandler",null),s})();function vv(){let s="[data-cs-mask]",n="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,n,t,...e,...i]}function Sv(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var Ch=(()=>{class s{constructor(){this.hR={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.As={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:vv(),Attributes:Sv()};this.As=k.getComputedSelectorSettings(t,this.As)}init(){this.uR()}setMaskedElementSettingsFromCommand(t){if(t=k.sanitizeSelectorUserInput(t),!k.isSelectorUserInput(t))throw new Error(`Command misuse: ${gn[0]}`);this.Eu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Eu(e)}getMaskedElementSettings(t){return t?this.wm(this.hR):this.As}uR(){var t,e,i,r,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(r=window==null?void 0:window.ClickTaleSettings)===null||r===void 0?void 0:r.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{z(h.attr)&&z(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.Eu(l)}Eu(t){this.As=this.wm(t)}wm(t){return k.getComputedSelectorSettings(t,this.As)}}return s})();var wv=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.oi=e,this.us=i,this.C=r,this.E=o,this.dR=()=>{var c;let l=mt.get(te);l!==null&&kn.isValidSessionString(l)?this.et.canCollect(kn.fromRawString(l))?this.init():!((c=this.h.voc)===null||c===void 0)&&c.enabled:(this.et.onQuotaReady(h=>{var p;h!==M.QUOTA_REACHED?this.init():!((p=this.h.voc)===null||p===void 0)&&p.enabled}),this.et.refreshQuota())}}initWithQuota(){var t,e;if(((t=this.h.smbConfig)===null||t===void 0?void 0:t.record)===!1){!((e=this.h.voc)===null||e===void 0)&&e.enabled;return}let i=new dE(this.h.getQuotaUri(),"",{type:"json",cacheMinutes:15});this.et=new mv(this.h,i,this.E),this.et.init(),this.dR()}init(){ds.isSupported()&&ds.setDigestSalt(this.h.projectId.toString());let t,e,i,r,o,c,l,h,p,u,E,y,S,A,C,R,_,j,b,x,B,G,et,dt,pt,v,N,L,F,tt,ft,Nt,Pe,es,yn;this.C.schedule(()=>{t=new gs,e=new vh(t),r=new yh(window.location,e),i=new nn(this.h,r,this.oi),i.init()}),this.C.schedule(()=>{o=new nv,c=new rv,_=new KE(window.location,i),new gv().init(),j=oh.create(V.warn),R=new Ec(j);let Oe=R.create(`${this.h.getLegacyQuotaUri()}/quota`,!0);this.et===void 0&&(this.et=new Ev(this.h,Oe,this.E,_,r),this.et.init())}),this.C.schedule(()=>{l=new kn(this.h,i,o),p=new UE(l,this.et)}),this.C.schedule(()=>{u=new Xp(this.h,i,o),E=new DE(this.h,u,this.E,p),this.us.setContext(E,p),this.et.setVisitorService(E)}),this.C.schedule(()=>{es=new $E(this.h,new HE(this.h,i,c),this.E),y=new jE(E,p,es),S=new Jp(this.h,i,o),A=new qE(window.location,S),C=new GE(A),B=new VE(this.h,E,A),Nt=new Sh(pe,this.h),N=new wh(Nt),L=new _h(Nt),F=new bh(Nt),tt=new Ah,ft=new Eh(N,L,F,tt),v=new fh([yr.UXA]),G=new tv(v,ft),et=new uh(r),dt=new dh(et,v);let Es=new Zp(this.h,i,o);Pe=new av(t,Es),pt=new ov(v,Pe);let Oe=new Wp(E,p,A,Pe,this.h)}),this.C.schedule(()=>{new kE(this.h,E,A,B,y,b,h,_).compute(Oe=>{this.C.schedule(()=>{G.init();let Gs=new iv,me=new FE(this.h,v,es,p,this.E),_t=new QE(this.h,i,c),Ut=new JE(this.E,window.location,_t),Ws=new ZE(v,Ut),En=new sv(v,this.h),vn=new ev(this.h,E,p,x);if(Oe){this.E.emitInitTracking();let Ys=new Ch;new ME(vn,j,E,p,this.E,v,G,this.h,Ws,Ut,me,es,t,Nt,e,r,En,Gs,ft,Pe,pt,et,dt,this.C,R,i,c,this.et,Ys).start()}else new zE(this.E,v,G,Ws,Ut,C,me).start()})})})}}return s})(),Bi=(()=>{let s;return function(n){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(C){let R=C.source,_=C.data;if(c(_)){let j=()=>{let b=r(t,_);E(b,()=>R.postMessage("csBundleLoaded",C.origin))};e=_.token,A(i.loadBundle),l(C.origin)&&j()}}};function r(C,R){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(C,"{version}",R.version),"{token}",R.token),"{domain}",R.domain)}function o(){return e}n.getToken=o;function c(C){return C&&C.type==="csBundleInjection"&&l(C.domain)&&p(C.version)&&h(C.token)}n.isAuthorizedIncomingMessage=c,n.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(C){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(C)||n.hjDomainRegex.test(C)}n.isAuthorizedDomain=l;function h(C){return/^[a-zA-Z0-9]+$/.test(C)}n.isAuthorizedToken=h;function p(C){return/^[a-zA-Z0-9\.]+$/.test(C)}n.isAuthorizedTagVersion=p;function u(){let C=window.opener||window.parent;return window!==C&&window.addEventListener}n.isActivable=u;function E(C,R){let _=document.createElement("script");_.type="text/javascript",_.async=!0,_.src=C,_.onload=R,_.charset="utf-8",document.head.appendChild(_)}function y(){S(i.loadBundle)}n.waitForBundleInjection=y;function S(C){window.addEventListener("message",C,!1)}n.listen=S;function A(C){window.removeEventListener("message",C,!1)}n.removeListener=A}(s||(s={})),s})(),_v=(()=>{let s;return function(n){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,Bi.hjDomainRegex],o,c,l={ping(b){typeof b.data=="string"&&b.data==="ping"&&E(b.origin)&&(c=b.origin,o=Bi.hjDomainRegex.test(b.origin)?i:b.origin,R(l.ping),C(l.insertMessageScript),y(h("utils.js")))},insertMessageScript:_(b=>{typeof b.data=="string"&&b.data!=="ping"&&(R(l.insertMessageScript),y(b.data))})};function h(b){return`${b}?cb=${new csDate().getTime()}`}function p(){return Bi.getToken()}n.getToken=p;function u(){return window!==t&&window.addEventListener}n.isActivable=u;function E(b){return csArray.prototype.some.call(r,x=>x.test(b))}n.isAuthorizedDomain=E;function y(b,x){let B=document.createElement("script");B.type="text/javascript",B.async=!0;let G=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");B.src=`${G}/${e}/${b}`,B.onload=x,B.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(B),S(b)}function S(b){csString.prototype.includes.call(b,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(b,"&mode=")[1])}function A(){C(l.ping),Bi.waitForBundleInjection()}n.waitForConnection=A;function C(b){window.addEventListener("message",b,!1)}n.listen=C;function R(b){window.removeEventListener("message",b,!1)}n.removeListener=R;function _(b){return function(x){x.origin===c&&b(x)}}n.secureListener=_;function j(b){c&&t.postMessage(b,c)}n.post=j}(s||(s={})),s})();var Xn=window.CSFrameCommunication||_v,bv=(()=>{class s extends mn{emitTrackingContextResultMessage(t){for(let e of this.listeners)e.onTrackingContextResultCallback&&e.onTrackingContextResultCallback(t)}emitAfterPageViewCallback(t){for(let e of this.listeners)e.onAfterPageViewCallback&&e.onAfterPageViewCallback(t)}emitIntegrationSessionKeyCallback(t){for(let e of this.listeners)e.onIntegrationSessionKeyCallback&&e.onIntegrationSessionKeyCallback(t)}emitParentRecordingContextChange(t){for(let e of this.listeners)e.onParentRecordingContextChange&&e.onParentRecordingContextChange(t)}emitParentSensitiveStatusChange(t){for(let e of this.listeners)e.onParentSensitiveStatusChange&&e.onParentSensitiveStatusChange(t)}emitStartAnalytics(){for(let t of this.listeners)t.onStartAnalytics&&t.onStartAnalytics()}emitStopAnalytics(){for(let t of this.listeners)t.onStopAnalytics&&t.onStopAnalytics()}emitStartRecording(){for(let t of this.listeners)t.onStartRecording&&t.onStartRecording()}emitStopRecording(){for(let t of this.listeners)t.onStopRecording&&t.onStopRecording()}}return s})(),Ih=(()=>{class s extends mn{constructor(t){super(),this.C=t}emitBeforeNaturalPageView(){for(let t of this.listeners)t.onBeforeNaturalPageView&&t.onBeforeNaturalPageView()}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.C.schedule(()=>e.onStartTracking(t))}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){V.error(e)}}emitBeforeArtificialPageView(){for(let t of this.listeners)t.onBeforeArtificialPageView&&t.onBeforeArtificialPageView()}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}}return H([Lt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})(),Ph=["trackTransaction"],Av=(()=>{class s{constructor(t){this.z=t}init(){this.z.register(hn),this.z.register(oo),this.z.register(gr),this.z.register(mr),this.z.register(Yr),this.z.register(ml),this.z.register(Br),this.z.register(un),this.z.register(Fr),this.z.register(Ph),this.z.register(Ll),this.z.register(Ul),this.z.register(ro),this.z.register(ph),this.z.register(Vl),this.z.register(Xr),this.z.register(Kr),this.z.register(al),this.z.register(ah),this.z.register(ch),this.z.register(lh),this.z.register(hh),this.z.register(so),this.z.register(io),this.z.register(RE),this.z.register(pE),this.z.register(fE),this.z.register(gE)}onStartTracking(){this.z.start()}onOptout(){this.z.stop()}}return s})(),Tv=(()=>{class s extends lt{constructor(t,e){super(),this.f=t,this.T=e,this.Ht=[]}onStart(){this.commandsBatchReady()}onStop(){this.Ht=[]}register(t){for(let e of t)this.f.register([e],(...i)=>this.send(e,i))}send(t,e){csArray.prototype.push.call(this.Ht,{name:t,params:e}),this.isStarted&&this.commandsBatchReady()}commandsBatchReady(){if(this.Ht.length===0)return;let t={commands:this.Ht};this.T.sendToParent(I.Commands,t),this.Ht=[]}}return H([D("Commands.iframe.commandsBatch.send")],s.prototype,"send",null),H([wi({wait:0,mode:"trailing"}),D("send iframe commands batch")],s.prototype,"commandsBatchReady",null),s})(),Rv="Buffer is full, events might be missing.",Cv=(()=>{class s{constructor(t=25){this.bm=t,this.Ln=[]}reset(){this.Ln=[]}getMessages(){return this.Ln}addMessage(t){this.Ln.length<this.bm?csArray.prototype.push.call(this.Ln,t):this.Ln.length===this.bm&&(this.pR(t),csArray.prototype.push.call(this.Ln,t))}pR(t){t.type=I.ChildLogMessage,t.content={message:Rv,errorCode:"",level:nt.warn}}}return s})(),Oh=(()=>{class s extends lt{constructor(t){super(),this.buffer=new Cv(t)}}return s})(),Iv=25,Pv=(()=>{class s extends Oh{constructor(t,e,i,r,o){super(Iv),this.h=t,this.E=e,this.Rs=i,this.zt=r,this.ei=o,this.ze=null,this.Am={boundElement:window,type:"message",listener:c=>this.uh(c)}}onStart(){It(this.Am,!1),this.fR()}onStop(){Pt(this.Am,!1),this.ze&&(st.closeChannelPort(this.ze),this.ze=null)}sendToParent(t,e){let i=this.buildChildBaseMessage(t,e);this.ka(i)}fR(){let t=this.buildChildBaseMessage(I.Discovery);st.sendPostMessage(window.parent,"*",t)}buildChildBaseMessage(t,e){let i=st.buildBaseMessage(t,Ft.Child,this.h.projectId);return e&&(i.content=e),i}ka(t){this.ze!==null?st.sendChannelMessage(this.ze,t):this.buffer.addMessage(t)}gR(t,e){let i=st.getNewChannelMessage();this.ze=i.port1,this.ze.onmessage=o=>{this.fh(o)};let r=this.buildChildBaseMessage(I.Discovery);r.id=e,st.sendPostMessage(window.parent,t,r,[i.port2]),this.sendAllMessagesFromBuffer()}fh(t){switch(t.data.type){case I.TrackingContextResultMessage:this.ei.emitTrackingContextResultMessage(t.data.content);break;case I.IntegrationCallback:{let e=t.data.content;e.initiator===xs.AfterPageView?this.ei.emitAfterPageViewCallback(e):e.initiator===xs.GetSessionKey?this.ei.emitIntegrationSessionKeyCallback(e):V.warn(`Iframe child received unknown IntegrationCallback type from parent : ${csJSON.stringify(t.data)}`);break}case I.Stop:this.E.emitOptout();break;case I.RecordingContext:{let e=t.data.content;this.Rs.setRecordingContext(e),this.ei.emitParentRecordingContextChange(e);break}case I.SensitiveStatus:{let e=t.data.content;this.zt.setSensitiveStatus(e),this.ei.emitParentSensitiveStatusChange(e);break}default:V.warn(`Iframe child received unknown channelMessage type from parent : ${csJSON.stringify(t.data)}`)}}uh(t){if(this.ze===null&&st.isMessageValid(t,Ft.Parent,this.h.projectId,this.h.hostnames))switch(t.data.type){case I.Stop:this.E.emitOptout();break;case I.Discovery:if(!be(t.data.id)||t.data.id<0){V.warn(`Iframe child received discovery without valid id from parent (${t.origin}) : ${csJSON.stringify(t.data)}`);return}this.gR(t.origin,t.data.id);break;default:V.warn(`Iframe child received unknown postMessage type from parent (${t.origin}) : ${csJSON.stringify(t.data)}`)}}sendAllMessagesFromBuffer(){if(this.ze===null)return;let t=this.buffer.getMessages();for(let e of t)st.sendChannelMessage(this.ze,e);this.mR(),this.buffer.reset()}mR(){let t=st.buildBaseMessage(I.EndOfBufferedMessages,Ft.Child,this.h.projectId);st.sendChannelMessage(this.ze,t)}}return s})(),Ov=(()=>{class s{constructor(t){this.T=t}onStartTracking(){this.T.start()}onOptout(){this.T.stop()}}return s})(),Nv=(()=>{class s{constructor(t,e,i,r,o){this.Y=t,this.it=e,this.T=i,this.Rs=r,this.zt=o}init(){this.Y.onChildMessage((t,e,i)=>this.it.emitIframeEvent(t,e,i)),this.Y.setSentiveStatusCallback(()=>this.zt.getSensitiveStatus()),this.Y.setRecordingContextCallback(()=>this.Rs.getRecordingContext())}onStartTracking(){this.Y.start()}onOptout(){this.Y.stop()}onIframeRecordingUserEvent(t){let e={events:t,containsUserEvent:!0};this.T.sendToParent(I.RecordingEvent,e)}onIframeRecordingBrowserEvent(t){let e={events:t,containsUserEvent:!1};this.T.sendToParent(I.RecordingEvent,e)}onIframeAnalysisUserEvent(t){let e={event:t,isUserEvent:!0};this.T.sendToParent(I.AnalysisEvent,e)}onIframeAnalysisBrowserEvent(t){let e={event:t,isUserEvent:!1};this.T.sendToParent(I.AnalysisEvent,e)}onIframeJavascriptError(t){this.T.sendToParent(I.JavascriptError,t)}onIframeApiError(t){this.T.sendToParent(I.ApiError,t)}onIframeDetailedApiError(t){this.T.sendToParent(I.DetailedApiError,t)}onIframeEmerchandisingMessage(t){this.T.sendToParent(I.EmerchandisingMessage,t)}onIframeCommands(t){this.T.sendToParent(I.Commands,t)}onIframeIntegrationCallback(t){this.T.sendToParent(I.IntegrationCallback,t)}onTrackingContextRequestCallback(t){this.T.sendToParent(I.TrackingContextRequestMessage,t)}onIframeStaticResource(t){this.T.sendToParent(I.StaticResource,t)}onIframeCustomError(t){this.T.sendToParent(I.CustomError,t)}onTrackingContextResultCallback(t){this.Y.sendToChildren(I.TrackingContextResultMessage,t)}onAfterPageViewCallback(t){this.Y.sendToChildren(I.IntegrationCallback,t)}onIntegrationSessionKeyCallback(t){this.Y.sendToChildren(I.IntegrationCallback,t)}onParentRecordingContextChange(t){this.Y.sendToChildren(I.RecordingContext,t)}onParentSensitiveStatusChange(t){this.Y.sendToChildren(I.SensitiveStatus,t)}}return s})(),Mv=(()=>{class s extends lt{constructor(t,e,i,r,o,c,l,h){super(),this.zs=t,this.Dt=e,this.T=i,this.ys=r,this.Es=o,this.Ri=c,this.Ci=l,this.Ii=h}init(){var t,e,i,r,o;this.zs.onEvent(c=>this.It(c)),this.Dt.onEvent(c=>this.It(c)),(t=this.ys)===null||t===void 0||t.onEvent(c=>this.It(c)),(e=this.Es)===null||e===void 0||e.onEvent(c=>this.It(c)),(i=this.Ri)===null||i===void 0||i.onEvent(c=>this.It(c)),(r=this.Ci)===null||r===void 0||r.onEvent(c=>this.Fe(c)),(o=this.Ii)===null||o===void 0||o.onEvent(c=>this.Fe(c))}onStart(){var t,e,i,r,o;this.zs.start(),this.Dt.start(),(t=this.ys)===null||t===void 0||t.start(),(e=this.Es)===null||e===void 0||e.start(),(i=this.Ri)===null||i===void 0||i.start(),(r=this.Ci)===null||r===void 0||r.start(),(o=this.Ii)===null||o===void 0||o.start()}onStop(){var t,e,i,r,o;this.zs.stop(),this.Dt.stop(),(t=this.ys)===null||t===void 0||t.stop(),(e=this.Es)===null||e===void 0||e.stop(),(i=this.Ri)===null||i===void 0||i.stop(),(r=this.Ci)===null||r===void 0||r.stop(),(o=this.Ii)===null||o===void 0||o.stop()}It(t){let e={isUserEvent:!0,event:t};this.G(e)}Fe(t){let e={isUserEvent:!1,event:t};this.G(e)}G(t){!this.isStarted||t.event.type===q.RESIZE||this.T.sendToParent(I.AnalysisEvent,t)}}return s})(),kv=["webview:analytics:start"],Dv=["webview:analytics:stop"],xv=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.h=t,this.W=e,this.xt=i,this.T=r,this.ft=o,this.pt=c,this.f=l,this.Dt=h,this.de=p}init(){let t,e,i=Ol(this.h,this.W,this.de),r=[];this.h.collectSubmit||csArray.prototype.push.call(r,"submit");let o=new vl(i,this.W,this.xt,r),c=this.ft.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},l=Nl(this.h,this.W,this.de),h=new El(l,this.Dt,c),p,u,E;this.so=new Mv(o,h,this.T,t,e,u,E,p),this.so.init(),this.ft.isInWebViewContext()&&this.yR()}onStartTracking(){this.so.start()}onOptout(){this.so.stop()}onStartAnalytics(){this.so.start()}onStopAnalytics(){this.so.stop()}yR(){this.f.register(kv,()=>this.pt.emitStartAnalytics(),{disableApplyPending:!0}),this.f.register(Dv,()=>{this.pt.emitStopRecording(),this.pt.emitStopAnalytics()},{disableApplyPending:!0})}}return s})();var Lv=(()=>{class s extends lt{constructor(t,e,i,r,o=[],c){super(),this.h=t,this.tt=e,this.T=i,this.Pe=r,this.Oe=o,this.Lt=c,this.vu=!1,this.fi=!1,this.Ds=new xr,this.j=[],this.Ha=!1,this.fs=l=>this.Fe(l),this.Wn=l=>this.It(l)}init(){this.zc()}zc(){var t;this.Pe.onEvent(this.fs,this.Wn),(t=this.tt)===null||t===void 0||t.onInputNodeToEncrypt(this.Wn)}setEnableOnlineAssets(t){this.vu=t!=null?t:!1}setOnlineAssetsEnabledOnNextStart(t){this.fi=t}getStaticResourceManagerStatus(){return this.Lt?{supported:Ls.isSupported(),onlineAssets:{activated:this.vu,enableOnNextStart:this.fi}}:null}Fe(t){this.wR(t),this.Ba()}It(t){this.Tm(t),this.Ba()}Tm(t){csArray.prototype.push.call(this.j,t),this.Ha=!0}wR(t){csArray.prototype.push.call(this.j,t)}Ba(){X(this.Oe,e=>{var i;return(i=e.flushEvents)===null||i===void 0?void 0:i.call(e)});let t={containsUserEvent:this.Ha,events:this.j};this.T.sendToParent(I.RecordingEvent,t),this.j=[],this.Ha=!1}onStart(){this.Lt&&this.vu&&this.Lt.enableOnlineAssets(),this.Pe.start(),this.h.emitDebugEvents&&this.Ds.emit("replayRecordingStarted"),X(this.Oe,t=>{t.start&&t.start()})}onStop(){var t;this.Pe.stop(),(t=this.Lt)===null||t===void 0||t.disableOnlineAssets(),X(this.Oe,e=>{e.stop&&e.stop()})}addInitialDom(t){for(let e=0;e<this.j.length;e+=1)if(this.j[e].date>=t.date){csArray.prototype.splice.call(this.j,e,0,t),this.Ha=!0,this.Ba();return}this.Tm(t),this.Ba()}}return s})(),Nh=(()=>{class s{constructor(t){this.h=t}isReplayUnanonymizedAllowedByConsent(){return!this.h.consentRequired}}return s})(),Er=(()=>{class s{static isWebViewLocalAssetsSupported(){return"URL"in window}}return s})(),Uv=["webview:replay:start"],Vv=["webview:replay:stop"],jv=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.h=t,this.pt=e,this.Rm=i,this.si=r,this.Su=o,this.f=c,this.A=l,this.zt=h,this.wu=!1}init(){let t=new Nh(this.h),e=new Zr;if(this.Zt=new uh(this.A),new dh(this.Zt,this.f).init(),this.ot=new Jr(t,this.h,this.A,e),this.ot.init(),Er.isWebViewLocalAssetsSupported()){let r=p=>{this.io(p)},o=p=>V.error("An error occurred while fetching a styleSheet: "+p),c=new Set,l=p=>!c.has(p),h=p=>{c.add(p.assetId),this.io([p])};this.Rm.onAsset(p=>{this._R(p)}),this.Rm.onStyleSheetFound(p=>{this.Su.getStyleSheetAssets(p.assetId,r,o,l,h)})}this.bR()}onStartRecording(){if(this.wu=!0,!this.Zt.isUrlExcludedForSessionReplay()){let t=this.zt.getSensitiveStatus();this.pt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}onStopRecording(){this.wu=!1,this.pt.emitParentRecordingContextChange({isRecording:!1})}onArtificialPageViewEnd(){this.pt.emitParentRecordingContextChange({isRecording:!1})}onAfterArtificialPageView(){if(this.N()&&!this.Zt.isUrlExcludedForSessionReplay()){let t=this.zt.getSensitiveStatus();this.pt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}N(){return this.wu}bR(){this.f.register(Uv,()=>{this.pt.emitStartAnalytics(),this.pt.emitStartRecording()},{disableApplyPending:!0}),this.f.register(Vv,()=>this.pt.emitStopRecording(),{disableApplyPending:!0})}_R(t){this.si.sendToParent(I.Assets,{assets:[t]})}io(t){t.length!==0&&this.si.sendToParent(I.Assets,{assets:t})}}return s})();function Hv(s){var n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return s.replace(n,function(t,e,i,r){if(e==="\\")return t.slice(1);if(r)return r;var o=parseInt(i,16),c=55296<=o&&o<=57343;return c||o===0||o>1114111?"\uFFFD":String.fromCodePoint(o)})}var Bv=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Fv(s,n){var t=s.replace(Bv,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=e[3]||e[4],o=e[9]||e[10]||e[11],c=Hv((r||o).trim()),l=r?"@import ":"",h=n(c)||c;return l+"url("+$v(h)+")"});return t}function $v(s){return s.indexOf('"')===-1?'"'+s+'"':s.indexOf("'")===-1?"'"+s+"'":s}function zv(s){var n=[];return Fv(s,function(t){return n.push(t),t}),n}var Mh=(()=>{class s{constructor(t){this.AR=t}getStyleSheetAssets(t,e,i,r,o){let c=[];if(!ar(t))return;let l=(p,u)=>{let E=this.TR(p,u);csArray.prototype.forEach.call(E,y=>{csArray.prototype.push.call(c,y),ar(y.assetId)&&r(y.assetId)&&(o==null||o(y),this.getStyleSheetAssets(y.assetId,e,i,r,o))}),e(c)},h=p=>i(p);this.AR.getResourceContentText(t,l,h)}TR(t,e){return this.RR(t,zv(e))}RR(t,e){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(e,i=>!$t(i)),i=>!Ac(i)),i=>({assetId:gc(i,t),assetBasePath:t,assetRawPath:i}))}}return s})(),kh=(()=>{class s{getResourceContentText(t,e,i){let r=c=>{e(t,c.responseText)},o=this.CR(r,i);o.open("GET",t),o.send()}CR(t,e){let i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(i.status===200?t(i):e(i.statusText))},i}}return s})(),qv=(()=>{class s extends lt{constructor(t,e){super(),this.Ae=t,this.T=e}onStart(){}onStop(){}init(){this.Ae.onSendStaticResource(t=>this.T.sendToParent(I.StaticResource,t))}}return s})(),Gv=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,E,y,S){this.h=t,this.I=e,this.jt=i,this.E=r,this.T=o,this.Rs=c,this.f=l,this.ei=h,this.ft=p,this.A=u,this.zt=E,this.K=y,this.tt=S}init(){let t=[],e=this.Rs.getRecordingContext();this.yr=new $c(!!e.useAnonymization,this.h.whitelistedAttributes,this.I,this.h.anonymizeDigits);let i=[];csArray.prototype.push.call(i,new jc,this.yr,new zc(this.K)),csArray.prototype.push.call(i,new qc);let r=new Uc;csArray.prototype.push.call(t,r),!this.ft.isInWebViewContext()&&this.h.useStaticResourceManager&&Ls.isSupported()&&(this.Lt=new Ls,csArray.prototype.push.call(i,this.Lt),this.Ae=new rl,this._u=new qv(this.Ae,this.T),this._u.init()),this.bi=new _c,this.bi.init(),csArray.prototype.push.call(t,this.bi),csArray.prototype.push.call(t,new kc(window.location,this.I));let o=[this.jt,new Nc,new il(csArray.prototype.filter.call(t,h=>h)),new Xc,new Kc,new Jc,new Yc(this.tt)],c=new sl(o,i),l=new nl(c,this.E,this.Ae);if(this.ii=new Lv(this.h,this.tt,this.T,l,t,this.Lt),this.f.register(ol,()=>this.Rs.getRecordingContext().isRecording),this.f.register(cl,()=>this.ii.getStaticResourceManagerStatus()),this.ii.init(),this.ft.isInWebViewContext()){let h=new Mh(new kh);this.bu=new jv(this.h,this.ei,r,this.T,h,this.f,this.A,this.zt),this.ei.addListener(this.bu),this.E.addListener(this.bu),this.bu.init()}}onParentRecordingContextChange(t){var e,i;t.useAnonymization!==void 0&&this._i(t.useAnonymization),t.enableOnlineResourcesOnNextPageview!==void 0&&this.ii.setOnlineAssetsEnabledOnNextStart(t.enableOnlineResourcesOnNextPageview),t.isRecording?(this.Pl(),this.ii.setEnableOnlineAssets(t.enableOnlineResources),this.ii.start(),(e=this._u)===null||e===void 0||e.start()):(this.ii.stop(),(i=this._u)===null||i===void 0||i.stop())}onInitialDomStart(){}onInitialDomDone(t){this.bi.start(),this.ii.addInitialDom(t)}_i(t){var e;this.yr.setAnonymization(t),(e=this.DS)===null||e===void 0||e.setAnonymization(t)}onOptout(){this.ii.stop()}Pl(){var t,e,i,r;if(!((e=(t=this.h.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.h.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;X(o,c=>{Ps(c)&&Ie.setShadowRootFilter(l=>{try{return Kt.call(l.host,c)}catch{return!1}})})}}}return s})(),Wv=(()=>{class s{constructor(t,e){this.si=t,this.Cm=e}init(){this.si.onWebViewEvent((t,e)=>{this.Cm.emitWebviewEventToBridge(t,e)})}onStartTracking(){this.si.start()}onOptout(){this.si.stop()}onStartAnalytics(){this.si.setAnalyticsStatus(!0)}onStopAnalytics(){this.si.setAnalyticsStatus(!1)}onParentRecordingContextChange(t){this.Cm.setSessionReplayStatus(t.isRecording)}}return s})(),oe=(()=>{let s;return function(n){n[n.PAGE_VIEW=4]="PAGE_VIEW",n[n.TAP=6]="TAP",n[n.LONG_PRESS=8]="LONG_PRESS",n[n.DRAG=9]="DRAG",n[n.FLICK=10]="FLICK",n[n.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",n[n.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",n[n.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",n[n.API_ERROR=21]="API_ERROR",n[n.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",n[n.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN"}(s||(s={})),s})(),Yv=(()=>{class s{constructor(){this.xi=1}transformEvent(t){switch(t.type){case q.TAP:return{version:this.xi,type:oe.TAP,data:{path:t.tgt}};case q.DRAG:{let e=t;return{version:this.xi,type:oe.DRAG,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}case q.FLICK:{let e=t;return{version:this.xi,type:oe.FLICK,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}default:return null}}}return s})(),Xv=(()=>{class s{constructor(t,e,i,r){this.A=t,this.ae=e,this.ce=i,this.Xs=r,this.xi=1}transformEvent(t,e){switch(t){case I.ApiError:case I.DetailedApiError:{let i=this.ce.anonymize(e);return{version:this.xi,data:i}}case I.JavascriptError:{let i={...e,pageUrl:this.A.getAnonymizedUrl()},r=this.ae.anonymize(i);return{version:this.xi,data:{...r,date:O.now()}}}case I.CustomError:{let i=e;return i.message=this.Xs.anonymize(i.message),{version:this.xi,data:{...i,date:O.now()}}}default:return null}}}return s})(),Kv=2,gt=(()=>{let s;return function(n){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}n.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let S=window.CSJavascriptBridge.getVersion();if(le(S))return S}catch{V.warn("an error occurred when calling getVersion")}return null}n.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}n.notifyIsReadyForTracking=i;function r(S){window.CSJavascriptBridge.sendEvent(csJSON.stringify(S))}n.sendAnalysisEvent=r;function o(S){if(window.CSJavascriptBridge.sendSREvent)for(let A of S.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(A))}n.sendSREvent=o;function c(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(S))}n.sendLog=c;function l(){window.CSJavascriptBridge.optIn()}n.sendOptIn=l;function h(){window.CSJavascriptBridge.optOut()}n.sendOptOut=h;function p(S,A){window.CSJavascriptBridge.sendDynamicVar(S,A)}n.sendDynamicVariable=p;function u(S,A,C){window.CSJavascriptBridge.sendTransaction(S,A,C)}n.sendTransaction=u;function E(S,A){if(window.CSJavascriptBridge.sendAssets){let C=csJSON.stringify(S);window.CSJavascriptBridge.sendAssets(C,A||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(S,C=>C.assetId))}n.sendAssets=E;function y(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(S))}n.sendNativeSREvent=y}(s||(s={})),s})(),Qv=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.Im=t,this.Je=e,this.IR=i,this.Fa=r,this.Un=o,this.E=c,this.A=l,this.lt=h,this.Au=!1}async emitWebviewEventToBridge(t,e){switch(t){case I.AnalysisEvent:{let i=this.IR.transformEvent(e.event);i&&gt.sendAnalysisEvent(i);break}case I.RecordingEvent:gt.sendSREvent(e);break;case I.ChildLogMessage:gt.sendLog(e);break;case I.Commands:V.tryToExecute(`SDKMessageUtils.sendMessage.sendCommandMessage: ${e}`,()=>{this.PR(e)})();break;case I.Assets:{let{assets:i,serializationId:r}=e,o=await this.Un.getTransformedAssets(i,r);gt.sendAssets(o,r);break}case I.JavascriptError:{let i=this.Fa.transformEvent(I.JavascriptError,e);i&&(this.Au&&gt.sendNativeSREvent({...i,type:oe.JAVASCRIPT_ERROR_SR}),gt.sendAnalysisEvent({...i,type:oe.JAVASCRIPT_ERROR_AN}));break}case I.ApiError:{let i=this.Fa.transformEvent(I.ApiError,e);i&&(gt.sendAnalysisEvent({...i,type:oe.API_ERROR}),rt.counters.networkRequests.count("collected"));break}case I.DetailedApiError:{let i=this.Fa.transformEvent(I.DetailedApiError,e);i&&(gt.sendNativeSREvent({...i,type:oe.DETAILED_API_ERROR}),rt.counters.networkRequests.count("collected"));break}default:break}}setSessionReplayStatus(t){this.Au=t}PR(t){let e=t.commands;for(let i of e)switch(!0){case csArray.prototype.indexOf.call(ph,i.name)>=0:gt.sendOptIn();break;case csArray.prototype.indexOf.call(ro,i.name)>=0:this.E.emitOptout(),gt.sendOptOut();break;case csArray.prototype.indexOf.call(hn,i.name)>=0:this.NR(i);break;case csArray.prototype.indexOf.call(Yr,i.name)>=0:this.MR(i);break;case csArray.prototype.indexOf.call(Br,i.name)>=0:this.Pm(i);break;case csArray.prototype.indexOf.call(un,i.name)>=0:break;case csArray.prototype.indexOf.call(Fr,i.name)>=0:this.Da();break;case csArray.prototype.indexOf.call(Ph,i.name)>=0:this.Pm(i),this.Da();break;case csArray.prototype.indexOf.call(tn,i.name)>=0:this.lt.addUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(so,i.name)>=0:this.lt.addPartialUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(io,i.name)>=0:this.lt.resetPartialUrlMaskingPatterns();break;case csArray.prototype.indexOf.call(qs,i.name)>=0:this.kR(i);break;default:V.warn(`WebviewBridgeEventEmitter received an unknown command: ${csJSON.stringify(i)}`);break}}NR(t){if(t.params.length!==1)return;let e=t.params[0];if(!(!Yt(e)||!("key"in e)||!("value"in e))&&di.isKeyValid(e.key)&&di.isValueValid(e.value)){let i=this.Im.anonymizePII(e.key),r=be(e.value)?e.value:this.Im.anonymizePII(e.value);gt.sendDynamicVariable(i,r)}}MR(t){if(t.params.length!==1)return;let e=t.params[0];if(z(e)){let i={type:oe.PAGE_VIEW,version:1,data:{url:e}};this.A.overridePath(e),this.E.emitArtificialPageViewEnd(),gt.sendAnalysisEvent(i),this.E.emitAfterArtificialPageView()}}Pm(t){if(t.params.length!==1)return;let[e]=t.params;e.value&&(e.revenue=e.value),this.Je.addTransaction(e)}Da(){let t=this.Je.getTransaction();pr.isValid(t)&&(gt.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.Je.clear())}kR(t){if(t.params.length<1)return;let e=t.params[0],i=t.params[1]||{};if(!(z(e)&&Yt(i)))return;let r=Gl.buildCustomErrorEvent(e,i),o=this.Fa.transformEvent(I.CustomError,r);o&&(this.Au&&gt.sendNativeSREvent({...o,type:oe.CUSTOM_ERROR_SR}),gt.sendAnalysisEvent({...o,type:oe.CUSTOM_ERROR_AN}))}}return s})();var Jv="REMOTE_ASSET",Fa="LOCAL_ASSET",Zv="UNKNOWN_ASSET_TYPE",vr="NONE",Dh="ONLY_LOCAL_ASSETS",Sr="ALL",tS=(()=>{class s{constructor(t){var e,i;this.DR=t,this.Tu=new Set,this.$a=vr;try{let r=(i=(e=window.CSJavascriptBridge)===null||e===void 0?void 0:e.getAssetTransformerMode)===null||i===void 0?void 0:i.call(e);(r===Dh||r===Sr)&&(this.$a=r)}catch{}}setAssetProcessingMode(t){this.$a=t}async getTransformedAssets(t,e){if(this.$a===vr)return t;let i=[];for(let r of t){let o=r.assetId,c=this.xR(o);if(this.$a===Sr||c===Fa){let l=o;if(this.LR(o,e)&&(l=this.UR(o,e)),this.Tu.has(l)){csArray.prototype.push.call(i,r);continue}try{let h=await this.DR.getAssetContent(o);if(this.Tu.has(l)){csArray.prototype.push.call(i,r);continue}csArray.prototype.push.call(i,{...r,retrievedAssetContent:h}),this.Tu.add(r.assetId)}catch(h){V.error(`an error occurred while getting data for asset: ${l}: ${h}`),csArray.prototype.push.call(i,r)}}else csArray.prototype.push.call(i,r)}return i}xR(t){let e=window.WEBVIEW_SERVER_URL||null;try{let{protocol:i}=new csURL(t);return i==="file:"||e&&csString.prototype.startsWith.call(t,e)?Fa:Jv}catch(i){V.error(`Error constructing URL (${t}"): ${i.message}`)}return Zv}LR(t,e){return e&&csString.prototype.endsWith.call(t,".css")||!1}UR(t,e){return`${t}#${e}`}}return s})(),eS=(()=>{class s{constructor(){this.VR=50*1024*1024,this.jR=30*1024*1024,this.Ru=0,this.Cu=!1,this.za=new Map,this.At=[]}async getAssetContent(t){let e=this.za.get(t);return e||new Promise((i,r)=>{csArray.prototype.push.call(this.At,{assetUrl:t,successCallback:i,errorCallback:r}),this.Cu||this.HR()})}async HR(){for(this.Cu=!0;this.At.length>0;){let{assetUrl:t,successCallback:e,errorCallback:i}=csArray.prototype.shift.call(this.At),r=this.za.get(t);if(r){e(r);continue}try{let c=(await this.BR("GET",t,"blob")).target;if(c.status===200){let l=c.getResponseHeader("Content-Type"),h=Number(c.getResponseHeader("Content-Length"));if(h&&Number(h)>this.jR){let u=`asset is too big, size = ${h} bytes`;i(u);continue}let p=new csFileReader;p.onload=()=>{let E={data:csString.prototype.split.call(p.result,"base64,")[1],mimeType:l!=null?l:""};this.Ru+=h,this.Ru>this.VR&&(this.Ru=0,this.za.clear()),this.za.set(t,E),e(E)},p.onerror=()=>{i("Error converting XHR response to base64")},p.readAsDataURL(c.response)}else i(`error downloading ${t}: ${c.statusText}`)}catch(o){let c=`Error downloading resource ${t}: ${o.message}`;i(c)}}this.Cu=!1}BR(t,e,i){return new Promise(function(r,o){let c=new XMLHttpRequest;c.open(t,e),c.responseType=i,c.onload=r,c.onerror=o,c.send()})}}return s})();function sS(s,n){let t=Oc({...n,async:!1}),e;return t(s,i=>e=i),e}var iS=(()=>{class s{constructor(t,e){this.T=t,this.Su=e,this.Om=new Dc}FR(){let t=new Set;zt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{t.has(i)||(this.Om.scanElement(i),t.add(i))})}handleCommand(t){let e=t&&t.withAssets,i=[],r=new Set,o=new Set,c=[];e&&Er.isWebViewLocalAssetsSupported()?(this.Om.onScannedAsset(({type:p,asset:u})=>{p==="stylesheet"&&!o.has(u.assetId)&&(o.add(u.assetId),csArray.prototype.push.call(c,u)),r.has(u.assetId)||(r.add(u.assetId),csArray.prototype.push.call(i,u))}),this.FR()):Er.isWebViewLocalAssetsSupported()||V.warn("Local asset is not supported on this browser");let l=nS(),h=csJSON.stringify(l);if(e){let p=Wl.generate();return this.$R(i,c,p),csJSON.stringify({serializedDom:h,serializationId:p})}return h}$R(t,e,i){e.length===0?this.io(t,i):this.zR(t,e,i,(r,o)=>this.io(r,o))}zR(t,e,i,r){let o=0,c=0,l=new Set(csArray.prototype.map.call(t,y=>y.assetId)),h=y=>!l.has(y),p=y=>{l.has(y.assetId)||(l.add(y.assetId),csArray.prototype.push.call(e,y),csArray.prototype.push.call(t,y))},u=y=>{for(let S of y)l.has(S.assetId)||(l.add(S.assetId),csArray.prototype.push.call(t,S));o++,o+c===e.length&&r(t,i)},E=y=>{c++,V.error("An error occurred while fetching a styleSheet: "+y),o+c===e.length&&r(t,i)};csArray.prototype.forEach.call(e,y=>{this.Su.getStyleSheetAssets(y.assetId,u,E,h,p)})}io(t,e){this.T.sendToParent(I.Assets,{assets:t,serializationId:e})}}return s})();function nS(){return cE(),oE(sS(document))}var rS=(()=>{class s{constructor(t){this.h=t,this.Iu=null}isSdkTrackingContext(t){return Ot(t)&&Yt(t)&&z(t.sessionKey)&&be(t.pageNumber)&&z(t.pageViewType)&&Qn(t.isRecording)}update(t){if(!this.isSdkTrackingContext(t)){V.warn(`webViewTrackingContext.service received wrong sdkTrackingContext, content:${csJSON.stringify(t)}`),this.Iu=null;return}this.Iu={...t,recordingConsentState:ri.NOT_NEEDED,projectId:this.h.projectId,uxaDomain:this.h.uxaDomain,...this.h.smbConfig}}getTrackingContext(){return this.Iu}}return s})(),oS=(()=>{class s{constructor(t){this.ni=t,this.te=[]}handleCommand(t){if(!Xt(t))return;this.Er(t);let e=this.ni.getTrackingContext();e!==null&&this.kt(t,e)}executeRegisteredCallbacks(t){let e=t.trackingContext;e&&csArray.prototype.map.call(this.te,i=>this.kt(i,e))}Er(t){csArray.prototype.push.call(this.te,t)}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),aS=(()=>{class s{constructor(t,e){this.Y=t,this.ni=e}onIframeIntegrationCallback(t){let e=this.ni.getTrackingContext();e!==null&&(t.trackingContext=e,this.Y.sendToChildren(I.IntegrationCallback,t))}}return s})(),xh=(()=>{class s{constructor(t){this.commandsService=t,this.Sr=new hl}registerChildCommands(){this.commandsService.register(dl,t=>this.Sr.handleCommand(t,this.Vn))}onParentRecordingContextChange(t){this.Vn={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||Rt.ETR_OFF},this.Sr.executeCallbacks(this.Vn)}}return H([wi({wait:0,mode:"trailing"})],s.prototype,"onParentRecordingContextChange",null),s})(),cS=["serializeWebView","webview:serializeWebView"],lS=["setAssetTransformerMode","webview:setAssetTransformerMode"],hS=["webview:onAfterScreenView"],uS=(()=>{class s extends xh{constructor(t,e,i,r,o,c,l){super(t),this.commandsService=t,this.T=e,this.Y=i,this.Un=r,this.qR=o,this.it=c,this.h=l}init(){this.ni=new rS(this.h),this.GR=new aS(this.Y,this.ni),this.it.addListener(this.GR),this.Nm=new oS(this.ni);let t=new Mh(new kh);this.WR=new iS(this.T,t),this.ht()}onAfterPageViewCallback(t){this.Nm.executeRegisteredCallbacks(t)}ht(){super.registerChildCommands(),this.commandsService.register(Hr,t=>{this.Nm.handleCommand(t)}),this.commandsService.register(hS,t=>{this.ni.update(t);let e=this.ni.getTrackingContext();e!==null&&this.qR.emitAfterPageViewCallback({initiator:xs.AfterPageView,trackingContext:e})}),this.commandsService.register(cS,t=>this.WR.handleCommand(t)),this.commandsService.register(lS,t=>{(t===vr||t===Dh||t===Sr)&&this.Un.setAssetProcessingMode(t)})}}return s})(),dS=(()=>{class s{constructor(t){this.T=t,this.te={}}handleCommand(t){Xt(t)&&this.Er(t)}executeRegisteredCallbacks(t){let e=t.trackingContext;if(e)if(t.callbackId){let i=this.te[t.callbackId];i&&this.kt(i,e)}else for(let i in this.te)this.kt(this.te[i],e)}Er(t){let e=Te.integer(),i={callbackId:e,initiator:xs.AfterPageView};this.te[e]=t,this.T.sendToParent(I.IntegrationCallback,i)}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),pS=(()=>{class s{constructor(t){this.T=t,this.Ti={}}handleCommand(t){Yt(t)&&Xt(t.callback)&&this.vr(t.callback)}executePendingCallbacks(t){let{trackingContext:e,callbackId:i}=t;if(!i||!e)return;let r=this.Ti[i];r&&(delete this.Ti[i],this.kt(r,e.sessionKey))}vr(t){let e=Te.integer(),i={callbackId:e,initiator:xs.GetSessionKey};this.Ti[e]=t,this.T.sendToParent(I.IntegrationCallback,i)}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),fS=(()=>{class s{constructor(t,e){this.T=t,this.Y=e,this.qa={}}handleCommand(t,e){Yt(t)&&Xt(e)&&this.vr(t,e)}executePendingCommand(t){let{trackingContext:e,callbackId:i}=t;if(!(!i||!e))if(this.qa[i]){let[r,o]=this.qa[i];r&&(delete this.qa[i],this.kt(e,r,o))}else this.Y.sendToChildren(I.TrackingContextResultMessage,t)}vr(t,e){let i=Te.integer();this.qa[i]=[t,e],this.T.sendToParent(I.TrackingContextRequestMessage,{callbackId:i})}kt(t,e,i){csSetTimeout(()=>{let r=ll(t,e);i(r)})}}return s})(),gS=(()=>{class s extends xh{constructor(t,e,i){super(t),this.commandsService=t,this.T=e,this.Y=i}init(){this.Mm=new dS(this.T),this.km=new pS(this.T),this.Dm=new fS(this.T,this.Y),this.ht()}onAfterPageViewCallback(t){this.Mm.executeRegisteredCallbacks(t)}onIntegrationSessionKeyCallback(t){this.km.executePendingCallbacks(t)}onTrackingContextResultCallback(t){this.Dm.executePendingCommand(t)}ht(){super.registerChildCommands(),this.commandsService.register(Hr,t=>{this.Mm.handleCommand(t)}),this.commandsService.register(ul,t=>this.km.handleCommand(t)),this.commandsService.register(pl,(t,e)=>{this.Dm.handleCommand(t,e)})}}return s})(),mS=(()=>{class s{constructor(t,e,i,r,o,c,l){this.f=t,this.mt=e,this.jt=i,this.Ot=r,this.tt=o,this.no=c,this.On=l}init(){var t,e;this.no&&this.tt&&((t=this.no)===null||t===void 0||t.addSelector((e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht(),this.ge=new eo(this.jt,this.mt,this.Ot,this.no,this.On)}YR(){this.ge.start()}Fc(){this.ge.stop()}onParentSensitiveStatusChange(t){var e,i;t.maskedElementSettings&&this.mt.setMaskedElementSettingsFromParent(t.maskedElementSettings),t.capturedElementSelector&&this.Ot.setWhitelistedElementsSelector(t.capturedElementSelector,!1),t.encryptionSelectors&&((e=this.no)===null||e===void 0||e.addSelector(t.encryptionSelectors),(i=this.tt)===null||i===void 0||i.setEncryptionSelectors(t.encryptionSelectors,!1)),t.started?this.YR():this.Fc()}ht(){this.f.register(to,t=>{this.Ot.setWhitelistedElementsSelector(t)}),this.f.register(gn,t=>{this.mt.setMaskedElementSettingsFromCommand(t)}),this.f.register(nh,t=>{var e,i;(e=this.tt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.no)===null||i===void 0||i.addSelector(t)})}}return s})(),yS=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.E=t,this.f=e,this.mt=i,this.jt=r,this.ot=o,this.Ot=c,this.zt=l,this.On=h,this.ge=new eo(this.jt,this.mt,this.Ot,void 0,this.On,this.ot)}init(){this.ot.init(),this.ht()}onStartAnalytics(){this.kn()}onAfterArtificialPageView(){this.xm(),this.kn()}onStopAnalytics(){this.xm()}kn(){this.ge.start(),this.zt.setSensitiveStatus({started:!0,useAnonymization:this.ot.shouldUseAnonymization()}),this.E.emitSensitiveStatusChange()}xm(){this.ge.stop(),this.zt.setSensitiveStatus({started:!1,useAnonymization:this.ot.shouldUseAnonymization()}),this.E.emitSensitiveStatusChange()}ht(){this.f.register(to,t=>{this.Ot.setWhitelistedElementsSelector(t),this.E.emitSensitiveStatusChange()}),this.f.register(gn,t=>{this.mt.setMaskedElementSettingsFromCommand(t),this.E.emitSensitiveStatusChange()})}}return s})(),ES=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.pt=t,this.E=e,this.h=i,this.T=r,this.Rs=o,this.f=c,this.ft=l,this.C=h,this.zt=p,this.Na=()=>{this.f.start(),this.Mn.start()}}start(){let t,e,i,r,o,c,l,h,p,u,E,y,S,A,C,R;this.C.schedule(()=>{if(o=new Ch,c=new eh(()=>{}),S=new sh,R=new ih,this.ft.isInIframeContext()){let _=new mS(this.f,o,c,S,A,C,R);_.init(),this.pt.addListener(_)}if(i=new gs,u=new vh(i),E=new yh(window.location,u),this.ft.isInWebViewContext()){let _=new Nh(this.h),j=new Zr,b=new Jr(_,this.h,E,j),x=new yS(this.E,this.f,o,c,b,S,this.zt);x.init(),this.pt.addListener(x),this.E.addListener(x)}}),this.C.schedule(()=>{t=new Sh(pe,this.h),e=new Dl(t),r=new xv(this.h,t,e,this.T,this.ft,this.pt,this.f,new ql(V),this.zt),this.pt.addListener(r)}),Vs.isRecordingSupported()&&this.C.schedule(()=>{let _=new Gv(this.h,i,c,this.E,this.T,this.Rs,this.f,this.pt,this.ft,E,this.zt,u,A);this.E.addListener(_),this.pt.addListener(_),_.init()}),this.C.schedule(()=>{p=new Bl(this.h);let _=new wh(t),j=new _h(t),b=new bh(t),x=new Ah;h=new Eh(_,j,b,x),l=new Nv(p,h,this.T,this.Rs,this.zt)}),this.C.schedule(()=>{h.addListener(l),this.pt.addListener(l),this.E.addListener(l),this.E.addListener(r)}),this.C.schedule(()=>{let _;if(this.ft.isInWebViewContext()){let j=new eS;this.Un=new tS(j),_=new uS(this.f,this.T,p,this.Un,this.pt,h,this.h)}else _=new gS(this.f,this.T,p);this.pt.addListener(_),_.init()}),this.C.schedule(()=>{l.init(),r.init()}),this.C.schedule(()=>{var _,j,b,x;if(this.ft.isInWebViewContext()){let B=new Yv,G=new zl(i,E),et=new Wr,dt=new $l(et,u,!!(!((j=(_=this.h)===null||_===void 0?void 0:_.experimental)===null||j===void 0)&&j.anonymizeNameInUrls)),pt=new rh(i,!((x=(b=this.h)===null||b===void 0?void 0:b.experimental)===null||x===void 0)&&x.anonymizeNameInUrls?u:void 0),v=new Xv(E,G,dt,pt),N=new Qv(i,new gl(i,null,null),B,v,this.Un,this.E,E,et),L=new Wv(this.T,N);L.init(),this.E.addListener(L),this.pt.addListener(L)}else{let B=new Ov(this.T);this.E.addListener(B)}}),this.Mn=new xl,this.C.schedule(()=>{this.Mn.onLoad(()=>{this.E.emitStartTracking()}),this.Na()})}}return s})(),vS=2500,SS=500,wS=(()=>{class s extends Oh{constructor(t,e,i=SS){super(vS),this.pt=t,this.h=e,this.XR=i,this.Li=!1,this.Ga=void 0,this.Pu=!0}onStart(){this.KR()}onStop(){this.buffer.reset(),this.Ou&&window.csClearInterval(this.Ou)}sendToParent(t,e){var i;if(this.QR()){(i=this.Nu)===null||i===void 0||i.call(this,t,e);return}if(this.JR(t)){let r=this.buildChildBaseMessage(t,e);this.buffer.addMessage(r)}}QR(){return this.Li&&this.Pu}JR(t){return!this.Li||t===I.Commands}onWebViewEvent(t){this.Nu=t}setAnalyticsStatus(t){this.Pu=t,this.Pu&&this.ZR()}sendAllMessagesFromBuffer(){var t;let e=this.buffer.getMessages();for(let i of e)(t=this.Nu)===null||t===void 0||t.call(this,i.type,i.content);this.buffer.reset()}ZR(){var t;if(!this.Li)return;let e=this.buffer.getMessages();for(let i of e)i.type===I.Commands&&((t=this.Nu)===null||t===void 0||t.call(this,i.type,i.content));this.buffer.reset()}buildChildBaseMessage(t,e){return{type:t,content:e}}KR(){this.Li=gt.isCSJavascriptBridgeDefined(),this.Li?this.Lm():this.Ou=window.csSetInterval(()=>{this.Li=gt.isCSJavascriptBridgeDefined(),this.Li&&(this.Lm(),window.csClearInterval(this.Ou))},this.XR)}Lm(){this.tC(),this.Ga=gt.getBridgeVersion(),this.Ga===null?this.sendAllMessagesFromBuffer():this.Ga>=Kv?(this.eC(),gt.notifyIsReadyForTracking()):V.warn(`bridge version ${this.Ga} is not supported`)}tC(){let t={message:csJSON.stringify(this.h),errorCode:"TAG_CONFIGURATION",level:nt.critical};gt.sendLog(t)}eC(){this.pt.emitStopAnalytics()}}return s})(),_S=(()=>{class s{constructor(){this.Vn=null}getRecordingContext(){return this.Vn===null?{isRecording:!1}:this.Vn}setRecordingContext(t){this.Vn=t}}return s})(),bS=(()=>{class s extends lt{constructor(t,e){super(),this.at=t,this.T=e}onStart(){this.at.subscribe(s.Mt,t=>this.G(t))}onStop(){this.at.unsubscribe(s.Mt)}G(t){this.isStarted&&this.T.sendToParent(I.ApiError,t)}}return s.Mt="ChildApiErrorsService",s})(),AS=(()=>{class s extends lt{constructor(t,e){super(),this.at=t,this.T=e}onStart(){this.at.subscribe(s.Mt,t=>this.G(t),{detailedEvent:!0})}onStop(){this.at.unsubscribe(s.Mt)}G(t){this.isStarted&&this.T.sendToParent(I.DetailedApiError,t)}}return s.Mt="ChildDetailedApiErrorsService",s})(),TS=(()=>{class s{constructor(t,e,i){this.h=t,this.T=e,this.z=i}init(){var t;let e=new gs,i;!((t=this.h.apiErrors.collectionRules)===null||t===void 0)&&t.length?i=new Zl(this.h.apiErrors,e):i=new th(this.h.apiErrors,e),this.at=new Fl(new Xl,new Kl,i),this.Wa=new bS(this.at,this.T),this.Mu=new AS(this.at,this.T),this.at.init(),this.ht()}ht(){this.z.register(tn)}onStartTracking(){this.Wa.start()}onParentRecordingContextChange(t){t.isRecording?this.Mu.start():this.Mu.stop()}onOptout(){this.Wa.stop(),this.Mu.stop()}onStartAnalytics(){this.Wa.start()}onStopAnalytics(){this.Wa.stop()}}return s})(),RS=(()=>{class s extends lt{constructor(t,e){super(),this._s=t,this.T=e}onStart(){this._s.subscribe(s.Mt,t=>this.G(t))}onStop(){this._s.unsubscribe(s.Mt)}G(t){this.isStarted&&this.T.sendToParent(I.JavascriptError,t)}}return s.Mt="ChildJavaScriptErrorsService",s})(),CS=(()=>{class s{constructor(t,e,i){this.h=t,this.T=e,this.z=i}init(){let t=new Hl;this.Ya=new RS(t,this.T),this.ht()}onStartTracking(){this.Ya.start()}onOptout(){this.Ya.stop()}onStartAnalytics(){this.Ya.start()}onStopAnalytics(){this.Ya.stop()}ht(){this.h.jsCustomErrorsEnabled&&!this.h.customErrors.enabled&&this.z.register(qs)}}return s})();var IS=(()=>{class s{constructor(t,e,i){this.h=t,this.T=e,this.z=i}init(){var t;this.ht()}onStartTracking(){var t;(t=this.ku)===null||t===void 0||t.start()}onOptout(){var t;(t=this.ku)===null||t===void 0||t.stop()}onStartAnalytics(){var t;(t=this.ku)===null||t===void 0||t.start()}onStopAnalytics(){var t;(t=this.ku)===null||t===void 0||t.stop()}ht(){this.z.register(qs)}}return s})(),PS=(()=>{class s{constructor(){this.Xa={started:!1,useAnonymization:!0}}getSensitiveStatus(){return this.Xa}setSensitiveStatus(t){this.Xa=t}getElementSensitiveStatus(t){return this.Xa.started?k.isMaskedElement(t)||k.isMaskedElementChild(t)?xt.MASKED:Fc.shouldEncrypt(t)?xt.ENCRYPTED:Se.isEditableNode(t)?xt.ANONYMIZED:this.Xa.useAnonymization?ae.isWhitelistedElement(t)?xt.CAPTURED:xt.ANONYMIZED:xt.CAPTURED:xt.ANONYMIZED}}return s})(),OS=(()=>{class s{constructor(t,e,i){this.h=t,this.ft=e,this.C=i}init(){ds.isSupported()&&ds.setDigestSalt(this.h.projectId.toString());let t,e,i,r,o,c,l,h,p;this.C.schedule(()=>{t=new Ih(this.C),e=new bv,i=new _S,r=new PS;let u=[yr.UXA];this.ft.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(u,yr.WVT),o=new wS(e,this.h)):o=new Pv(this.h,t,i,r,e),c=new fh(u)}),this.C.schedule(()=>{l=new Tv(c,o),h=new Av(l)}),this.C.schedule(()=>{h.init()}),this.C.schedule(()=>{}),this.C.schedule(()=>{if(this.h.apiErrors.enabled){let u=new TS(this.h,o,l);u.init(),t.addListener(u),e.addListener(u)}if(this.h.jsErrorsEnabled){let u=new CS(this.h,o,l);u.init(),t.addListener(u),e.addListener(u)}if(this.h.customErrors.enabled){let u=new IS(this.h,o,l);u.init(),t.addListener(u),e.addListener(u)}}),this.C.schedule(()=>{t.addListener(h)}),this.C.schedule(()=>{t.emitInitTracking()}),this.C.schedule(()=>{new ES(e,t,this.h,o,i,c,this.ft,this.C,r).start()})}}return s})(),NS=(()=>{class s{constructor(t,e,i){this.h=t,this.ft=e,this.us=i}start(){var t,e,i,r,o;if(window.UXAnalytics)return;window.UXAnalytics={};let c=new Lc(!!(!((t=this.h.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.h.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.h.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),l=new Bp(this.ft,this.h);l.init();let h=new $p(this.h,l);if(this.ft.isTopWindowTracker()&&h.canTrack()){if(!((r=window.CSProtectnativeFunctionsLogs)===null||r===void 0)&&r.Warning&&V.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){V.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}jp();let u=new Ih(c),E=new wv(this.h,l,this.us,c,u);this.h.isQuotaEnabled()?E.initWithQuota():E.init()}else!this.ft.isTopWindowTracker()&&h.canTrackInChild()&&new OS(this.h,this.ft,c).init();let p=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(u){return k.isMaskedElement(u)||k.isMaskedElementChild(u)},isAttributeSensitive(u,E){return k.isMaskedAttribute(u,E)},getSensitiveAttributes(u){return Ir(u.attributes,E=>k.isMaskedAttribute(u,E.name))}},Console:{warn(u){p&&console.warn("cs.tracking.warning",u)},error(u){p&&console.error("cs.tracking.error",u)}},Version:cc},!window.CSFrameCommunication&&Xn.isActivable()&&(window.CSFrameCommunication=Xn,Xn.waitForConnection())}}return H([Lt("main.start"),D("main.start")],s.prototype,"start",null),s})(),MS=(()=>{class s{constructor(){}send(t,e,i=nt.warn){let r={message:t,errorCode:e,level:i};gt.sendLog(r)}}return s})();var kS=(()=>{class s{constructor(t,e,i){this.U=t,this.I=e,this.aC=i,this.At=[],this.Ie=null,this.cC=Or().v}Vm(){this.At.length!==0&&(this.U.send({m:csArray.prototype.map.call(this.At,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.I.anonymizePII(window.location.pathname),pid:this.aC,v:this.cC}),this.At=[])}push(t){if(csArray.prototype.push.call(this.At,...t),this.Ie&&(csClearTimeout(this.Ie),this.Ie=null),this.At.length>=s.MAX_QUEUE_SIZE){this.Vm();return}this.Ie=window.csSetTimeout(()=>{this.Vm(),this.Ie=null},s.DEBOUNCE_INTERVAL)}}return s.DEBOUNCE_INTERVAL=5e3,s.MAX_QUEUE_SIZE=100,s})();function DS(s,n){let t=s.validationRate/10,e=Te.boolean(t);if((s.environment==="staging"||!1||e)&&!n.isInWebViewContext())try{let o=oh.create(V.warn,n.isTopWindowTracker()),l=new Ec(o).create(s.getMetricsUri(),!0),h=new gs,p=new kS(l,h,s.projectId);rt.setService(p)}catch(o){V.warn(`Error initializing metrics: ${o.message}`)}}function xS(){var s,n;let t=new up(window.CS_CONF);window._uxa=window._uxa||[],t.processOptionOverrides(window._uxa);let e=new dp(window,t);e.init();let i=new xp;if(Gd(V),V.computeIsActive(t.validationRate),e.isTopWindowTracker()){let c=new Np(t,i);V.setStrategy(c)}else if(e.isInIframeContext()){let o=new Dp(t);V.setStrategy(o)}else if(e.isInWebViewContext()){let o=new MS;V.setStrategy(o)}!((n=t==null?void 0:t.experimental)===null||n===void 0)&&n.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=ts(window,"MutationObserver")),Yd(),DS(t,e),new NS(t,e,i).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{Lp(xS)}catch{}});})();

